(function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}}var installedModules={};var installedChunks={0:0};function jsonpScriptSrc(chunkId){return __webpack_require__.p+"visDefaultEditor.chunk."+chunkId+".js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["visDefaultEditor_bundle_jsonpfunction"]=window["visDefaultEditor_bundle_jsonpfunction"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;return __webpack_require__(__webpack_require__.s=46)})([function(module,exports){module.exports=__osdSharedDeps__.React},function(module,exports){module.exports=__osdSharedDeps__.ElasticEui},function(module,exports){module.exports=__osdSharedDeps__.OsdI18n},function(module,exports){module.exports=__osdSharedDeps__.Lodash},function(module,exports){module.exports=__osdSharedDeps__.TsLib},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__osdBundles__.get("plugin/data/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__osdSharedDeps__.OsdI18nReact},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return useSubAggParamsHandlers}));__webpack_require__.d(__webpack_exports__,"h",(function(){return wrapWithInlineComp}));__webpack_require__.d(__webpack_exports__,"c",(function(){return parseCommaSeparatedList}));__webpack_require__.d(__webpack_exports__,"a",(function(){return formatListAsProse}));__webpack_require__.d(__webpack_exports__,"b",(function(){return isCompatibleAggregation}));__webpack_require__.d(__webpack_exports__,"d",(function(){return useAvailableOptions}));__webpack_require__.d(__webpack_exports__,"e",(function(){return useFallbackMetric}));__webpack_require__.d(__webpack_exports__,"g",(function(){return useValidation}));var external_osdSharedDeps_React_=__webpack_require__(0);var external_osdSharedDeps_React_default=__webpack_require__.n(external_osdSharedDeps_React_);function useSubAggParamsHandlers(agg,aggParam,subAgg,setValue){const setAggParamValue=Object(external_osdSharedDeps_React_["useCallback"])((aggId,paramName,val)=>{const parsedParams=subAgg.toJSON();const params={...parsedParams,params:{...parsedParams.params,[paramName]:val}};setValue(aggParam.makeAgg(agg,params))},[agg,aggParam,setValue,subAgg]);const onAggTypeChange=Object(external_osdSharedDeps_React_["useCallback"])((aggId,aggType)=>{const parsedAgg=subAgg.toJSON();const params={...parsedAgg,type:aggType};setValue(aggParam.makeAgg(agg,params))},[agg,aggParam,setValue,subAgg]);return{onAggTypeChange:onAggTypeChange,setAggParamValue:setAggParamValue}}const wrapWithInlineComp=WrapComponent=>props=>external_osdSharedDeps_React_default.a.createElement("div",{className:`visEditorAggParam--half visEditorAggParam--half-${props.aggParam.name}`},external_osdSharedDeps_React_default.a.createElement(WrapComponent,props));function parseCommaSeparatedList(input){if(Array.isArray(input)){return input}return String(input||"").split(",").map(word=>word.trim()).filter(Boolean)}function formatListAsProse(list){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const{inclusive:inclusive=true}=options;const count=list.length;const conjunction=inclusive?"and":"or";if(count<=2){return list.join(` ${conjunction} `)}return list.slice(0,-1).concat(`${conjunction} ${list[count-1]}`).join(", ")}var external_osdSharedDeps_OsdI18n_=__webpack_require__(2);const DEFAULT_METRIC="custom";const CUSTOM_METRIC={text:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.customMetricLabel",{defaultMessage:"Custom metric"}),value:DEFAULT_METRIC};function useCompatibleAggCallback(aggFilter){return Object(external_osdSharedDeps_React_["useCallback"])(isCompatibleAggregation(aggFilter),[aggFilter])}function useFallbackMetric(setValue,aggFilter,metricAggs,value,fallbackValue){const isCompatibleAgg=useCompatibleAggCallback(aggFilter);Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(metricAggs&&value&&value!==DEFAULT_METRIC){const respAgg=metricAggs.filter(isCompatibleAgg).find(aggregation=>aggregation.id===value);if(!respAgg&&value!==fallbackValue){setValue(fallbackValue)}}},[setValue,isCompatibleAgg,metricAggs,value,fallbackValue])}function useAvailableOptions(aggFilter){let metricAggs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];let defaultOptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];const isCompatibleAgg=useCompatibleAggCallback(aggFilter);const options=Object(external_osdSharedDeps_React_["useMemo"])(()=>[...metricAggs.map(respAgg=>({text:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.definiteMetricLabel",{defaultMessage:"Metric: {metric}",values:{metric:safeMakeLabel(respAgg)}}),value:respAgg.id,disabled:!isCompatibleAgg(respAgg)})),CUSTOM_METRIC,...defaultOptions],[metricAggs,defaultOptions,isCompatibleAgg]);return options}function useValidation(setValidity,isValid){Object(external_osdSharedDeps_React_["useEffect"])(()=>{setValidity(isValid);return()=>setValidity(true)},[isValid,setValidity])}function safeMakeLabel(agg){try{return agg.makeLabel()}catch(e){return external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.aggNotValidLabel",{defaultMessage:"- agg not valid -"})}}function isCompatibleAggregation(aggFilter){return agg=>!aggFilter.includes(`!${agg.type.name}`)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isClient=typeof window==="object";exports.on=function(obj){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}return obj.addEventListener.apply(obj,args)};exports.off=function(obj){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}return obj.removeEventListener.apply(obj,args)};exports.isDeepEqual=__webpack_require__(57)},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__osdBundles__.get("plugin/opensearchDashboardsReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var createMemo_1=__webpack_require__(49);exports.createMemo=createMemo_1.default;var createReducerContext_1=__webpack_require__(50);exports.createReducerContext=createReducerContext_1.default;var createReducer_1=__webpack_require__(51);exports.createReducer=createReducer_1.default;var createStateContext_1=__webpack_require__(52);exports.createStateContext=createStateContext_1.default;var useAsync_1=__webpack_require__(29);exports.useAsync=useAsync_1.default;var useAsyncFn_1=__webpack_require__(30);exports.useAsyncFn=useAsyncFn_1.default;var useAsyncRetry_1=__webpack_require__(53);exports.useAsyncRetry=useAsyncRetry_1.default;var useAudio_1=__webpack_require__(54);exports.useAudio=useAudio_1.default;var useBattery_1=__webpack_require__(56);exports.useBattery=useBattery_1.default;var useBeforeUnload_1=__webpack_require__(58);exports.useBeforeUnload=useBeforeUnload_1.default;var useBoolean_1=__webpack_require__(59);exports.useBoolean=useBoolean_1.default;var useClickAway_1=__webpack_require__(60);exports.useClickAway=useClickAway_1.default;var useCookie_1=__webpack_require__(61);exports.useCookie=useCookie_1.default;var useCopyToClipboard_1=__webpack_require__(63);exports.useCopyToClipboard=useCopyToClipboard_1.default;var useCounter_1=__webpack_require__(33);exports.useCounter=useCounter_1.default;var useCss_1=__webpack_require__(66);exports.useCss=useCss_1.default;var useCustomCompareEffect_1=__webpack_require__(25);exports.useCustomCompareEffect=useCustomCompareEffect_1.default;var useDebounce_1=__webpack_require__(72);exports.useDebounce=useDebounce_1.default;var useDeepCompareEffect_1=__webpack_require__(73);exports.useDeepCompareEffect=useDeepCompareEffect_1.default;var useDefault_1=__webpack_require__(74);exports.useDefault=useDefault_1.default;var useDrop_1=__webpack_require__(75);exports.useDrop=useDrop_1.default;var useDropArea_1=__webpack_require__(76);exports.useDropArea=useDropArea_1.default;var useEffectOnce_1=__webpack_require__(18);exports.useEffectOnce=useEffectOnce_1.default;var useEnsuredForwardedRef_1=__webpack_require__(77);exports.useEnsuredForwardedRef=useEnsuredForwardedRef_1.default;exports.ensuredForwardRef=useEnsuredForwardedRef_1.ensuredForwardRef;var useEvent_1=__webpack_require__(35);exports.useEvent=useEvent_1.default;var useError_1=__webpack_require__(78);exports.useError=useError_1.default;var useFavicon_1=__webpack_require__(79);exports.useFavicon=useFavicon_1.default;var useFullscreen_1=__webpack_require__(80);exports.useFullscreen=useFullscreen_1.default;var useGeolocation_1=__webpack_require__(82);exports.useGeolocation=useGeolocation_1.default;var useGetSet_1=__webpack_require__(34);exports.useGetSet=useGetSet_1.default;var useGetSetState_1=__webpack_require__(83);exports.useGetSetState=useGetSetState_1.default;var useHarmonicIntervalFn_1=__webpack_require__(84);exports.useHarmonicIntervalFn=useHarmonicIntervalFn_1.default;var useHover_1=__webpack_require__(86);exports.useHover=useHover_1.default;var useHoverDirty_1=__webpack_require__(36);exports.useHoverDirty=useHoverDirty_1.default;var useIdle_1=__webpack_require__(87);exports.useIdle=useIdle_1.default;var useIntersection_1=__webpack_require__(89);exports.useIntersection=useIntersection_1.default;var useInterval_1=__webpack_require__(90);exports.useInterval=useInterval_1.default;var useIsomorphicLayoutEffect_1=__webpack_require__(37);exports.useIsomorphicLayoutEffect=useIsomorphicLayoutEffect_1.default;var useKey_1=__webpack_require__(38);exports.useKey=useKey_1.default;var createBreakpoint_1=__webpack_require__(91);exports.createBreakpoint=createBreakpoint_1.default;var useKeyPress_1=__webpack_require__(39);exports.useKeyPress=useKeyPress_1.default;var useKeyPressEvent_1=__webpack_require__(92);exports.useKeyPressEvent=useKeyPressEvent_1.default;var useLifecycles_1=__webpack_require__(93);exports.useLifecycles=useLifecycles_1.default;var useList_1=__webpack_require__(40);exports.useList=useList_1.default;var useLocalStorage_1=__webpack_require__(94);exports.useLocalStorage=useLocalStorage_1.default;var useLocation_1=__webpack_require__(95);exports.useLocation=useLocation_1.default;var useLockBodyScroll_1=__webpack_require__(96);exports.useLockBodyScroll=useLockBodyScroll_1.default;var useLogger_1=__webpack_require__(97);exports.useLogger=useLogger_1.default;var useLongPress_1=__webpack_require__(98);exports.useLongPress=useLongPress_1.default;var useMap_1=__webpack_require__(99);exports.useMap=useMap_1.default;var useMedia_1=__webpack_require__(100);exports.useMedia=useMedia_1.default;var useMediaDevices_1=__webpack_require__(101);exports.useMediaDevices=useMediaDevices_1.default;var useMediatedState_1=__webpack_require__(102);exports.useMediatedState=useMediatedState_1.useMediatedState;var useMethods_1=__webpack_require__(103);exports.useMethods=useMethods_1.default;var useMotion_1=__webpack_require__(104);exports.useMotion=useMotion_1.default;var useMount_1=__webpack_require__(41);exports.useMount=useMount_1.default;var useMountedState_1=__webpack_require__(11);exports.useMountedState=useMountedState_1.default;var useMouse_1=__webpack_require__(42);exports.useMouse=useMouse_1.default;var useMouseHovered_1=__webpack_require__(105);exports.useMouseHovered=useMouseHovered_1.default;var useNetwork_1=__webpack_require__(106);exports.useNetwork=useNetwork_1.default;var useNumber_1=__webpack_require__(107);exports.useNumber=useNumber_1.default;var useObservable_1=__webpack_require__(108);exports.useObservable=useObservable_1.default;var useOrientation_1=__webpack_require__(109);exports.useOrientation=useOrientation_1.default;var usePageLeave_1=__webpack_require__(110);exports.usePageLeave=usePageLeave_1.default;var usePermission_1=__webpack_require__(111);exports.usePermission=usePermission_1.default;var usePrevious_1=__webpack_require__(112);exports.usePrevious=usePrevious_1.default;var usePreviousDistinct_1=__webpack_require__(113);exports.usePreviousDistinct=usePreviousDistinct_1.default;var usePromise_1=__webpack_require__(114);exports.usePromise=usePromise_1.default;var useQueue_1=__webpack_require__(115);exports.useQueue=useQueue_1.default;var useRaf_1=__webpack_require__(43);exports.useRaf=useRaf_1.default;var useRafLoop_1=__webpack_require__(116);exports.useRafLoop=useRafLoop_1.default;var useRafState_1=__webpack_require__(19);exports.useRafState=useRafState_1.default;var useSearchParam_1=__webpack_require__(117);exports.useSearchParam=useSearchParam_1.default;var useScroll_1=__webpack_require__(118);exports.useScroll=useScroll_1.default;var useScrolling_1=__webpack_require__(119);exports.useScrolling=useScrolling_1.default;var useSessionStorage_1=__webpack_require__(120);exports.useSessionStorage=useSessionStorage_1.default;var useSetState_1=__webpack_require__(17);exports.useSetState=useSetState_1.default;var useShallowCompareEffect_1=__webpack_require__(121);exports.useShallowCompareEffect=useShallowCompareEffect_1.default;var useSize_1=__webpack_require__(123);exports.useSize=useSize_1.default;var useSlider_1=__webpack_require__(124);exports.useSlider=useSlider_1.default;var useSpeech_1=__webpack_require__(125);exports.useSpeech=useSpeech_1.default;var useStartTyping_1=__webpack_require__(126);exports.useStartTyping=useStartTyping_1.default;var useStateWithHistory_1=__webpack_require__(127);exports.useStateWithHistory=useStateWithHistory_1.useStateWithHistory;var useStateList_1=__webpack_require__(128);exports.useStateList=useStateList_1.default;var useThrottle_1=__webpack_require__(129);exports.useThrottle=useThrottle_1.default;var useThrottleFn_1=__webpack_require__(130);exports.useThrottleFn=useThrottleFn_1.default;var useTimeout_1=__webpack_require__(131);exports.useTimeout=useTimeout_1.default;var useTimeoutFn_1=__webpack_require__(26);exports.useTimeoutFn=useTimeoutFn_1.default;var useTitle_1=__webpack_require__(132);exports.useTitle=useTitle_1.default;var useToggle_1=__webpack_require__(32);exports.useToggle=useToggle_1.default;var useTween_1=__webpack_require__(133);exports.useTween=useTween_1.default;var useUnmount_1=__webpack_require__(15);exports.useUnmount=useUnmount_1.default;var useUnmountPromise_1=__webpack_require__(135);exports.useUnmountPromise=useUnmountPromise_1.default;var useUpdate_1=__webpack_require__(14);exports.useUpdate=useUpdate_1.default;var useUpdateEffect_1=__webpack_require__(16);exports.useUpdateEffect=useUpdateEffect_1.default;var useUpsert_1=__webpack_require__(136);exports.useUpsert=useUpsert_1.default;var useVibrate_1=__webpack_require__(137);exports.useVibrate=useVibrate_1.default;var useVideo_1=__webpack_require__(138);exports.useVideo=useVideo_1.default;var useStateValidator_1=__webpack_require__(139);exports.useStateValidator=useStateValidator_1.default;var useScrollbarWidth_1=__webpack_require__(140);exports.useScrollbarWidth=useScrollbarWidth_1.useScrollbarWidth;var useMultiStateValidator_1=__webpack_require__(142);exports.useMultiStateValidator=useMultiStateValidator_1.useMultiStateValidator;var useWindowScroll_1=__webpack_require__(143);exports.useWindowScroll=useWindowScroll_1.default;var useWindowSize_1=__webpack_require__(144);exports.useWindowSize=useWindowSize_1.default;var useMeasure_1=__webpack_require__(145);exports.useMeasure=useMeasure_1.default;var useRendersCount_1=__webpack_require__(148);exports.useRendersCount=useRendersCount_1.useRendersCount;var useFirstMountState_1=__webpack_require__(22);exports.useFirstMountState=useFirstMountState_1.useFirstMountState;var useSet_1=__webpack_require__(149);exports.useSet=useSet_1.default;var createGlobalState_1=__webpack_require__(150);exports.createGlobalState=createGlobalState_1.createGlobalState},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);function useMountedState(){var mountedRef=react_1.useRef(false);var get=react_1.useCallback((function(){return mountedRef.current}),[]);react_1.useEffect((function(){mountedRef.current=true;return function(){mountedRef.current=false}}));return get}exports.default=useMountedState},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return Schemas}));__webpack_require__.d(__webpack_exports__,"d",(function(){return getSchemaByName}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3);var lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);var _data_public__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5);var _data_public__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_data_public__WEBPACK_IMPORTED_MODULE_1__);let _AggGroupNames$Bucket,_AggGroupNames$Metric;function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}_AggGroupNames$Bucket=_data_public__WEBPACK_IMPORTED_MODULE_1__["AggGroupNames"].Buckets;_AggGroupNames$Metric=_data_public__WEBPACK_IMPORTED_MODULE_1__["AggGroupNames"].Metrics;class Schemas{constructor(schemas){_defineProperty(this,"all",[]);_defineProperty(this,_AggGroupNames$Bucket,[]);_defineProperty(this,_AggGroupNames$Metric,[]);lodash__WEBPACK_IMPORTED_MODULE_0___default()(schemas||[]).chain().map(schema=>{if(!schema.name)throw new Error("all schema must have a unique name");if(schema.name==="split"){schema.params=[{name:"row",default:true}]}Object(lodash__WEBPACK_IMPORTED_MODULE_0__["defaults"])(schema,{min:0,max:Infinity,group:_data_public__WEBPACK_IMPORTED_MODULE_1__["AggGroupNames"].Buckets,title:schema.name,aggFilter:"*",editor:false,params:[]});return schema}).tap(fullSchemas=>{this.all=fullSchemas}).groupBy("group").forOwn((group,groupName)=>{this[groupName]=group}).commit()}}const getSchemaByName=(schemas,schemaName)=>schemas.find(s=>s.name===schemaName)||{}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DefaultEditorAggParams}));var external_osdSharedDeps_React_=__webpack_require__(0);var external_osdSharedDeps_React_default=__webpack_require__.n(external_osdSharedDeps_React_);var external_osdSharedDeps_ElasticEui_=__webpack_require__(1);var external_osdSharedDeps_OsdI18n_=__webpack_require__(2);var useUnmount=__webpack_require__(15);var useUnmount_default=__webpack_require__.n(useUnmount);var public_=__webpack_require__(5);var external_osdSharedDeps_Lodash_=__webpack_require__(3);var external_osdSharedDeps_OsdI18nReact_=__webpack_require__(6);var opensearchDashboardsReact_public_=__webpack_require__(9);let AGG_TYPE_ACTION_KEYS=function(AGG_TYPE_ACTION_KEYS){AGG_TYPE_ACTION_KEYS["TOUCHED"]="aggTypeTouched";AGG_TYPE_ACTION_KEYS["VALID"]="aggTypeValid";return AGG_TYPE_ACTION_KEYS}({});function aggTypeReducer(state,action){switch(action.type){case AGG_TYPE_ACTION_KEYS.TOUCHED:return{...state,touched:action.payload};case AGG_TYPE_ACTION_KEYS.VALID:return{...state,valid:action.payload};default:throw new Error}}let AGG_PARAMS_ACTION_KEYS=function(AGG_PARAMS_ACTION_KEYS){AGG_PARAMS_ACTION_KEYS["TOUCHED"]="aggParamsTouched";AGG_PARAMS_ACTION_KEYS["VALID"]="aggParamsValid";AGG_PARAMS_ACTION_KEYS["RESET"]="aggParamsReset";return AGG_PARAMS_ACTION_KEYS}({});function aggParamsReducer(state,_ref){let{type:type,paramName:paramName="",payload:payload}=_ref;const targetParam=state[paramName]||{valid:true,touched:false};switch(type){case AGG_PARAMS_ACTION_KEYS.TOUCHED:return{...state,[paramName]:{...targetParam,touched:payload}};case AGG_PARAMS_ACTION_KEYS.VALID:return{...state,[paramName]:{...targetParam,valid:payload}};case AGG_PARAMS_ACTION_KEYS.RESET:return{};default:throw new Error}}function initAggParamsState(params){const state=params.reduce((stateObj,param)=>{stateObj[param.aggParam.name]={valid:true,touched:false};return stateObj},{});return state}function DefaultEditorAggSelect(_ref){let{aggError:aggError,id:id,indexPattern:indexPattern,value:value,setValue:setValue,aggTypeOptions:aggTypeOptions,showValidation:showValidation,isSubAggregation:isSubAggregation,onChangeAggType:onChangeAggType}=_ref;const[isDirty,setIsDirty]=Object(external_osdSharedDeps_React_["useState"])(false);const{services:services}=Object(opensearchDashboardsReact_public_["useOpenSearchDashboards"])();const selectedOptions=value?[{label:value.title,target:value}]:[];const label=isSubAggregation?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.aggSelect.subAggregationLabel",defaultMessage:"Sub aggregation"}):external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.aggSelect.aggregationLabel",defaultMessage:"Aggregation"});let aggHelpLink;if(Object(external_osdSharedDeps_Lodash_["has"])(value,"name")){aggHelpLink=services.docLinks.links.opensearch.aggregations.base}const helpLink=value&&aggHelpLink&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLink"],{href:aggHelpLink,target:"_blank"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.aggSelect.helpLinkLabel",defaultMessage:"{aggTitle} help",values:{aggTitle:value?value.title:""}})));const errors=aggError?[aggError]:[];if(!aggTypeOptions.length){errors.push(external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.aggSelect.noCompatibleAggsDescription",{defaultMessage:"The index pattern {indexPatternTitle} does not have any aggregatable fields.",values:{indexPatternTitle:indexPattern&&indexPattern.title}}))}const isValid=!!value&&!errors.length&&!isDirty;const onChange=Object(external_osdSharedDeps_React_["useCallback"])(options=>{const selectedOption=Object(external_osdSharedDeps_Lodash_["get"])(options,"0.target");if(selectedOption){setValue(selectedOption)}},[setValue]);const onSearchChange=Object(external_osdSharedDeps_React_["useCallback"])(searchValue=>setIsDirty(Boolean(searchValue)),[]);const setTouched=Object(external_osdSharedDeps_React_["useCallback"])(()=>onChangeAggType({type:AGG_TYPE_ACTION_KEYS.TOUCHED,payload:true}),[onChangeAggType]);const setValidity=Object(external_osdSharedDeps_React_["useCallback"])(valid=>onChangeAggType({type:AGG_TYPE_ACTION_KEYS.VALID,payload:valid}),[onChangeAggType]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{setValidity(isValid)},[isValid,setValidity]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(errors.length){setTouched()}},[errors.length,setTouched]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:label,labelAppend:helpLink,error:errors,isInvalid:showValidation?!isValid:false,fullWidth:true,display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiComboBox"],{placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.aggSelect.selectAggPlaceholder",{defaultMessage:"Select an aggregation"}),id:`visDefaultEditorAggSelect${id}`,isDisabled:!aggTypeOptions.length,options:aggTypeOptions,selectedOptions:selectedOptions,singleSelection:{asPlainText:true},onBlur:setTouched,onChange:onChange,onSearchChange:onSearchChange,"data-test-subj":"defaultEditorAggSelect",isClearable:false,isInvalid:showValidation?!isValid:false,fullWidth:true,sortMatchesBy:"startsWith",compressed:true}))}function _extends(){_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function DefaultEditorAggParam(props){const{agg:agg,aggParam:aggParam,paramEditor:ParamEditor,setAggParamValue:setAggParamValue,onChangeParamsState:onChangeParamsState,...rest}=props;const setValidity=Object(external_osdSharedDeps_React_["useCallback"])(valid=>{onChangeParamsState({type:AGG_PARAMS_ACTION_KEYS.VALID,paramName:aggParam.name,payload:valid})},[onChangeParamsState,aggParam.name]);const setTouched=Object(external_osdSharedDeps_React_["useCallback"])((function(){let isTouched=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;onChangeParamsState({type:AGG_PARAMS_ACTION_KEYS.TOUCHED,paramName:aggParam.name,payload:isTouched})}),[onChangeParamsState,aggParam.name]);const setValue=Object(external_osdSharedDeps_React_["useCallback"])(value=>{if(props.value!==value){setAggParamValue(agg.id,aggParam.name,value)}},[setAggParamValue,agg.id,aggParam.name,props.value]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(aggParam.shouldShow&&!aggParam.shouldShow(agg)){setValidity(true)}},[agg,agg.params.field,aggParam,setValidity]);if(aggParam.shouldShow&&!aggParam.shouldShow(agg)){return null}return external_osdSharedDeps_React_default.a.createElement(ParamEditor,_extends({agg:agg,aggParam:aggParam,setValidity:setValidity,setTouched:setTouched,setValue:setValue},rest))}var agg_params_helper=__webpack_require__(24);function getEditorConfig(indexPattern,aggTypeName,fieldName){const aggRestrictions=indexPattern.getAggregationRestrictions();if(!aggRestrictions||!aggTypeName||!fieldName){return{}}if(aggTypeName==="terms"){return{otherBucket:{hidden:true},missingBucket:{hidden:true}}}const fieldAgg=aggRestrictions[aggTypeName]&&aggRestrictions[aggTypeName][fieldName];if(!fieldAgg){return{}}if(aggTypeName==="histogram"){const interval=fieldAgg.interval;return interval?{intervalBase:{fixedValue:interval},interval:{base:interval,help:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.editorConfig.histogram.interval.helpText",{defaultMessage:"Must be a multiple of configuration interval: {interval}",values:{interval:interval}})}}:{}}if(aggTypeName==="date_histogram"){const interval=fieldAgg.calendar_interval||fieldAgg.fixed_interval;return{useNormalizedOpenSearchInterval:{fixedValue:false},interval:{default:interval,timeBase:interval,help:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.editorConfig.dateHistogram.customInterval.helpText",{defaultMessage:"Must be a multiple of configuration interval: {interval}",values:{interval:interval}})}}}return{}}var public_schemas=__webpack_require__(12);function agg_params_extends(){agg_params_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return agg_params_extends.apply(this,arguments)}const FIXED_VALUE_PROP="fixedValue";const DEFAULT_PROP="default";function DefaultEditorAggParams(_ref){var _agg$type,_agg$params;let{agg:agg,aggError:aggError,aggIndex:aggIndex=0,aggIsTooLow:aggIsTooLow=false,className:className,disabledParams:disabledParams,groupName:groupName,formIsTouched:formIsTouched,indexPattern:indexPattern,metricAggs:metricAggs,state:state,setAggParamValue:setAggParamValue,onAggTypeChange:onAggTypeChange,setTouched:setTouched,setValidity:setValidity,schemas:schemas,allowedAggs:allowedAggs=[],hideCustomLabel:hideCustomLabel=false}=_ref;const schema=Object(external_osdSharedDeps_React_["useMemo"])(()=>Object(public_schemas["d"])(schemas,agg.schema),[agg.schema,schemas]);const aggFilter=Object(external_osdSharedDeps_React_["useMemo"])(()=>[...allowedAggs,...schema.aggFilter||[]],[allowedAggs,schema.aggFilter]);const{services:services}=Object(opensearchDashboardsReact_public_["useOpenSearchDashboards"])();const aggTypes=Object(external_osdSharedDeps_React_["useMemo"])(()=>services.data.search.aggs.types.getAll(),[services.data.search.aggs.types]);const groupedAggTypeOptions=Object(external_osdSharedDeps_React_["useMemo"])(()=>Object(agg_params_helper["c"])(aggTypes,agg,indexPattern,groupName,aggFilter),[aggTypes,agg,indexPattern,groupName,aggFilter]);const error=aggIsTooLow?external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.aggParams.errors.aggWrongRunOrderErrorMessage",{defaultMessage:'"{schema}" aggs must run before all other buckets!',values:{schema:schema.title}}):"";const aggTypeName=(_agg$type=agg.type)===null||_agg$type===void 0?void 0:_agg$type.name;const fieldName=(_agg$params=agg.params)===null||_agg$params===void 0||(_agg$params=_agg$params.field)===null||_agg$params===void 0?void 0:_agg$params.name;const editorConfig=Object(external_osdSharedDeps_React_["useMemo"])(()=>getEditorConfig(indexPattern,aggTypeName,fieldName),[indexPattern,aggTypeName,fieldName]);const params=Object(external_osdSharedDeps_React_["useMemo"])(()=>Object(agg_params_helper["b"])({agg:agg,editorConfig:editorConfig,metricAggs:metricAggs,state:state,schemas:schemas,hideCustomLabel:hideCustomLabel}),[agg,editorConfig,metricAggs,state,schemas,hideCustomLabel]);const allParams=[...params.basic,...params.advanced];const[paramsState,onChangeParamsState]=Object(external_osdSharedDeps_React_["useReducer"])(aggParamsReducer,allParams,initAggParamsState);const[aggType,onChangeAggType]=Object(external_osdSharedDeps_React_["useReducer"])(aggTypeReducer,{touched:false,valid:true});const isFormValid=!error&&aggType.valid&&Object.entries(paramsState).every(_ref2=>{let[,paramState]=_ref2;return paramState.valid});const isAllInvalidParamsTouched=!!error||Object(agg_params_helper["d"])(agg.type,aggType,paramsState);const onAggSelect=Object(external_osdSharedDeps_React_["useCallback"])(value=>{if(agg.type!==value){onAggTypeChange(agg.id,value);onChangeParamsState({type:AGG_PARAMS_ACTION_KEYS.RESET})}},[onAggTypeChange,agg]);useUnmount_default()(()=>setValidity(true));Object(external_osdSharedDeps_React_["useEffect"])(()=>{Object.entries(editorConfig).forEach(_ref3=>{let[param,paramConfig]=_ref3;const paramOptions=agg.type.params.find(paramOption=>paramOption.name===param);const hasFixedValue=paramConfig.hasOwnProperty(FIXED_VALUE_PROP);const hasDefault=paramConfig.hasOwnProperty(DEFAULT_PROP);if(hasFixedValue||hasDefault){let newValue;let property=FIXED_VALUE_PROP;let typedParamConfig=paramConfig;if(hasDefault){property=DEFAULT_PROP;typedParamConfig=paramConfig}if(paramOptions&&paramOptions.deserialize){newValue=paramOptions.deserialize(typedParamConfig[property])}else{newValue=typedParamConfig[property]}if(agg.params[param]!==newValue){setAggParamValue(agg.id,param,newValue)}}})},[editorConfig]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{setTouched(false)},[agg.type,setTouched]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{setValidity(isFormValid)},[isFormValid,agg.type,setValidity]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{setTouched(isAllInvalidParamsTouched)},[isAllInvalidParamsTouched,setTouched]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiForm"],{className:className,isInvalid:!!error,error:error,"data-test-subj":"visAggEditorParams"},external_osdSharedDeps_React_default.a.createElement(DefaultEditorAggSelect,{aggError:aggError,id:agg.id,indexPattern:indexPattern,value:agg.type,aggTypeOptions:groupedAggTypeOptions,isSubAggregation:aggIndex>=1&&groupName===public_["AggGroupNames"].Buckets,showValidation:formIsTouched||aggType.touched,setValue:onAggSelect,onChangeAggType:onChangeAggType}),params.basic.map(param=>{const model=paramsState[param.aggParam.name]||{touched:false,valid:true};return external_osdSharedDeps_React_default.a.createElement(DefaultEditorAggParam,agg_params_extends({key:`${param.aggParam.name}${agg.type?agg.type.name:""}`,disabled:disabledParams&&disabledParams.includes(param.aggParam.name),formIsTouched:formIsTouched,showValidation:formIsTouched||model.touched,setAggParamValue:setAggParamValue,onChangeParamsState:onChangeParamsState},param))}),params.advanced.length?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiAccordion"],{id:"advancedAccordion","data-test-subj":`advancedParams-${agg.id}`,buttonContent:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.advancedToggle.advancedLinkLabel",{defaultMessage:"Advanced"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),params.advanced.map(param=>{const model=paramsState[param.aggParam.name]||{touched:false,valid:true};return external_osdSharedDeps_React_default.a.createElement(DefaultEditorAggParam,agg_params_extends({key:`${param.aggParam.name}${agg.type?agg.type.name:""}`,disabled:disabledParams&&disabledParams.includes(param.aggParam.name),formIsTouched:formIsTouched,showValidation:formIsTouched||model.touched,setAggParamValue:setAggParamValue,onChangeParamsState:onChangeParamsState},param))}))):null)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var incrementParameter=function(num){return++num%1e6};var useUpdate=function(){var _a=react_1.useState(0),setState=_a[1];return react_1.useCallback((function(){return setState(incrementParameter)}),[])};exports.default=useUpdate},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useEffectOnce_1=tslib_1.__importDefault(__webpack_require__(18));var useUnmount=function(fn){var fnRef=react_1.useRef(fn);fnRef.current=fn;useEffectOnce_1.default((function(){return function(){return fnRef.current()}}))};exports.default=useUnmount},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useFirstMountState_1=__webpack_require__(22);var useUpdateEffect=function(effect,deps){var isFirstMount=useFirstMountState_1.useFirstMountState();react_1.useEffect((function(){if(!isFirstMount){return effect()}}),deps)};exports.default=useUpdateEffect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useSetState=function(initialState){if(initialState===void 0){initialState={}}var _a=react_1.useState(initialState),state=_a[0],set=_a[1];var setState=react_1.useCallback((function(patch){set((function(prevState){return Object.assign({},prevState,patch instanceof Function?patch(prevState):patch)}))}),[set]);return[state,setState]};exports.default=useSetState},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useEffectOnce=function(effect){react_1.useEffect(effect,[])};exports.default=useEffectOnce},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useUnmount_1=tslib_1.__importDefault(__webpack_require__(15));var useRafState=function(initialState){var frame=react_1.useRef(0);var _a=react_1.useState(initialState),state=_a[0],setState=_a[1];var setRafState=react_1.useCallback((function(value){cancelAnimationFrame(frame.current);frame.current=requestAnimationFrame((function(){setState(value)}))}),[]);useUnmount_1.default((function(){cancelAnimationFrame(frame.current)}));return[state,setRafState]};exports.default=useRafState},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return RangesParamEditor}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);var _elastic_eui__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__);var _osd_i18n_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6);var _osd_i18n_react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_osd_i18n_react__WEBPACK_IMPORTED_MODULE_2__);var _osd_i18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2);var _osd_i18n__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_osd_i18n__WEBPACK_IMPORTED_MODULE_3__);var lodash__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3);var lodash__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__);const FROM_PLACEHOLDER="−∞";const TO_PLACEHOLDER="+∞";const generateId=Object(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["htmlIdGenerator"])();const isEmpty=value=>value===undefined||value===null;function RangesParamEditor(_ref){let{"data-test-subj":dataTestSubj="range",addRangeValues:addRangeValues,error:error,value:value=[],hidePlaceholders:hidePlaceholders,setValue:setValue,setTouched:setTouched,setValidity:setValidity,validateRange:validateRange}=_ref;const[ranges,setRanges]=Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(()=>value.map(range=>({...range,id:generateId()})));const updateRanges=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(rangeValues=>{setValue(rangeValues.map(range=>Object(lodash__WEBPACK_IMPORTED_MODULE_4__["omit"])(range,"id")));setRanges(rangeValues);if(setTouched){setTouched(true)}},[setTouched,setValue]);const onAddRange=Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(()=>addRangeValues?updateRanges([...ranges,{...addRangeValues(),id:generateId()}]):updateRanges([...ranges,{id:generateId()}]),[addRangeValues,ranges,updateRanges]);const onRemoveRange=id=>updateRanges(ranges.filter(range=>range.id!==id));const onChangeRange=(id,key,newValue)=>updateRanges(ranges.map(range=>range.id===id?{...range,[key]:newValue===""?undefined:parseFloat(newValue)}:range));Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(()=>{if(!value.length){onAddRange()}},[onAddRange,value.length]);Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(()=>{if(value.length!==ranges.length||value.some((range,index)=>!Object(lodash__WEBPACK_IMPORTED_MODULE_4__["isEqual"])(range,Object(lodash__WEBPACK_IMPORTED_MODULE_4__["omit"])(ranges[index],"id")))){setRanges(value.map(range=>({...range,id:generateId()})))}},[ranges,value]);const hasInvalidRange=validateRange&&ranges.some((_ref2,index)=>{let{from:from,to:to,id:id}=_ref2;const[isFromValid,isToValid]=validateRange({from:from,to:to},index);return!isFromValid||!isToValid});Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(()=>{if(setValidity){setValidity(!hasInvalidRange)}},[hasInvalidRange,setValidity]);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFormRow"],{display:"rowCompressed",fullWidth:true},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,ranges.map((_ref3,index)=>{let{from:from,to:to,id:id}=_ref3;const deleteBtnTitle=_osd_i18n__WEBPACK_IMPORTED_MODULE_3__["i18n"].translate("visDefaultEditor.controls.ranges.removeRangeButtonAriaLabel",{defaultMessage:"Remove the range of {from} to {to}",values:{from:isEmpty(from)?FROM_PLACEHOLDER:from,to:isEmpty(to)?TO_PLACEHOLDER:to}});let isFromValid=true;let isToValid=true;if(validateRange){[isFromValid,isToValid]=validateRange({from:from,to:to},index)}const gtePrependLabel=_osd_i18n__WEBPACK_IMPORTED_MODULE_3__["i18n"].translate("visDefaultEditor.controls.ranges.greaterThanOrEqualPrepend",{defaultMessage:"≥"});const gteTooltipContent=_osd_i18n__WEBPACK_IMPORTED_MODULE_3__["i18n"].translate("visDefaultEditor.controls.ranges.greaterThanOrEqualTooltip",{defaultMessage:"Greater than or equal to"});const ltPrependLabel=_osd_i18n__WEBPACK_IMPORTED_MODULE_3__["i18n"].translate("visDefaultEditor.controls.ranges.lessThanPrepend",{defaultMessage:"<"});const ltTooltipContent=_osd_i18n__WEBPACK_IMPORTED_MODULE_3__["i18n"].translate("visDefaultEditor.controls.ranges.lessThanTooltip",{defaultMessage:"Less than"});return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__["Fragment"],{key:id},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexGroup"],{gutterSize:"s",alignItems:"center",responsive:false},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexItem"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFieldNumber"],{"aria-label":_osd_i18n__WEBPACK_IMPORTED_MODULE_3__["i18n"].translate("visDefaultEditor.controls.ranges.fromLabel",{defaultMessage:"From"}),"data-test-subj":`${dataTestSubj}${index}__from`,value:isEmpty(from)?"":from,placeholder:hidePlaceholders?undefined:FROM_PLACEHOLDER,onChange:ev=>onChangeRange(id,"from",ev.target.value),fullWidth:true,compressed:true,isInvalid:!isFromValid,prepend:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiToolTip"],{content:gteTooltipContent},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiText"],{size:"s"},gtePrependLabel))})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexItem"],{grow:false},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiIcon"],{type:"sortRight",color:"subdued"})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexItem"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFieldNumber"],{"aria-label":_osd_i18n__WEBPACK_IMPORTED_MODULE_3__["i18n"].translate("visDefaultEditor.controls.ranges.toLabel",{defaultMessage:"To"}),"data-test-subj":`${dataTestSubj}${index}__to`,value:isEmpty(to)?"":to,placeholder:hidePlaceholders?undefined:TO_PLACEHOLDER,onChange:ev=>onChangeRange(id,"to",ev.target.value),fullWidth:true,compressed:true,isInvalid:!isToValid,prepend:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiToolTip"],{content:ltTooltipContent},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiText"],{size:"s"},ltPrependLabel))})),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexItem"],{grow:false},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSmallButtonIcon"],{title:deleteBtnTitle,"aria-label":deleteBtnTitle,disabled:value.length===1,color:"danger",iconType:"trash",onClick:()=>onRemoveRange(id)}))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],{size:"xs"}))}),hasInvalidRange&&error&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFormErrorText"],null,error),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiSpacer"],{size:"s"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiFlexItem"],null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_elastic_eui__WEBPACK_IMPORTED_MODULE_1__["EuiButtonEmpty"],{"data-test-subj":`${dataTestSubj}__addRangeButton`,iconType:"plusInCircleFilled",onClick:onAddRange,size:"xs"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_osd_i18n_react__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"],{id:"visDefaultEditor.controls.ranges.addRangeButtonLabel",defaultMessage:"Add range"})))))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return groupAndSortBy}));function groupAndSortBy(objects,groupBy,labelName){const groupedOptions=objects.reduce((array,obj)=>{const group=array.find(element=>element.label===obj[groupBy]);const option={label:obj[labelName],target:obj};if(group&&group.options){group.options.push(option)}else{array.push({label:obj[groupBy],options:[option]})}return array},[]);groupedOptions.sort(sortByLabel);groupedOptions.forEach(group=>{if(Array.isArray(group.options)){group.options.sort(sortByLabel)}});if(groupedOptions.length===1&&!groupedOptions[0].label){return groupedOptions[0].options||[]}return groupedOptions}function sortByLabel(a,b){return(a.label||"").toLowerCase().localeCompare((b.label||"").toLowerCase())}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);function useFirstMountState(){var isFirst=react_1.useRef(true);if(isFirst.current){isFirst.current=false;return true}return isFirst.current}exports.useFirstMountState=useFirstMountState},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function resolveHookState(newState,currentState){if(typeof newState==="function"){return newState(currentState)}return newState}exports.resolveHookState=resolveHookState},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getAggParamsToRender}));__webpack_require__.d(__webpack_exports__,"c",(function(){return getAggTypeOptions}));__webpack_require__.d(__webpack_exports__,"d",(function(){return isInvalidParamsTouched}));__webpack_require__.d(__webpack_exports__,"a",(function(){return buildAggDescription}));var external_osdSharedDeps_Lodash_=__webpack_require__(3);var public_=__webpack_require__(5);const{propFilter:propFilter}=public_["search"].aggs;const filterByName=propFilter("name");const agg_type_filters_filters=[(aggType,indexPattern,aggConfig,aggFilter)=>{const doesSchemaAllowAggType=filterByName([aggType],aggFilter).length!==0;return doesSchemaAllowAggType},(aggType,indexPattern,aggConfig,aggFilter)=>{const aggRestrictions=indexPattern.getAggregationRestrictions();if(!aggRestrictions){return true}const aggName=aggType.name;return aggName==="count"||!!aggRestrictions&&Object.keys(aggRestrictions).includes(aggName)||false}];function filterAggTypes(aggTypes,indexPattern,aggConfig,aggFilter){const allowedAggTypes=aggTypes.filter(aggType=>{const isAggTypeAllowed=agg_type_filters_filters.every(filter=>filter(aggType,indexPattern,aggConfig,aggFilter));return isAggTypeAllowed});return allowedAggTypes}const agg_type_field_filters_filters=[(field,aggConfig)=>{const indexPattern=aggConfig.getIndexPattern();const aggRestrictions=indexPattern.getAggregationRestrictions();if(!aggRestrictions){return true}const aggName=aggConfig.type&&aggConfig.type.name;const aggFields=aggRestrictions[aggName];return!!aggFields&&!!aggFields[field.name]}];function filterAggTypeFields(fields,aggConfig){const allowedAggTypeFields=fields.filter(field=>{const isAggTypeFieldAllowed=agg_type_field_filters_filters.every(filter=>filter(field,aggConfig));return isAggTypeFieldAllowed});return allowedAggTypeFields}var utils=__webpack_require__(21);var external_osdSharedDeps_React_=__webpack_require__(0);var external_osdSharedDeps_React_default=__webpack_require__.n(external_osdSharedDeps_React_);var external_osdSharedDeps_ElasticEui_=__webpack_require__(1);var external_osdSharedDeps_OsdI18n_=__webpack_require__(2);function AutoPrecisionParamEditor(_ref){let{value:value=false,setValue:setValue}=_ref;const label=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.changePrecisionLabel",{defaultMessage:"Change precision on map zoom"});return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSwitch"],{compressed:true,label:label,checked:value,onChange:ev=>setValue(ev.target.checked)}))}var target=__webpack_require__(44);var target_default=__webpack_require__.n(target);var external_osdSharedDeps_OsdI18nReact_=__webpack_require__(6);var lib=__webpack_require__(10);var opensearchDashboardsReact_public_=__webpack_require__(9);const FROM_PLACEHOLDER="−∞";const TO_PLACEHOLDER="+∞";const generateId=Object(external_osdSharedDeps_ElasticEui_["htmlIdGenerator"])();const validateDateMath=function(){let value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";if(!value){return true}const moment=target_default.a.parse(value);return moment&&moment.isValid()};function DateRangesParamEditor(_ref){let{value:value=[],setValue:setValue,setValidity:setValidity}=_ref;const{services:services}=Object(opensearchDashboardsReact_public_["useOpenSearchDashboards"])();const[ranges,setRanges]=Object(external_osdSharedDeps_React_["useState"])(()=>value.map(range=>({...range,id:generateId()})));const hasInvalidRange=value.some(_ref2=>{let{from:from,to:to}=_ref2;return!from&&!to||!validateDateMath(from)||!validateDateMath(to)});const updateRanges=Object(external_osdSharedDeps_React_["useCallback"])(rangeValues=>{setValue(rangeValues.map(range=>Object(external_osdSharedDeps_Lodash_["omit"])(range,"id")));setRanges(rangeValues)},[setValue]);const onAddRange=Object(external_osdSharedDeps_React_["useCallback"])(()=>updateRanges([...ranges,{id:generateId()}]),[ranges,updateRanges]);Object(lib["useMount"])(()=>{if(!value.length){onAddRange()}});Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(value.length!==ranges.length||value.some((range,index)=>!Object(external_osdSharedDeps_Lodash_["isEqual"])(range,Object(external_osdSharedDeps_Lodash_["omit"])(ranges[index],"id")))){setRanges(value.map(range=>({...range,id:generateId()})))}},[ranges,value]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{setValidity(!hasInvalidRange)},[hasInvalidRange,setValidity]);const onRemoveRange=id=>updateRanges(ranges.filter(range=>range.id!==id));const onChangeRange=(id,key,newValue)=>updateRanges(ranges.map(range=>range.id===id?{...range,[key]:newValue===""?undefined:newValue}:range));return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{display:"rowCompressed",fullWidth:true},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLink"],{href:services.docLinks.links.opensearch.dateMath,target:"_blank"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.dateRanges.acceptedDateFormatsLinkText",defaultMessage:"Acceptable date formats"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),ranges.map((_ref3,index)=>{let{from:from,to:to,id:id}=_ref3;const deleteBtnTitle=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.dateRanges.removeRangeButtonAriaLabel",{defaultMessage:"Remove the range of {from} to {to}",values:{from:from||FROM_PLACEHOLDER,to:to||TO_PLACEHOLDER}});const areBothEmpty=!from&&!to;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],{key:id},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,gutterSize:"s",alignItems:"center"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{"aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.dateRanges.fromColumnLabel",{defaultMessage:"From",description:"Beginning of a date range, e.g. *From* 2018-02-26 To 2018-02-28"}),compressed:true,fullWidth:true,isInvalid:areBothEmpty||!validateDateMath(from),placeholder:FROM_PLACEHOLDER,value:from||"",onChange:ev=>onChangeRange(id,"from",ev.target.value),"data-test-subj":`visEditorDateRange${index}__from`})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIcon"],{type:"sortRight",color:"subdued"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{"aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.dateRanges.toColumnLabel",{defaultMessage:"To",description:"End of a date range, e.g. From 2018-02-26 *To* 2018-02-28"}),"data-test-subj":`visEditorDateRange${index}__to`,compressed:true,fullWidth:true,isInvalid:areBothEmpty||!validateDateMath(to),placeholder:TO_PLACEHOLDER,value:to||"",onChange:ev=>onChangeRange(id,"to",ev.target.value)})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSmallButtonIcon"],{title:deleteBtnTitle,"aria-label":deleteBtnTitle,disabled:value.length===1,color:"danger",iconType:"trash",onClick:()=>onRemoveRange(id)}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}))}),hasInvalidRange&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormErrorText"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.dateRanges.errorMessage",defaultMessage:"Each range should have at least one valid date."})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"plus",onClick:onAddRange,size:"xs","data-test-subj":"visEditorAddDateRange"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.dateRanges.addRangeButtonLabel",defaultMessage:"Add range"})))))}function SwitchParamEditor(_ref){let{value:value=false,setValue:setValue,dataTestSubj:dataTestSubj,displayToolTip:displayToolTip,displayLabel:displayLabel,disabled:disabled}=_ref;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCompressedFormRow"],{fullWidth:true},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiToolTip"],{content:displayToolTip,delay:"long",position:"right"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSwitch"],{compressed:true,label:displayLabel,checked:value,disabled:disabled,"data-test-subj":dataTestSubj,onChange:ev=>setValue(ev.target.checked)})))}function _extends(){_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function DropPartialsParamEditor(props){return external_osdSharedDeps_React_default.a.createElement(SwitchParamEditor,_extends({dataTestSubj:"dropPartialBucketsCheckbox",displayLabel:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.dropPartialBucketsLabel",{defaultMessage:"Drop partial buckets"}),displayToolTip:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.dropPartialBucketsTooltip",{defaultMessage:"Remove buckets that span time outside the time range so the histogram doesn't start and end with incomplete buckets."})},props))}var controls_utils=__webpack_require__(7);function areBoundsValid(_ref){let{min:min,max:max}=_ref;if(min===""||max===""){return false}return max>=min}function ExtendedBoundsParamEditor(_ref2){let{value:value={},setValue:setValue,setValidity:setValidity,showValidation:showValidation,setTouched:setTouched}=_ref2;const minLabel=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.extendedBounds.minLabel",{defaultMessage:"Min"});const maxLabel=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.extendedBounds.maxLabel",{defaultMessage:"Max"});const isValid=areBoundsValid(value);let error;if(!isValid){error=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.extendedBounds.errorMessage",{defaultMessage:"Min should be less than or equal to Max."})}Object(controls_utils["g"])(setValidity,isValid);const handleChange=(ev,name)=>{setValue({...value,[name]:ev.target.value===""?"":parseFloat(ev.target.value)})};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCompressedFormRow"],{fullWidth:true,isInvalid:showValidation?!isValid:false,error:error},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",responsive:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldNumber"],{value:Object(external_osdSharedDeps_Lodash_["isUndefined"])(value.min)?"":value.min,onChange:ev=>handleChange(ev,"min"),onBlur:setTouched,fullWidth:true,isInvalid:showValidation?!isValid:false,"aria-label":minLabel,prepend:minLabel,compressed:true})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldNumber"],{value:Object(external_osdSharedDeps_Lodash_["isUndefined"])(value.max)?"":value.max,onChange:ev=>handleChange(ev,"max"),onBlur:setTouched,fullWidth:true,isInvalid:showValidation?!isValid:false,"aria-label":maxLabel,prepend:maxLabel,compressed:true}))))}const field_label=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.field.fieldLabel",{defaultMessage:"Field"});function FieldParamEditor(_ref){let{agg:agg,aggParam:aggParam,customError:customError,customLabel:customLabel,indexedFields:indexedFields=[],showValidation:showValidation,value:value,setTouched:setTouched,setValidity:setValidity,setValue:setValue}=_ref;const[isDirty,setIsDirty]=Object(external_osdSharedDeps_React_["useState"])(false);const selectedOptions=value?[{label:value.displayName||value.name,target:value}]:[];const onChange=options=>{const selectedOption=Object(external_osdSharedDeps_Lodash_["get"])(options,"0.target");if(!(aggParam.required&&!selectedOption)){setValue(selectedOption)}if(aggParam.onChange){aggParam.onChange(agg)}};const errors=customError?[customError]:[];if(!indexedFields.length){errors.push(external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.field.noCompatibleFieldsDescription",{defaultMessage:"The index pattern {indexPatternTitle} does not contain any of the following compatible field types: {fieldTypes}",values:{indexPatternTitle:agg.getIndexPattern&&agg.getIndexPattern().title,fieldTypes:getFieldTypesString(agg)}}))}const isValid=!!value&&!errors.length&&!isDirty;const showErrorMessage=(showValidation||!indexedFields.length)&&!isValid;Object(controls_utils["g"])(setValidity,isValid);Object(lib["useMount"])(()=>{if(indexedFields.length!==1){return}const indexedField=indexedFields[0];if(!("options"in indexedField)){setValue(indexedField.target)}else if(indexedField.options.length===1){setValue(indexedField.options[0].target)}});const onSearchChange=Object(external_osdSharedDeps_React_["useCallback"])(searchValue=>setIsDirty(Boolean(searchValue)),[]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:customLabel||field_label,isInvalid:showErrorMessage,fullWidth:true,error:errors,display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiComboBox"],{compressed:true,placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.field.selectFieldPlaceholder",{defaultMessage:"Select a field"}),options:indexedFields,isDisabled:!indexedFields.length,selectedOptions:selectedOptions,singleSelection:{asPlainText:true},isClearable:false,isInvalid:showErrorMessage,onChange:onChange,onBlur:setTouched,onSearchChange:onSearchChange,sortMatchesBy:"startsWith","data-test-subj":"visDefaultEditorField",fullWidth:true}))}function getFieldTypesString(agg){const param=Object(external_osdSharedDeps_Lodash_["get"])(agg,"type.params",[]).find(p=>p.name==="field")||{};return Object(controls_utils["a"])(Object(controls_utils["c"])(param.filterFieldTypes),{inclusive:false})}function FilterRow(_ref){let{id:id,arrayIndex:arrayIndex,customLabel:customLabel,value:value,autoFocus:autoFocus,disableRemove:disableRemove,dataTestSubj:dataTestSubj,agg:agg,onChangeValue:onChangeValue,onRemoveFilter:onRemoveFilter}=_ref;const{services:services}=Object(opensearchDashboardsReact_public_["useOpenSearchDashboards"])();const[showCustomLabel,setShowCustomLabel]=Object(external_osdSharedDeps_React_["useState"])(false);const filterLabel=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.filters.filterLabel",{defaultMessage:"Filter {index}",values:{index:arrayIndex+1}});const onBlur=()=>{if(value.query.length>0){services.data.query.addToQueryLog(services.appName,value)}};const FilterControl=external_osdSharedDeps_React_default.a.createElement("div",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSmallButtonIcon"],{iconType:"tag","aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.filters.toggleFilterButtonAriaLabel",{defaultMessage:"Toggle filter label"}),"aria-expanded":showCustomLabel,"aria-controls":`visEditorFilterLabel${arrayIndex}`,onClick:()=>setShowCustomLabel(!showCustomLabel)}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSmallButtonIcon"],{iconType:"trash",color:"danger",disabled:disableRemove,"aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.filters.removeFilterButtonAriaLabel",{defaultMessage:"Remove this filter"}),onClick:()=>onRemoveFilter(id)}));return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiForm"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCompressedFormRow"],{label:`${filterLabel}${customLabel?` - ${customLabel}`:""}`,labelAppend:FilterControl,fullWidth:true},external_osdSharedDeps_React_default.a.createElement(public_["QueryStringInput"],{query:value,indexPatterns:[agg.getIndexPattern()],onChange:query=>onChangeValue(id,query,customLabel),onBlur:onBlur,disableAutoFocus:!autoFocus,dataTestSubj:dataTestSubj,bubbleSubmitEvent:true,languageSwitcherPopoverAnchorPosition:"leftDown",size:"s"})),showCustomLabel?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{id:`visEditorFilterLabel${arrayIndex}`,label:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.filters.definiteFilterLabel",{defaultMessage:"Filter {index} label",description:"'Filter {index}' represents the name of the filter as a noun, similar to 'label for filter 1'.",values:{index:arrayIndex+1}}),fullWidth:true,display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{value:customLabel,placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.filters.labelPlaceholder",{defaultMessage:"Label"}),onChange:ev=>onChangeValue(id,value,ev.target.value),fullWidth:true,compressed:true})):null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}const filters_generateId=Object(external_osdSharedDeps_ElasticEui_["htmlIdGenerator"])();function FiltersParamEditor(_ref){let{agg:agg,value:value=[],setValue:setValue}=_ref;const[filters,setFilters]=Object(external_osdSharedDeps_React_["useState"])(()=>value.map(filter=>({...filter,id:filters_generateId()})));Object(lib["useMount"])(()=>{setValue(filters.map(filter=>Object(external_osdSharedDeps_Lodash_["omit"])({...filter,input:filter.input},"id")))});Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(value.length!==filters.length||value.some((filter,index)=>!Object(external_osdSharedDeps_Lodash_["isEqual"])(filter,Object(external_osdSharedDeps_Lodash_["omit"])(filters[index],"id")))){setFilters(value.map(filter=>({...filter,id:filters_generateId()})))}},[filters,value]);const updateFilters=updatedFilters=>{setValue(updatedFilters.map(filter=>Object(external_osdSharedDeps_Lodash_["omit"])(filter,"id")));setFilters(updatedFilters)};const{services:services}=Object(opensearchDashboardsReact_public_["useOpenSearchDashboards"])();const onAddFilter=()=>updateFilters([...filters,{input:services.data.query.queryString.getDefaultQuery(),label:"",id:filters_generateId()}]);const onRemoveFilter=id=>updateFilters(filters.filter(filter=>filter.id!==id));const onChangeValue=(id,query,label)=>updateFilters(filters.map(filter=>filter.id===id?{...filter,input:query,label:label}:filter));return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),filters.map((_ref2,arrayIndex)=>{let{input:input,label:label,id:id}=_ref2;return external_osdSharedDeps_React_default.a.createElement(FilterRow,{key:id,id:id,arrayIndex:arrayIndex,customLabel:label,value:input,autoFocus:arrayIndex===filters.length-1,disableRemove:arrayIndex===0&&filters.length===1,dataTestSubj:`visEditorFilterInput_${agg.id}_${arrayIndex}`,agg:agg,onChangeValue:onChangeValue,onRemoveFilter:onRemoveFilter})}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{iconType:"plusInCircle",fill:true,fullWidth:true,onClick:onAddFilter,size:"s","data-test-subj":"visEditorAddFilterButton"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.filters.addFilterButtonLabel",defaultMessage:"Add filter"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}function has_extended_bounds_extends(){has_extended_bounds_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return has_extended_bounds_extends.apply(this,arguments)}const{isType:isType}=public_["search"].aggs;function HasExtendedBoundsParamEditor(props){const{agg:agg,setValue:setValue,value:value}=props;const minDocCount=Object(external_osdSharedDeps_React_["useRef"])(agg.params.min_doc_count);Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(minDocCount.current!==agg.params.min_doc_count){minDocCount.current=agg.params.min_doc_count;setValue(value&&agg.params.min_doc_count)}},[agg.params.min_doc_count,setValue,value]);return external_osdSharedDeps_React_default.a.createElement(SwitchParamEditor,has_extended_bounds_extends({},props,{displayLabel:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.extendedBoundsLabel",{defaultMessage:"Extend bounds"}),displayToolTip:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.extendedBoundsTooltip",{defaultMessage:"Min and Max do not filter the results, but rather extend the bounds of the result set."}),disabled:!props.agg.params.min_doc_count||!(isType("number")(props.agg)||isType("date")(props.agg))}))}function StringParamEditor(_ref){let{agg:agg,aggParam:aggParam,showValidation:showValidation,value:value,setValidity:setValidity,setValue:setValue,setTouched:setTouched}=_ref;const isValid=aggParam.required?!!value:true;Object(external_osdSharedDeps_React_["useEffect"])(()=>{setValidity(isValid)},[isValid,setValidity]);const onChange=Object(external_osdSharedDeps_React_["useCallback"])(ev=>setValue(ev.target.value),[setValue]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{className:"visEditorAggParam__string",label:aggParam.displayName||aggParam.name,fullWidth:true,display:"rowCompressed",isInvalid:showValidation?!isValid:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{value:value||"","data-test-subj":`visEditorStringInput${agg.id}${aggParam.name}`,onChange:onChange,fullWidth:true,compressed:true,onBlur:setTouched,isInvalid:showValidation?!isValid:false}))}const _RE_NUMBER="(\\-?(?:\\d+(?:\\.\\d+)?|Infinity))";const RANGE_RE=new RegExp("^\\s*([\\[|\\(])\\s*"+_RE_NUMBER+"\\s*,\\s*"+_RE_NUMBER+"\\s*([\\]|\\)])\\s*$");class NumberListRange{constructor(minInclusive,min,max,maxInclusive){this.minInclusive=minInclusive;this.min=min;this.max=max;this.maxInclusive=maxInclusive}within(n){if(this.min===n&&!this.minInclusive||this.min>n)return false;if(this.max===n&&!this.maxInclusive||this.max<n)return false;return true}}function parseRange(input){const match=String(input).match(RANGE_RE);if(!match){throw new TypeError("expected input to be in interval notation e.g., (100, 200]")}const args=[match[1]==="[",parseFloat(match[2]),parseFloat(match[3]),match[4]==="]"];if(args[1]>args[2]){args.reverse()}const[minInclusive,min,max,maxInclusive]=args;return new NumberListRange(minInclusive,min,max,maxInclusive)}const EMPTY_STRING="";const defaultRange=parseRange("[0,Infinity)");const utils_generateId=Object(external_osdSharedDeps_ElasticEui_["htmlIdGenerator"])();const defaultModel={value:0,id:utils_generateId(),isInvalid:false};function parse(value){const parsedValue=parseFloat(value);return isNaN(parsedValue)?EMPTY_STRING:parsedValue}function getRange(range){try{return range?parseRange(range):defaultRange}catch(e){throw new TypeError("Unable to parse range: "+e.message)}}function validateValue(value,numberRange){const result={isInvalid:false};if(value===EMPTY_STRING){result.isInvalid=true;result.error=EMPTY_STRING}else if(!numberRange.within(value)){result.isInvalid=true;result.error=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.numberList.invalidRangeErrorMessage",{defaultMessage:"The value should be in the range of {min} to {max}.",values:{min:numberRange.min,max:numberRange.max}})}return result}function validateValueAscending(inputValue,index,list){const result={isInvalidOrder:false};const previousModel=list[index-1];if(previousModel!==undefined&&inputValue!==undefined&&inputValue<=previousModel){result.isInvalidOrder=true;result.error=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.numberList.invalidAscOrderErrorMessage",{defaultMessage:"Value is not in ascending order."})}return result}function validateValueUnique(inputValue,index,list){const result={isDuplicate:false};if(inputValue!==EMPTY_STRING&&list.indexOf(inputValue)!==index){result.isDuplicate=true;result.error=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.numberList.duplicateValueErrorMessage",{defaultMessage:"Duplicate value."})}return result}function getNextModel(list,range){const lastValue=Object(external_osdSharedDeps_Lodash_["last"])(list).value;let next=Number(lastValue)?Number(lastValue)+1:1;if(next>=range.max){next=range.max-1}return{id:utils_generateId(),value:next,isInvalid:false}}function getInitModelList(list){return list.length?list.map(num=>({value:num===undefined?EMPTY_STRING:num,id:utils_generateId(),isInvalid:false})):[defaultModel]}function getValidatedModels(numberList,modelList,numberRange){let validateAscendingOrder=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let disallowDuplicates=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;if(!numberList.length){return[defaultModel]}return numberList.map((number,index)=>{const model=modelList[index]||{id:utils_generateId()};const newValue=number===undefined?EMPTY_STRING:number;const valueResult=numberRange?validateValue(newValue,numberRange):{isInvalid:false};const ascendingResult=validateAscendingOrder?validateValueAscending(newValue,index,numberList):{isInvalidOrder:false};const duplicationResult=disallowDuplicates?validateValueUnique(newValue,index,numberList):{isDuplicate:false};const allErrors=[valueResult.error,ascendingResult.error,duplicationResult.error].filter(Boolean).join(" ");return{...model,value:newValue,isInvalid:valueResult.isInvalid||ascendingResult.isInvalidOrder||duplicationResult.isDuplicate,error:allErrors===EMPTY_STRING?undefined:allErrors}})}function utils_hasInvalidValues(modelList){return!!modelList.find(_ref=>{let{isInvalid:isInvalid}=_ref;return isInvalid})}function NumberRow(_ref){let{autoFocus:autoFocus,disableDelete:disableDelete,model:model,isInvalid:isInvalid,labelledbyId:labelledbyId,range:range,onBlur:onBlur,onDelete:onDelete,onChange:onChange}=_ref;const deleteBtnAriaLabel=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.numberList.removeUnitButtonAriaLabel",{defaultMessage:"Remove the rank value of {value}",values:{value:model.value}});const onValueChanged=Object(external_osdSharedDeps_React_["useCallback"])(event=>onChange({value:event.target.value,id:model.id}),[onChange,model.id]);const onDeleteFn=Object(external_osdSharedDeps_React_["useCallback"])(()=>onDelete(model.id),[onDelete,model.id]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,alignItems:"center",gutterSize:"s"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldNumber"],{"aria-labelledby":labelledbyId,autoFocus:autoFocus,compressed:true,isInvalid:isInvalid,placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.numberList.enterValuePlaceholder",{defaultMessage:"Enter a value"}),onChange:onValueChanged,value:model.value,fullWidth:true,min:range.min,max:range.max,onBlur:onBlur})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSmallButtonIcon"],{"aria-label":deleteBtnAriaLabel,title:deleteBtnAriaLabel,color:"danger",iconType:"trash",onClick:onDeleteFn,disabled:disableDelete})))}const simple_number_list_generateId=Object(external_osdSharedDeps_ElasticEui_["htmlIdGenerator"])();function SimpleNumberList(_ref){let{agg:agg,aggParam:aggParam,value:value,setValue:setValue,setTouched:setTouched}=_ref;const[numbers,setNumbers]=Object(external_osdSharedDeps_React_["useState"])(getInitModelList(value&&Object(external_osdSharedDeps_Lodash_["isArray"])(value)?value:[EMPTY_STRING]));const numberRange=Object(external_osdSharedDeps_React_["useMemo"])(()=>getRange("[-Infinity,Infinity]"),[]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(Object(external_osdSharedDeps_Lodash_["isArray"])(value)&&(value.length!==numbers.length||!value.every((numberValue,index)=>numberValue===numbers[index].value))){setNumbers(value.map(numberValue=>({id:simple_number_list_generateId(),value:numberValue,isInvalid:false})))}},[numbers,value]);const onUpdate=Object(external_osdSharedDeps_React_["useCallback"])(numberList=>{setNumbers(numberList);setValue(numberList.map(_ref2=>{let{value:numberValue}=_ref2;return numberValue}))},[setValue]);const onChangeValue=Object(external_osdSharedDeps_React_["useCallback"])(numberField=>{onUpdate(numbers.map(number=>number.id===numberField.id?{id:numberField.id,value:parse(numberField.value),isInvalid:false}:number))},[numbers,onUpdate]);const onAdd=Object(external_osdSharedDeps_React_["useCallback"])(()=>{const newArray=[...numbers,{id:simple_number_list_generateId(),value:EMPTY_STRING,isInvalid:false}];onUpdate(newArray)},[numbers,onUpdate]);const onDelete=Object(external_osdSharedDeps_React_["useCallback"])(id=>onUpdate(numbers.filter(number=>number.id!==id)),[numbers,onUpdate]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{id:`${aggParam.name}-${agg.id}}`,label:aggParam.displayName||aggParam.name,fullWidth:true,display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,numbers.map((number,arrayIndex)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],{key:number.id},external_osdSharedDeps_React_default.a.createElement(NumberRow,{isInvalid:number.isInvalid,disableDelete:numbers.length===1,model:number,labelledbyId:`${aggParam.name}-${agg.id}-legend`,range:numberRange,onDelete:onDelete,onChange:onChangeValue,onBlur:setTouched,autoFocus:numbers.length!==1&&arrayIndex===numbers.length-1}),numbers.length-1!==arrayIndex&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"plusInCircleFilled",onClick:onAdd,size:"xs"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.includeExclude.addUnitButtonLabel",defaultMessage:"Add value"})))))}function include_exclude_extends(){include_exclude_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return include_exclude_extends.apply(this,arguments)}const{isNumberType:isNumberType}=public_["search"].aggs;function IncludeExcludeParamEditor(props){const{agg:agg,value:value,setValue:setValue}=props;const isAggOfNumberType=isNumberType(agg);Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(isAggOfNumberType&&!Array.isArray(value)&&value!==undefined){const numberArray=value.split("|").map(item=>parseFloat(item)).filter(number=>Number.isFinite(number));setValue(numberArray.length?numberArray:[""])}else if(!isAggOfNumberType&&Array.isArray(value)&&value!==undefined){setValue(value.filter(item=>item!=="").join("|"))}},[isAggOfNumberType,setValue,value]);return isAggOfNumberType?external_osdSharedDeps_React_default.a.createElement(SimpleNumberList,include_exclude_extends({},props,{value:value})):external_osdSharedDeps_React_default.a.createElement(StringParamEditor,include_exclude_extends({},props,{value:value}))}const input_list_generateId=Object(external_osdSharedDeps_ElasticEui_["htmlIdGenerator"])();const input_list_validateValue=(inputValue,InputObject)=>{const result={model:inputValue||"",isInvalid:false};if(!inputValue){result.isInvalid=false;return result}try{result.model=new InputObject(inputValue).toString();result.isInvalid=false;return result}catch(e){result.isInvalid=true;return result}};function InputList(_ref){let{config:config,list:list,onChange:onChange,setValidity:setValidity}=_ref;const{defaultValue:defaultValue,getModelValue:getModelValue,modelNames:modelNames,onChangeFn:onChangeFn,validateClass:validateClass}=config;const[models,setModels]=Object(external_osdSharedDeps_React_["useState"])(()=>list.map(item=>({id:input_list_generateId(),...getModelValue(item)})));const hasInvalidValues=models.some(config.hasInvalidValuesFn);const updateValues=Object(external_osdSharedDeps_React_["useCallback"])(modelList=>{setModels(modelList);onChange(modelList.map(onChangeFn))},[onChangeFn,onChange]);const onChangeValue=Object(external_osdSharedDeps_React_["useCallback"])((index,value,modelName)=>{const{model:model,isInvalid:isInvalid}=input_list_validateValue(value,validateClass);updateValues(models.map((range,arrayIndex)=>arrayIndex===index?{...range,[modelName]:{value:value,model:model,isInvalid:isInvalid}}:range))},[models,updateValues,validateClass]);const onDelete=Object(external_osdSharedDeps_React_["useCallback"])(id=>updateValues(models.filter(model=>model.id!==id)),[models,updateValues]);const onAdd=Object(external_osdSharedDeps_React_["useCallback"])(()=>updateValues([...models,{id:input_list_generateId(),...getModelValue()}]),[getModelValue,models,updateValues]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(!list.length){updateValues([{id:input_list_generateId(),...defaultValue}])}},[defaultValue,list.length,updateValues]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{setValidity(!hasInvalidValues)},[hasInvalidValues,setValidity]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(list.length!==models.length||list.some((item,index)=>{const model=Object(external_osdSharedDeps_Lodash_["mapValues"])(Object(external_osdSharedDeps_Lodash_["pick"])(models[index],modelNames),"model");return!Object(external_osdSharedDeps_Lodash_["isEqual"])(item,Object(external_osdSharedDeps_Lodash_["omitBy"])(model,external_osdSharedDeps_Lodash_["isEmpty"]))})){setModels(list.map(item=>({id:input_list_generateId(),...getModelValue(item)})))}},[getModelValue,list,modelNames,models]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,models.map((item,index)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],{key:item.id},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"xs",alignItems:"center",responsive:false},config.renderInputRow(item,index,onChangeValue),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSmallButtonIcon"],{"aria-label":config.getRemoveBtnAriaLabel(item),title:config.getRemoveBtnAriaLabel(item),disabled:models.length===1,color:"danger",iconType:"trash",onClick:()=>onDelete(item.id)}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"plusInCircleFilled",onClick:onAdd,size:"xs"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.ipRanges.addRangeButtonLabel",defaultMessage:"Add range"}))))}function from_to_list_extends(){from_to_list_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return from_to_list_extends.apply(this,arguments)}const from_to_list_EMPTY_STRING="";const defaultConfig={defaultValue:{from:{value:"0.0.0.0",model:"0.0.0.0",isInvalid:false},to:{value:"255.255.255.255",model:"255.255.255.255",isInvalid:false}},validateClass:public_["search"].aggs.Ipv4Address,getModelValue:function(){let item=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{from:{value:item.from||from_to_list_EMPTY_STRING,model:item.from||from_to_list_EMPTY_STRING,isInvalid:false},to:{value:item.to||from_to_list_EMPTY_STRING,model:item.to||from_to_list_EMPTY_STRING,isInvalid:false}}},getRemoveBtnAriaLabel:item=>external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.removeRangeAriaLabel",{defaultMessage:"Remove the range of {from} to {to}",values:{from:item.from.value||"*",to:item.to.value||"*"}}),onChangeFn:_ref=>{let{from:from,to:to}=_ref;const result={};if(from.model){result.from=from.model}if(to.model){result.to=to.model}return result},hasInvalidValuesFn:_ref2=>{let{from:from,to:to}=_ref2;return from.isInvalid||to.isInvalid},modelNames:["from","to"]};function FromToList(_ref3){let{showValidation:showValidation,onBlur:onBlur,...rest}=_ref3;const renderInputRow=Object(external_osdSharedDeps_React_["useCallback"])((item,index,onChangeValue)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{"aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.ipRangeFromAriaLabel",{defaultMessage:"IP range from: {value}",values:{value:item.from.value||"*"}}),compressed:true,isInvalid:showValidation?item.from.isInvalid:false,placeholder:"*",onChange:ev=>{onChangeValue(index,ev.target.value,"from")},value:item.from.value,onBlur:onBlur})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIcon"],{type:"sortRight",color:"subdued"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{"aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.ipRangeToAriaLabel",{defaultMessage:"IP range to: {value}",values:{value:item.to.value||"*"}}),compressed:true,isInvalid:showValidation?item.to.isInvalid:false,placeholder:"*",onChange:ev=>{onChangeValue(index,ev.target.value,"to")},value:item.to.value,onBlur:onBlur}))),[onBlur,showValidation]);const fromToListConfig={...defaultConfig,renderInputRow:renderInputRow};return external_osdSharedDeps_React_default.a.createElement(InputList,from_to_list_extends({config:fromToListConfig},rest))}function mask_list_extends(){mask_list_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return mask_list_extends.apply(this,arguments)}const mask_list_EMPTY_STRING="";const mask_list_defaultConfig={defaultValue:{mask:{model:"0.0.0.0/1",value:"0.0.0.0/1",isInvalid:false}},validateClass:public_["search"].aggs.CidrMask,getModelValue:function(){let item=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{mask:{model:item.mask||mask_list_EMPTY_STRING,value:item.mask||mask_list_EMPTY_STRING,isInvalid:false}}},getRemoveBtnAriaLabel:item=>item.mask.value?external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.removeCidrMaskButtonAriaLabel",{defaultMessage:"Remove the CIDR mask value of {mask}",values:{mask:item.mask.value}}):external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.removeEmptyCidrMaskButtonAriaLabel",{defaultMessage:"Remove the CIDR mask default value"}),onChangeFn:_ref=>{let{mask:mask}=_ref;if(mask.model){return{mask:mask.model}}return{}},hasInvalidValuesFn:_ref2=>{let{mask:mask}=_ref2;return mask.isInvalid},modelNames:"mask"};function MaskList(_ref3){let{showValidation:showValidation,onBlur:onBlur,...rest}=_ref3;const renderInputRow=Object(external_osdSharedDeps_React_["useCallback"])((_ref4,index,onChangeValue)=>{let{mask:mask}=_ref4;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{"aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.cidrMaskAriaLabel",{defaultMessage:"CIDR mask: {mask}",values:{mask:mask.value||"*"}}),compressed:true,fullWidth:true,isInvalid:showValidation?mask.isInvalid:false,placeholder:"*",onChange:ev=>{onChangeValue(index,ev.target.value,"mask")},value:mask.value,onBlur:onBlur}))},[onBlur,showValidation]);const maskListConfig={...mask_list_defaultConfig,renderInputRow:renderInputRow};return external_osdSharedDeps_React_default.a.createElement(InputList,mask_list_extends({config:maskListConfig},rest))}var IpRangeTypes=function(IpRangeTypes){IpRangeTypes["MASK"]="mask";IpRangeTypes["FROM_TO"]="fromTo";return IpRangeTypes}(IpRangeTypes||{});function IpRangeTypeParamEditor(_ref){let{agg:agg,value:value,setValue:setValue}=_ref;const options=[{id:`visEditorIpRangeFromToLabel${agg.id}`,label:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.fromToButtonLabel",{defaultMessage:"From/to"})},{id:`visEditorIpRangeCidrLabel${agg.id}`,label:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.ipRanges.cidrMasksButtonLabel",{defaultMessage:"CIDR masks"})}];const onClick=optionId=>{setValue(optionId===options[0].id?IpRangeTypes.FROM_TO:IpRangeTypes.MASK)};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonGroup"],{isFullWidth:true,onChange:onClick,idSelected:value===IpRangeTypes.FROM_TO?options[0].id:options[1].id,options:options,legend:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.ipRangesAriaLabel",{defaultMessage:"IP ranges"})}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}function IpRangesParamEditor(_ref){let{agg:agg,value:value={fromTo:[],mask:[]},setTouched:setTouched,setValue:setValue,setValidity:setValidity,showValidation:showValidation}=_ref;const handleMaskListChange=Object(external_osdSharedDeps_React_["useCallback"])(items=>setValue({...value,[IpRangeTypes.MASK]:items}),[setValue,value]);const handleFromToListChange=Object(external_osdSharedDeps_React_["useCallback"])(items=>setValue({...value,[IpRangeTypes.FROM_TO]:items}),[setValue,value]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,id:`visEditorIpRange${agg.id}`,display:"rowCompressed"},agg.params.ipRangeType===IpRangeTypes.MASK?external_osdSharedDeps_React_default.a.createElement(MaskList,{list:value.mask,showValidation:showValidation,onBlur:setTouched,onChange:handleMaskListChange,setValidity:setValidity}):external_osdSharedDeps_React_default.a.createElement(FromToList,{list:value.fromTo,showValidation:showValidation,onBlur:setTouched,onChange:handleFromToListChange,setValidity:setValidity}))}function is_filtered_by_collar_extends(){is_filtered_by_collar_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return is_filtered_by_collar_extends.apply(this,arguments)}function IsFilteredByCollarParamEditor(props){return external_osdSharedDeps_React_default.a.createElement(SwitchParamEditor,is_filtered_by_collar_extends({displayLabel:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.onlyRequestDataAroundMapExtentLabel",{defaultMessage:"Only request data around map extent"}),displayToolTip:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.onlyRequestDataAroundMapExtentTooltip",{defaultMessage:"Apply geo_bounding_box filter aggregation to narrow the subject area to the map view box with collar"}),dataTestSubj:"isFilteredByCollarCheckbox"},props))}const aggFilter=["!top_hits","!percentiles","!percentile_ranks","!median","!std_dev"];const EMPTY_VALUE="EMPTY_VALUE";const DEFAULT_OPTIONS=[{text:"",value:EMPTY_VALUE,hidden:true}];function MetricAggParamEditor(_ref){let{agg:agg,value:value,showValidation:showValidation,setValue:setValue,setValidity:setValidity,setTouched:setTouched,metricAggs:metricAggs=[]}=_ref;const label=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.metricLabel",{defaultMessage:"Metric"});const isValid=!!value;Object(controls_utils["g"])(setValidity,isValid);Object(controls_utils["e"])(setValue,aggFilter,metricAggs,value);const filteredMetrics=Object(external_osdSharedDeps_React_["useMemo"])(()=>metricAggs.filter(respAgg=>respAgg.type.name!==agg.type.name),[metricAggs,agg.type.name]);const options=Object(controls_utils["d"])(aggFilter,filteredMetrics,DEFAULT_OPTIONS);const onChange=Object(external_osdSharedDeps_React_["useCallback"])(ev=>setValue(ev.target.value),[setValue]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:label,fullWidth:true,isInvalid:showValidation&&!isValid,display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSelect"],{compressed:true,fullWidth:true,options:options,value:value||EMPTY_VALUE,onChange:onChange,isInvalid:showValidation&&!isValid,onBlur:setTouched,"data-test-subj":`visEditorSubAggMetric${agg.id}`}))}function min_doc_count_extends(){min_doc_count_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return min_doc_count_extends.apply(this,arguments)}function MinDocCountParamEditor(props){return external_osdSharedDeps_React_default.a.createElement(SwitchParamEditor,min_doc_count_extends({displayLabel:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.showEmptyBucketsLabel",{defaultMessage:"Show empty buckets"}),displayToolTip:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.showEmptyBucketsTooltip",{defaultMessage:"Show all buckets, not only the buckets with results"})},props))}function missing_bucket_extends(){missing_bucket_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return missing_bucket_extends.apply(this,arguments)}function MissingBucketParamEditor(props){const fieldTypeIsNotString=!public_["search"].aggs.isStringType(props.agg);const{setValue:setValue}=props;Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(fieldTypeIsNotString){setValue(false)}},[fieldTypeIsNotString,setValue]);return external_osdSharedDeps_React_default.a.createElement(SwitchParamEditor,missing_bucket_extends({},props,{dataTestSubj:"missingBucketSwitch",displayLabel:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.otherBucket.showMissingValuesLabel",{defaultMessage:"Show missing values"}),displayToolTip:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.otherBucket.showMissingValuesTooltip",{defaultMessage:'Only works for fields of type "string". When enabled, include documents with missing '+"values in the search. If this bucket is in the top N, it appears in the chart. "+'If not in the top N, and you enable "Group other values in separate bucket", '+'OpenSearch adds the missing values to the "other" bucket.'}),disabled:fieldTypeIsNotString}))}const number_interval_label=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.numberInterval.minimumIntervalLabel",defaultMessage:"Minimum interval"})," ",external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{position:"right",content:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.numberInterval.minimumIntervalTooltip",defaultMessage:"Interval will be automatically scaled in the event that the provided value creates more buckets than specified by Advanced Setting's {histogramMaxBars}",values:{histogramMaxBars:public_["UI_SETTINGS"].HISTOGRAM_MAX_BARS}}),type:"questionInCircle"}));const autoInterval="auto";const isAutoInterval=value=>value===autoInterval;const selectIntervalPlaceholder=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.numberInterval.selectIntervalPlaceholder",{defaultMessage:"Enter an interval"});const autoIntervalIsUsedPlaceholder=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.numberInterval.autoInteralIsUsed",{defaultMessage:"Auto interval is used"});const useAutoIntervalLabel=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.useAutoInterval",{defaultMessage:"Use auto interval"});function NumberIntervalParamEditor(_ref){let{agg:agg,editorConfig:editorConfig,showValidation:showValidation,value:value,setTouched:setTouched,setValidity:setValidity,setValue:setValue}=_ref;const isAutoChecked=isAutoInterval(value);const base=Object(external_osdSharedDeps_Lodash_["get"])(editorConfig,"interval.base");const min=base||0;const isValid=value!==""&&value!==undefined&&(isAutoInterval(value)||Number(value)>=min);Object(external_osdSharedDeps_React_["useEffect"])(()=>{setValidity(isValid)},[isValid,setValidity]);const onChange=Object(external_osdSharedDeps_React_["useCallback"])(_ref2=>{let{target:target}=_ref2;return setValue(isNaN(target.valueAsNumber)?"":target.valueAsNumber)},[setValue]);const onAutoSwitchChange=Object(external_osdSharedDeps_React_["useCallback"])(e=>{const isAutoSwitchChecked=e.target.checked;setValue(isAutoSwitchChecked?autoInterval:"")},[setValue]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{display:"rowCompressed",label:number_interval_label,fullWidth:true,isInvalid:showValidation&&!isValid,helpText:Object(external_osdSharedDeps_Lodash_["get"])(editorConfig,"interval.help")},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",responsive:false,direction:"column"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSwitch"],{label:useAutoIntervalLabel,onChange:onAutoSwitchChange,checked:isAutoChecked,compressed:true,"data-test-subj":`visEditorIntervalSwitch${agg.id}`})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldNumber"],{value:!isAutoChecked?value:"",min:min,step:base||"any","data-test-subj":`visEditorInterval${agg.id}`,isInvalid:showValidation&&!isValid,onChange:onChange,onBlur:setTouched,disabled:isAutoChecked,fullWidth:true,compressed:true,placeholder:isAutoChecked?autoIntervalIsUsedPlaceholder:selectIntervalPlaceholder}))))}const{termsAggFilter:termsAggFilter}=public_["search"].aggs;const DEFAULT_VALUE="_key";const order_by_DEFAULT_OPTIONS=[{text:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.orderAgg.alphabeticalLabel",{defaultMessage:"Alphabetical"}),value:DEFAULT_VALUE}];const isCompatibleAgg=Object(controls_utils["b"])(termsAggFilter);function OrderByParamEditor(_ref){let{agg:agg,value:value,showValidation:showValidation,setValue:setValue,setValidity:setValidity,setTouched:setTouched,metricAggs:metricAggs}=_ref;const label=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.orderAgg.orderByLabel",{defaultMessage:"Order by"});const isValid=!!value;Object(controls_utils["g"])(setValidity,isValid);Object(lib["useMount"])(()=>{if(!value){let respAgg={id:DEFAULT_VALUE};if(metricAggs){respAgg=metricAggs.filter(isCompatibleAgg)[0]||respAgg}setValue(respAgg.id)}});Object(controls_utils["e"])(setValue,termsAggFilter,metricAggs,value,DEFAULT_VALUE);const options=Object(controls_utils["d"])(termsAggFilter,metricAggs,order_by_DEFAULT_OPTIONS);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:label,fullWidth:true,isInvalid:showValidation&&!isValid,display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSelect"],{options:options,value:value,onChange:ev=>setValue(ev.target.value),fullWidth:true,compressed:true,isInvalid:showValidation&&!isValid,onBlur:setTouched,"data-test-subj":`visEditorOrderBy${agg.id}`}))}function other_bucket_extends(){other_bucket_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return other_bucket_extends.apply(this,arguments)}function OtherBucketParamEditor(props){return external_osdSharedDeps_React_default.a.createElement(SwitchParamEditor,other_bucket_extends({dataTestSubj:"otherBucketSwitch",displayLabel:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.otherBucket.groupValuesLabel",{defaultMessage:"Group other values in separate bucket"}),displayToolTip:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.otherBucket.groupValuesTooltip",{defaultMessage:"Values not in the top N are grouped in this bucket. "+"To include documents with missing values, enable 'Show missing values'."})},props))}var agg_params=__webpack_require__(13);function OrderAggParamEditor(_ref){let{agg:agg,aggParam:aggParam,formIsTouched:formIsTouched,value:value,metricAggs:metricAggs,state:state,setValue:setValue,setValidity:setValidity,setTouched:setTouched,schemas:schemas}=_ref;const orderBy=agg.params.orderBy;Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(orderBy==="custom"&&!value){setValue(aggParam.makeAgg(agg))}if(orderBy!=="custom"&&value){setValue(undefined)}},[agg,aggParam,orderBy,setValue,value]);const{onAggTypeChange:onAggTypeChange,setAggParamValue:setAggParamValue}=Object(controls_utils["f"])(agg,aggParam,value,setValue);if(!agg.params.orderAgg){return null}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(agg_params["a"],{agg:value,allowedAggs:aggParam.allowedAggs,hideCustomLabel:true,groupName:public_["AggGroupNames"].Metrics,className:"visEditorAgg__subAgg",formIsTouched:formIsTouched,indexPattern:agg.getIndexPattern(),metricAggs:metricAggs,state:state,setAggParamValue:setAggParamValue,onAggTypeChange:onAggTypeChange,setValidity:setValidity,setTouched:setTouched,schemas:schemas}))}function NumberList(_ref){let{labelledbyId:labelledbyId,numberArray:numberArray,range:range,showValidation:showValidation,unitName:unitName,validateAscendingOrder:validateAscendingOrder=false,disallowDuplicates:disallowDuplicates=false,onChange:onChange,setTouched:setTouched,setValidity:setValidity}=_ref;const numberRange=Object(external_osdSharedDeps_React_["useMemo"])(()=>getRange(range),[range]);const[models,setModels]=Object(external_osdSharedDeps_React_["useState"])(getInitModelList(numberArray));Object(external_osdSharedDeps_React_["useEffect"])(()=>{setModels(state=>getValidatedModels(numberArray,state,numberRange,validateAscendingOrder,disallowDuplicates))},[numberArray,numberRange,validateAscendingOrder,disallowDuplicates]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(!numberArray.length){onChange([models[0].value])}},[models,numberArray.length,onChange]);const isValid=!utils_hasInvalidValues(models);Object(controls_utils["g"])(setValidity,isValid);const onUpdate=Object(external_osdSharedDeps_React_["useCallback"])(modelList=>{setModels(modelList);onChange(modelList.map(_ref2=>{let{value:value}=_ref2;return value===EMPTY_STRING?undefined:value}))},[onChange]);const onChangeValue=Object(external_osdSharedDeps_React_["useCallback"])(_ref3=>{let{id:id,value:value}=_ref3;const parsedValue=parse(value);onUpdate(models.map(model=>{if(model.id===id){return{id:id,value:parsedValue,isInvalid:false}}return model}))},[models,onUpdate]);const onAdd=Object(external_osdSharedDeps_React_["useCallback"])(()=>{const newArray=[...models,getNextModel(models,numberRange)];onUpdate(newArray)},[models,numberRange,onUpdate]);const onDelete=Object(external_osdSharedDeps_React_["useCallback"])(id=>{const newArray=models.filter(model=>model.id!==id);onUpdate(newArray)},[models,onUpdate]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,models.map((model,arrayIndex)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],{key:model.id},external_osdSharedDeps_React_default.a.createElement(NumberRow,{isInvalid:showValidation?model.isInvalid:false,disableDelete:models.length===1,model:model,labelledbyId:labelledbyId,range:numberRange,onDelete:onDelete,onChange:onChangeValue,onBlur:setTouched,autoFocus:models.length!==1&&arrayIndex===models.length-1}),showValidation&&model.isInvalid&&model.error&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormErrorText"],null,model.error),models.length-1!==arrayIndex&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{iconType:"plusInCircleFilled",onClick:onAdd,size:"xs"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.numberList.addUnitButtonLabel",defaultMessage:"Add {unitName}",values:{unitName:unitName}}))))}function PercentilesEditor(_ref){let{agg:agg,showValidation:showValidation,value:value=[],setTouched:setTouched,setValidity:setValidity,setValue:setValue}=_ref;const label=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.percentiles.percentsLabel",{defaultMessage:"Percents"});const[isValid,setIsValid]=Object(external_osdSharedDeps_React_["useState"])(true);const setModelValidity=Object(external_osdSharedDeps_React_["useCallback"])(isListValid=>{setIsValid(isListValid);setValidity(isListValid)},[setValidity]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:label,labelType:"legend",fullWidth:true,id:`visEditorPercentileLabel${agg.id}`,isInvalid:showValidation?!isValid:false,display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(NumberList,{labelledbyId:`visEditorPercentileLabel${agg.id}-legend`,numberArray:value,range:"[0,100]",disallowDuplicates:true,unitName:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.percentileRanks.percentUnitNameText",{defaultMessage:"percent"}),showValidation:showValidation,onChange:setValue,setTouched:setTouched,setValidity:setModelValidity}))}function PercentileRanksEditor(_ref){let{agg:agg,showValidation:showValidation,value:value=[],setTouched:setTouched,setValidity:setValidity,setValue:setValue}=_ref;const label=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.percentileRanks.valuesLabel",{defaultMessage:"Values"});const[isValid,setIsValid]=Object(external_osdSharedDeps_React_["useState"])(true);const setModelValidity=Object(external_osdSharedDeps_React_["useCallback"])(isListValid=>{setIsValid(isListValid);setValidity(isListValid)},[setValidity]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:label,labelType:"legend",fullWidth:true,id:`visEditorPercentileRanksLabel${agg.id}`,isInvalid:showValidation?!isValid:false,display:"rowCompressed","data-test-subj":"visEditorPercentileRanks"},external_osdSharedDeps_React_default.a.createElement(NumberList,{labelledbyId:`visEditorPercentileRanksLabel${agg.id}-legend`,numberArray:value,range:"[-Infinity,Infinity]",unitName:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.percentileRanks.valueUnitNameText",{defaultMessage:"value"}),validateAscendingOrder:true,showValidation:showValidation,onChange:setValue,setTouched:setTouched,setValidity:setModelValidity}))}function PrecisionParamEditor(_ref){let{agg:agg,value:value,setValue:setValue}=_ref;const{services:services}=Object(opensearchDashboardsReact_public_["useOpenSearchDashboards"])();const label=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.precisionLabel",{defaultMessage:"Precision"});if(agg.params.autoPrecision){return null}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:label,display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiRange"],{min:1,max:services.uiSettings.get("visualization:tileMap:maxPrecision"),value:value||"",onChange:ev=>setValue(Number(ev.currentTarget.value)),"data-test-subj":`visEditorMapPrecision${agg.id}`,showValue:true,compressed:true}))}var controls_ranges=__webpack_require__(20);const RangesControl=props=>external_osdSharedDeps_React_default.a.createElement(controls_ranges["b"],{value:props.value,setValue:props.setValue});var json=__webpack_require__(45);var github=__webpack_require__(152);function RawJsonParamEditor(_ref){let{showValidation:showValidation,value:value="",setValidity:setValidity,setValue:setValue,setTouched:setTouched}=_ref;const[isFieldValid,setFieldValidity]=Object(external_osdSharedDeps_React_["useState"])(true);const[editorReady,setEditorReady]=Object(external_osdSharedDeps_React_["useState"])(false);const editorTooltipText=Object(external_osdSharedDeps_React_["useMemo"])(()=>external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.jsonInputTooltip",{defaultMessage:"Any JSON formatted properties you add here will be merged with the opensearch aggregation definition for this section. For example 'shard_size' on a terms aggregation."}),[]);const jsonEditorLabelText=Object(external_osdSharedDeps_React_["useMemo"])(()=>external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.jsonInputLabel",{defaultMessage:"JSON input"}),[]);const label=Object(external_osdSharedDeps_React_["useMemo"])(()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,jsonEditorLabelText," ",external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{position:"right",content:editorTooltipText,type:"questionInCircle"})),[jsonEditorLabelText,editorTooltipText]);const onEditorValidate=Object(external_osdSharedDeps_React_["useCallback"])(annotations=>{if(editorReady){const validity=annotations.length===0;setFieldValidity(validity);setValidity(validity)}else{setEditorReady(true)}},[setValidity,editorReady]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:label,isInvalid:showValidation?!isFieldValid:false,fullWidth:true,display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCodeEditor"],{mode:"json",theme:"textmate",width:"100%",height:"250px",value:value,onValidate:onEditorValidate,setOptions:{fontSize:"14px"},onChange:setValue,onBlur:setTouched,"aria-label":jsonEditorLabelText,"aria-describedby":"jsonEditorDescription"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiScreenReaderOnly"],null,external_osdSharedDeps_React_default.a.createElement("p",{id:"jsonEditorDescription"},editorTooltipText))))}function scale_metrics_extends(){scale_metrics_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return scale_metrics_extends.apply(this,arguments)}function ScaleMetricsParamEditor(props){return external_osdSharedDeps_React_default.a.createElement(SwitchParamEditor,scale_metrics_extends({dataTestSubj:"scaleMetricsSwitch",displayLabel:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.scaleMetricsLabel",{defaultMessage:"Scale metric values (deprecated)"}),displayToolTip:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.scaleMetricsTooltip",{defaultMessage:"If you select a manual minimum interval and a larger interval will be used, enabling this will "+"cause count and sum metrics to be scaled to the manual selected interval."})},props))}function SizeParamEditor(_ref){let{disabled:disabled,iconTip:iconTip,value:value,setValue:setValue,showValidation:showValidation,setValidity:setValidity,setTouched:setTouched}=_ref;const label=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.sizeLabel",defaultMessage:"Size"}),iconTip);const isValid=disabled||Number(value)>0;Object(external_osdSharedDeps_React_["useEffect"])(()=>{setValidity(isValid)},[isValid,setValidity]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:label,fullWidth:true,isInvalid:showValidation?!isValid:false,display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldNumber"],{value:Object(external_osdSharedDeps_Lodash_["isUndefined"])(value)?"":value,onChange:ev=>setValue(ev.target.value===""?"":parseFloat(ev.target.value)),fullWidth:true,compressed:true,isInvalid:showValidation?!isValid:false,onBlur:setTouched,min:1,disabled:disabled,"data-test-subj":"sizeParamEditor"}))}function SubAggParamEditor(_ref){let{agg:agg,aggParam:aggParam,formIsTouched:formIsTouched,metricAggs:metricAggs,state:state,setValue:setValue,setValidity:setValidity,setTouched:setTouched,schemas:schemas}=_ref;Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(agg.params.metricAgg!=="custom"){setValue(undefined)}else if(!agg.params.customMetric){setValue(aggParam.makeAgg(agg))}},[metricAggs,agg,setValue,aggParam]);const{onAggTypeChange:onAggTypeChange,setAggParamValue:setAggParamValue}=Object(controls_utils["f"])(agg,aggParam,agg.params.customMetric,setValue);if(agg.params.metricAgg!=="custom"||!agg.params.customMetric){return null}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(agg_params["a"],{agg:agg.params.customMetric,allowedAggs:aggParam.allowedAggs,groupName:public_["AggGroupNames"].Metrics,className:"visEditorAgg__subAgg",formIsTouched:formIsTouched,indexPattern:agg.getIndexPattern(),metricAggs:metricAggs,state:state,setAggParamValue:setAggParamValue,onAggTypeChange:onAggTypeChange,setValidity:setValidity,setTouched:setTouched,schemas:schemas,hideCustomLabel:true}))}function SubMetricParamEditor(_ref){let{agg:agg,aggParam:aggParam,formIsTouched:formIsTouched,metricAggs:metricAggs,state:state,setValue:setValue,setValidity:setValidity,setTouched:setTouched,schemas:schemas}=_ref;const metricTitle=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.metrics.metricTitle",{defaultMessage:"Metric"});const bucketTitle=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.metrics.bucketTitle",{defaultMessage:"Bucket"});const type=aggParam.name;const isCustomMetric=type==="customMetric";const aggTitle=isCustomMetric?metricTitle:bucketTitle;const aggGroup=isCustomMetric?public_["AggGroupNames"].Metrics:public_["AggGroupNames"].Buckets;Object(lib["useMount"])(()=>{if(agg.params[type]){setValue(agg.params[type])}else{setValue(aggParam.makeAgg(agg))}});const{onAggTypeChange:onAggTypeChange,setAggParamValue:setAggParamValue}=Object(controls_utils["f"])(agg,aggParam,agg.params[type],setValue);if(!agg.params[type]){return null}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormLabel"],null,aggTitle),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_osdSharedDeps_React_default.a.createElement(agg_params["a"],{agg:agg.params[type],allowedAggs:aggParam.allowedAggs,groupName:aggGroup,className:"visEditorAgg__subAgg",formIsTouched:formIsTouched,indexPattern:agg.getIndexPattern(),metricAggs:metricAggs,state:state,setAggParamValue:setAggParamValue,onAggTypeChange:onAggTypeChange,setValidity:setValidity,setTouched:setTouched,schemas:schemas,hideCustomLabel:!isCustomMetric}))}const{parseOpenSearchInterval:parseOpenSearchInterval,InvalidOpenSearchCalendarIntervalError:InvalidOpenSearchCalendarIntervalError}=public_["search"].aggs;function isValidCalendarInterval(interval){if(interval==="0ms"){return{isValidCalendarValue:true}}try{parseOpenSearchInterval(interval);return{isValidCalendarValue:true}}catch(e){if(e instanceof InvalidOpenSearchCalendarIntervalError){return{isValidCalendarValue:false,error:e.message}}return{isValidCalendarValue:true}}}const errorMessage=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.timeInterval.invalidFormatErrorMessage",{defaultMessage:"Invalid interval format."});function validateInterval(agg,value,definedOption,timeBase){var _agg$buckets2;if(definedOption){var _agg$buckets;return{isValid:true,interval:(_agg$buckets=agg.buckets)===null||_agg$buckets===void 0?void 0:_agg$buckets.getInterval()}}if(!value){return{isValid:false}}if(!timeBase){const{isValidCalendarValue:isValidCalendarValue,error:error}=isValidCalendarInterval(value);if(!isValidCalendarValue){return{isValid:false,error:error}}}const isValid=public_["search"].aggs.isValidInterval(value,timeBase);if(!isValid){return{isValid:false,error:errorMessage}}const interval=(_agg$buckets2=agg.buckets)===null||_agg$buckets2===void 0?void 0:_agg$buckets2.getInterval();const{isValidCalendarValue:isValidCalendarValue,error:error}=isValidCalendarInterval(interval.expression);if(!isValidCalendarValue){return{isValid:false,error:error}}return{isValid:isValid,interval:interval}}function TimeIntervalParamEditor(_ref){let{agg:agg,aggParam:aggParam,editorConfig:editorConfig,value:value,setValue:setValue,showValidation:showValidation,setTouched:setTouched,setValidity:setValidity}=_ref;const timeBase=Object(external_osdSharedDeps_Lodash_["get"])(editorConfig,"interval.timeBase");const options=timeBase?[]:(aggParam.options||[]).reduce((filtered,option)=>{if(option.enabled?option.enabled(agg):true){filtered.push({label:option.display,key:option.val})}return filtered},[]);let selectedOptions=[];let definedOption;if(value){definedOption=Object(external_osdSharedDeps_Lodash_["find"])(options,{key:value});selectedOptions=definedOption?[definedOption]:[{label:value,key:"custom"}]}const{isValid:isValid,error:error,interval:interval}=validateInterval(agg,value,definedOption,timeBase);const scaledHelpText=interval&&interval.scaled?external_osdSharedDeps_React_default.a.createElement("strong",{"data-test-subj":"currentlyScaledText",className:"eui-displayBlock"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.timeInterval.scaledHelpText",defaultMessage:"Currently scaled to {bucketDescription}",values:{bucketDescription:Object(external_osdSharedDeps_Lodash_["get"])(interval,"description")||""}})," ",external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{position:"right",type:"questionInCircle",content:interval.scale<=1?tooManyBucketsTooltip:tooLargeBucketsTooltip})):null;const helpText=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,scaledHelpText,Object(external_osdSharedDeps_Lodash_["get"])(editorConfig,"interval.help")||selectOptionHelpText);const onCustomInterval=customValue=>setValue(customValue.trim());const onChange=opts=>{const selectedOpt=Object(external_osdSharedDeps_Lodash_["get"])(opts,"0");setValue(selectedOpt?selectedOpt.key:"")};Object(external_osdSharedDeps_React_["useEffect"])(()=>{setValidity(isValid)},[isValid,setValidity]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{display:"rowCompressed",error:error,fullWidth:true,helpText:helpText,isInvalid:showValidation&&!isValid,label:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.timeInterval.minimumIntervalLabel",{defaultMessage:"Minimum interval"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiComboBox"],{compressed:true,fullWidth:true,"data-test-subj":"visEditorInterval",isInvalid:showValidation&&!isValid,noSuggestions:!!timeBase,onChange:onChange,onCreateOption:onCustomInterval,options:options,selectedOptions:selectedOptions,singleSelection:{asPlainText:true},placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.timeInterval.selectIntervalPlaceholder",{defaultMessage:"Select an interval"}),onBlur:setTouched}))}const tooManyBucketsTooltip=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.timeInterval.createsTooManyBucketsTooltip",defaultMessage:"This interval creates too many buckets to show in the selected time range, so it has been scaled up."});const tooLargeBucketsTooltip=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.timeInterval.createsTooLargeBucketsTooltip",defaultMessage:"This interval creates buckets that are too large to show in the selected time range, so it has been scaled down."});const selectOptionHelpText=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.timeInterval.selectOptionHelpText",defaultMessage:"Select an option or create a custom value. Examples: 30s, 20m, 24h, 2d, 1w, 1M"});function getCompatibleAggs(agg){const{options:options=[]}=agg.getAggParams().find(_ref=>{let{name:name}=_ref;return name==="aggregate"});return options.filter(option=>option.isCompatible(agg))}function TopAggregateParamEditor(_ref2){let{agg:agg,aggParam:aggParam,value:value,showValidation:showValidation,setValue:setValue,setValidity:setValidity,setTouched:setTouched}=_ref2;const isFirstRun=Object(external_osdSharedDeps_React_["useRef"])(true);const fieldType=agg.params.field&&agg.params.field.type;const emptyValue={text:"",value:"EMPTY_VALUE",disabled:true,hidden:true};const filteredOptions=getCompatibleAggs(agg).map(_ref3=>{let{text:text,value:val}=_ref3;return{text:text,value:val}}).sort((a,b)=>a.text.toLowerCase().localeCompare(b.text.toLowerCase()));const options=[emptyValue,...filteredOptions];const disabled=fieldType&&!filteredOptions.length;const isValid=disabled||!!value;const label=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.aggregateWithLabel",defaultMessage:"Aggregate with"})," ",external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{position:"right",type:"questionInCircle",content:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.aggregateWithTooltip",{defaultMessage:"Choose a strategy for combining multiple hits or a multi-valued field into a single metric."})}));Object(external_osdSharedDeps_React_["useEffect"])(()=>{setValidity(isValid)},[isValid,setValidity]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(isFirstRun.current){isFirstRun.current=false;return}if(value){if(aggParam.options.find(opt=>opt.value===value.value)){return}setValue()}if(filteredOptions.length===1){setValue(aggParam.options.find(opt=>opt.value===filteredOptions[0].value))}},[aggParam.options,fieldType,filteredOptions,setValue,value]);const handleChange=event=>{if(event.target.value===emptyValue.value){setValue()}else{setValue(aggParam.options.find(opt=>opt.value===event.target.value))}};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:label,fullWidth:true,isInvalid:showValidation?!isValid:false,display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSelect"],{options:options,value:value?value.value:emptyValue.value,onChange:handleChange,fullWidth:true,compressed:true,isInvalid:showValidation?!isValid:false,disabled:disabled,onBlur:setTouched,"data-test-subj":"visDefaultEditorAggregateWith"}))}function top_field_extends(){top_field_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return top_field_extends.apply(this,arguments)}function TopFieldParamEditor(props){const compatibleAggs=getCompatibleAggs(props.agg);let customError;if(props.value&&!compatibleAggs.length){customError=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.aggregateWith.noAggsErrorTooltip",{defaultMessage:"The chosen field has no compatible aggregations."})}return external_osdSharedDeps_React_default.a.createElement(FieldParamEditor,top_field_extends({},props,{customError:customError}))}function top_size_extends(){top_size_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return top_size_extends.apply(this,arguments)}function TopSizeParamEditor(props){const iconTip=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null," ",external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{position:"right",content:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.sizeTooltip",{defaultMessage:"Request top-K hits. Multiple hits will be combined via 'aggregate with'."}),type:"questionInCircle"}));const fieldType=props.agg.params.field&&props.agg.params.field.type;const disabled=fieldType&&!getCompatibleAggs(props.agg).length;return external_osdSharedDeps_React_default.a.createElement(SizeParamEditor,top_size_extends({},props,{iconTip:iconTip,disabled:disabled}))}function top_sort_field_extends(){top_sort_field_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return top_sort_field_extends.apply(this,arguments)}function TopSortFieldParamEditor(props){const customLabel=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.sortOnLabel",{defaultMessage:"Sort on"});return external_osdSharedDeps_React_default.a.createElement(FieldParamEditor,top_sort_field_extends({},props,{customLabel:customLabel}))}function OrderParamEditor(_ref){let{aggParam:aggParam,value:value,showValidation:showValidation,setValue:setValue,setValidity:setValidity,setTouched:setTouched}=_ref;const label=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.orderLabel",{defaultMessage:"Order"});const isValid=!!value;Object(external_osdSharedDeps_React_["useEffect"])(()=>{setValidity(isValid)},[isValid,setValidity]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:label,fullWidth:true,isInvalid:showValidation?!isValid:false,display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSelect"],{options:aggParam.options,value:value&&value.value,onChange:ev=>setValue(aggParam.options.find(opt=>opt.value===ev.target.value)),fullWidth:true,compressed:true,isInvalid:showValidation?!isValid:false,onBlur:setTouched}))}function UseGeocentroidParamEditor(_ref){let{value:value=false,setValue:setValue}=_ref;const label=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.placeMarkersOffGridLabel",{defaultMessage:"Place markers off grid (use geocentroid)"});return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSwitch"],{compressed:true,label:label,checked:value,onChange:ev=>setValue(ev.target.checked)}))}const autoPlaceholder=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.maxBars.autoPlaceholder",{defaultMessage:"Auto"});const max_bars_label=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.maxBars.maxBarsLabel",defaultMessage:"Max bars"})," ",external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{position:"right",content:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.maxBars.maxBarsHelpText",defaultMessage:"Intervals will be selected automatically based on the available data. The maximum number of bars can never be greater than the Advanced Setting's {histogramMaxBars}",values:{histogramMaxBars:public_["UI_SETTINGS"].HISTOGRAM_MAX_BARS}}),type:"questionInCircle"}));function MaxBarsParamEditor(_ref){var _services$uiSettings;let{disabled:disabled,iconTip:iconTip,value:value,setValue:setValue,showValidation:showValidation,setValidity:setValidity,setTouched:setTouched}=_ref;const{services:services}=Object(opensearchDashboardsReact_public_["useOpenSearchDashboards"])();const uiSettingMaxBars=(_services$uiSettings=services.uiSettings)===null||_services$uiSettings===void 0?void 0:_services$uiSettings.get(public_["UI_SETTINGS"].HISTOGRAM_MAX_BARS);const isValid=disabled||value===undefined||value===""||Number(value)>0||value<uiSettingMaxBars;Object(external_osdSharedDeps_React_["useEffect"])(()=>{setValidity(isValid)},[isValid,setValidity]);const onChange=Object(external_osdSharedDeps_React_["useCallback"])(ev=>setValue(ev.target.value===""?"":parseFloat(ev.target.value)),[setValue]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:max_bars_label,fullWidth:true,isInvalid:showValidation?!isValid:false,display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldNumber"],{value:value||"",placeholder:autoPlaceholder,onChange:onChange,min:1,fullWidth:true,compressed:true,max:uiSettingMaxBars,isInvalid:showValidation?!isValid:false,onBlur:setTouched,disabled:disabled,"data-test-subj":"maxBarsParamEditor"}))}const{siblingPipelineType:siblingPipelineType,parentPipelineType:parentPipelineType}=public_["search"].aggs;const buckets={[public_["BUCKET_TYPES"].DATE_HISTOGRAM]:{scaleMetricValues:ScaleMetricsParamEditor,interval:TimeIntervalParamEditor,drop_partials:DropPartialsParamEditor},[public_["BUCKET_TYPES"].DATE_RANGE]:{ranges:DateRangesParamEditor},[public_["BUCKET_TYPES"].FILTERS]:{filters:FiltersParamEditor},[public_["BUCKET_TYPES"].GEOHASH_GRID]:{autoPrecision:AutoPrecisionParamEditor,precision:PrecisionParamEditor,useGeocentroid:UseGeocentroidParamEditor,isFilteredByCollar:IsFilteredByCollarParamEditor},[public_["BUCKET_TYPES"].HISTOGRAM]:{interval:NumberIntervalParamEditor,maxBars:MaxBarsParamEditor,min_doc_count:MinDocCountParamEditor,has_extended_bounds:HasExtendedBoundsParamEditor,extended_bounds:ExtendedBoundsParamEditor},[public_["BUCKET_TYPES"].IP_RANGE]:{ipRangeType:IpRangeTypeParamEditor,ranges:IpRangesParamEditor},[public_["BUCKET_TYPES"].RANGE]:{ranges:RangesControl},[public_["BUCKET_TYPES"].SIGNIFICANT_TERMS]:{size:SizeParamEditor},[public_["BUCKET_TYPES"].TERMS]:{include:IncludeExcludeParamEditor,exclude:IncludeExcludeParamEditor,orderBy:OrderByParamEditor,orderAgg:OrderAggParamEditor,order:Object(controls_utils["h"])(OrderParamEditor),size:Object(controls_utils["h"])(SizeParamEditor),otherBucket:OtherBucketParamEditor,missingBucket:MissingBucketParamEditor}};const metrics={[public_["METRIC_TYPES"].TOP_HITS]:{field:TopFieldParamEditor,aggregate:Object(controls_utils["h"])(TopAggregateParamEditor),size:Object(controls_utils["h"])(TopSizeParamEditor),sortField:TopSortFieldParamEditor,sortOrder:OrderParamEditor},[public_["METRIC_TYPES"].PERCENTILES]:{percents:PercentilesEditor},[public_["METRIC_TYPES"].PERCENTILE_RANKS]:{values:PercentileRanksEditor}};const aggParamsMap={common:{string:StringParamEditor,json:RawJsonParamEditor,field:FieldParamEditor},[siblingPipelineType]:{customBucket:SubMetricParamEditor,customMetric:SubMetricParamEditor},[parentPipelineType]:{metricAgg:MetricAggParamEditor,customMetric:SubAggParamEditor},[public_["AggGroupNames"].Buckets]:buckets,[public_["AggGroupNames"].Metrics]:metrics};var public_schemas=__webpack_require__(12);function getAggParamsToRender(_ref){let{agg:agg,editorConfig:editorConfig,metricAggs:metricAggs,state:state,schemas:schemas,hideCustomLabel:hideCustomLabel}=_ref;const params={basic:[],advanced:[]};const paramsToRender=agg.type&&agg.type.params.filter(param=>!Object(external_osdSharedDeps_Lodash_["get"])(editorConfig,[param.name,"hidden"],false))||[];const schema=Object(public_schemas["d"])(schemas,agg.schema);paramsToRender.forEach((param,index)=>{let indexedFields=[];let fields;if(hideCustomLabel&&param.name==="customLabel"){return}if(param.type==="field"){let availableFields=param.getAvailableFields(agg);if(agg.type.name==="top_hits"&&param.name==="field"){const allowStrings=Object(external_osdSharedDeps_Lodash_["get"])(schema,`aggSettings[${agg.type.name}].allowStrings`,false);if(!allowStrings){availableFields=availableFields.filter(field=>field.type==="number")}}fields=filterAggTypeFields(availableFields,agg);indexedFields=Object(utils["a"])(fields,"type","name");if(fields&&!indexedFields.length&&index>0){return}}const type=param.advanced?"advanced":"basic";let paramEditor;if(agg.type.subtype&&aggParamsMap[agg.type.subtype]){paramEditor=Object(external_osdSharedDeps_Lodash_["get"])(aggParamsMap,[agg.type.subtype,param.name])}else{const aggType=agg.type.type;const aggName=agg.type.name;const aggParams=Object(external_osdSharedDeps_Lodash_["get"])(aggParamsMap,[aggType,aggName],{});paramEditor=Object(external_osdSharedDeps_Lodash_["get"])(aggParams,param.name)}if(!paramEditor){paramEditor=Object(external_osdSharedDeps_Lodash_["get"])(aggParamsMap,["common",param.type])}if(paramEditor){params[type].push({agg:agg,aggParam:param,editorConfig:editorConfig,indexedFields:indexedFields,paramEditor:paramEditor,metricAggs:metricAggs,state:state,value:agg.params[param.name],schemas:schemas,hideCustomLabel:hideCustomLabel})}});return params}function getAggTypeOptions(aggTypes,agg,indexPattern,groupName,allowedAggs){const aggTypeOptions=filterAggTypes(aggTypes[groupName],indexPattern,agg,allowedAggs);return Object(utils["a"])(aggTypeOptions,"subtype","title")}function isInvalidParamsTouched(aggType,aggTypeState,aggParams){if(!aggType){return aggTypeState.touched}const invalidParams=Object.values(aggParams).filter(param=>!param.valid);if(Object(external_osdSharedDeps_Lodash_["isEmpty"])(invalidParams)){return false}return invalidParams.every(param=>param.touched)}function buildAggDescription(agg){let description="";if(agg.type&&agg.type.makeLabel){try{description=agg.type.makeLabel(agg)}catch(e){}}return description}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var isPrimitive=function(val){return val!==Object(val)};var useCustomCompareEffect=function(effect,deps,depsEqual){if(false){}var ref=react_1.useRef(undefined);if(!ref.current||!depsEqual(deps,ref.current)){ref.current=deps}react_1.useEffect(effect,ref.current)};exports.default=useCustomCompareEffect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);function useTimeoutFn(fn,ms){if(ms===void 0){ms=0}var ready=react_1.useRef(false);var timeout=react_1.useRef();var callback=react_1.useRef(fn);var isReady=react_1.useCallback((function(){return ready.current}),[]);var set=react_1.useCallback((function(){ready.current=false;timeout.current&&clearTimeout(timeout.current);timeout.current=setTimeout((function(){ready.current=true;callback.current()}),ms)}),[ms]);var clear=react_1.useCallback((function(){ready.current=null;timeout.current&&clearTimeout(timeout.current)}),[]);react_1.useEffect((function(){callback.current=fn}),[fn]);react_1.useEffect((function(){set();return clear}),[ms]);return[isReady,clear,set]}exports.default=useTimeoutFn},function(module,exports){module.exports=__osdSharedDeps__.ReactDom},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DefaultEditorSize}));__webpack_require__.d(__webpack_exports__,"b",(function(){return getInitialWidth}));let DefaultEditorSize=function(DefaultEditorSize){DefaultEditorSize["SMALL"]="small";DefaultEditorSize["MEDIUM"]="medium";DefaultEditorSize["LARGE"]="large";return DefaultEditorSize}({});const getInitialWidth=size=>{switch(size){case DefaultEditorSize.SMALL:return 15;case DefaultEditorSize.LARGE:return 50;case DefaultEditorSize.MEDIUM:default:return 30}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useAsyncFn_1=tslib_1.__importDefault(__webpack_require__(30));function useAsync(fn,deps){if(deps===void 0){deps=[]}var _a=useAsyncFn_1.default(fn,deps,{loading:true}),state=_a[0],callback=_a[1];react_1.useEffect((function(){callback()}),[callback]);return state}exports.default=useAsync},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useMountedState_1=tslib_1.__importDefault(__webpack_require__(11));function useAsyncFn(fn,deps,initialState){if(deps===void 0){deps=[]}if(initialState===void 0){initialState={loading:false}}var lastCallId=react_1.useRef(0);var _a=react_1.useState(initialState),state=_a[0],set=_a[1];var isMounted=useMountedState_1.default();var callback=react_1.useCallback((function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var callId=++lastCallId.current;set({loading:true});return fn.apply(void 0,args).then((function(value){isMounted()&&callId===lastCallId.current&&set({value:value,loading:false});return value}),(function(error){isMounted()&&callId===lastCallId.current&&set({error:error,loading:false});return error}))}),deps);return[state,callback]}exports.default=useAsyncFn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var React=tslib_1.__importStar(__webpack_require__(0));var react_1=__webpack_require__(0);var useSetState_1=tslib_1.__importDefault(__webpack_require__(17));var parseTimeRanges_1=tslib_1.__importDefault(__webpack_require__(55));var createHTMLMediaHook=function(tag){var hook=function(elOrProps){var element;var props;if(React.isValidElement(elOrProps)){element=elOrProps;props=element.props}else{props=elOrProps}var _a=useSetState_1.default({buffered:[],time:0,duration:0,paused:true,muted:false,volume:1}),state=_a[0],setState=_a[1];var ref=react_1.useRef(null);var wrapEvent=function(userEvent,proxyEvent){return function(event){try{proxyEvent&&proxyEvent(event)}finally{userEvent&&userEvent(event)}}};var onPlay=function(){return setState({paused:false})};var onPause=function(){return setState({paused:true})};var onVolumeChange=function(){var el=ref.current;if(!el){return}setState({muted:el.muted,volume:el.volume})};var onDurationChange=function(){var el=ref.current;if(!el){return}var duration=el.duration,buffered=el.buffered;setState({duration:duration,buffered:parseTimeRanges_1.default(buffered)})};var onTimeUpdate=function(){var el=ref.current;if(!el){return}setState({time:el.currentTime})};var onProgress=function(){var el=ref.current;if(!el){return}setState({buffered:parseTimeRanges_1.default(el.buffered)})};if(element){element=React.cloneElement(element,tslib_1.__assign(tslib_1.__assign({controls:false},props),{ref:ref,onPlay:wrapEvent(props.onPlay,onPlay),onPause:wrapEvent(props.onPause,onPause),onVolumeChange:wrapEvent(props.onVolumeChange,onVolumeChange),onDurationChange:wrapEvent(props.onDurationChange,onDurationChange),onTimeUpdate:wrapEvent(props.onTimeUpdate,onTimeUpdate),onProgress:wrapEvent(props.onProgress,onProgress)}))}else{element=React.createElement(tag,tslib_1.__assign(tslib_1.__assign({controls:false},props),{ref:ref,onPlay:wrapEvent(props.onPlay,onPlay),onPause:wrapEvent(props.onPause,onPause),onVolumeChange:wrapEvent(props.onVolumeChange,onVolumeChange),onDurationChange:wrapEvent(props.onDurationChange,onDurationChange),onTimeUpdate:wrapEvent(props.onTimeUpdate,onTimeUpdate),onProgress:wrapEvent(props.onProgress,onProgress)}))}var lockPlay=false;var controls={play:function(){var el=ref.current;if(!el){return undefined}if(!lockPlay){var promise=el.play();var isPromise=typeof promise==="object";if(isPromise){lockPlay=true;var resetLock=function(){lockPlay=false};promise.then(resetLock,resetLock)}return promise}return undefined},pause:function(){var el=ref.current;if(el&&!lockPlay){return el.pause()}},seek:function(time){var el=ref.current;if(!el||state.duration===undefined){return}time=Math.min(state.duration,Math.max(0,time));el.currentTime=time},volume:function(volume){var el=ref.current;if(!el){return}volume=Math.min(1,Math.max(0,volume));el.volume=volume;setState({volume:volume})},mute:function(){var el=ref.current;if(!el){return}el.muted=true},unmute:function(){var el=ref.current;if(!el){return}el.muted=false}};react_1.useEffect((function(){var el=ref.current;if(!el){if(false){}return}setState({volume:el.volume,muted:el.muted,paused:el.paused});if(props.autoPlay&&el.paused){controls.play()}}),[props.src]);return[element,state,controls,ref]};return hook};exports.default=createHTMLMediaHook},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useToggle=function(initialValue){var _a=react_1.useState(initialValue),value=_a[0],setValue=_a[1];var toggle=react_1.useCallback((function(nextValue){if(typeof nextValue==="boolean"){setValue(nextValue)}else{setValue((function(currentValue){return!currentValue}))}}),[setValue]);return[value,toggle]};exports.default=useToggle},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useGetSet_1=tslib_1.__importDefault(__webpack_require__(34));var resolveHookState_1=__webpack_require__(23);function useCounter(initialValue,max,min){if(initialValue===void 0){initialValue=0}if(max===void 0){max=null}if(min===void 0){min=null}var init=resolveHookState_1.resolveHookState(initialValue);typeof init!=="number"&&console.error("initialValue has to be a number, got "+typeof initialValue);if(typeof min==="number"){init=Math.max(init,min)}else if(min!==null){console.error("min has to be a number, got "+typeof min)}if(typeof max==="number"){init=Math.min(init,max)}else if(max!==null){console.error("max has to be a number, got "+typeof max)}var _a=useGetSet_1.default(init),get=_a[0],setInternal=_a[1];return[get(),react_1.useMemo((function(){var set=function(newState){var prevState=get();var rState=resolveHookState_1.resolveHookState(newState,prevState);if(prevState!==rState){if(typeof min==="number"){rState=Math.max(rState,min)}if(typeof max==="number"){rState=Math.min(rState,max)}prevState!==rState&&setInternal(rState)}};return{get:get,set:set,inc:function(delta){if(delta===void 0){delta=1}var rDelta=resolveHookState_1.resolveHookState(delta,get());if(typeof rDelta!=="number"){console.error("delta has to be a number or function returning a number, got "+typeof rDelta)}set((function(num){return num+rDelta}))},dec:function(delta){if(delta===void 0){delta=1}var rDelta=resolveHookState_1.resolveHookState(delta,get());if(typeof rDelta!=="number"){console.error("delta has to be a number or function returning a number, got "+typeof rDelta)}set((function(num){return num-rDelta}))},reset:function(value){if(value===void 0){value=init}var rValue=resolveHookState_1.resolveHookState(value,get());if(typeof rValue!=="number"){console.error("value has to be a number or function returning a number, got "+typeof rValue)}init=rValue;set(rValue)}}}),[init,min,max])]}exports.default=useCounter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useUpdate_1=tslib_1.__importDefault(__webpack_require__(14));var resolveHookState_1=__webpack_require__(23);function useGetSet(initialState){var state=react_1.useRef(resolveHookState_1.resolveHookState(initialState));var update=useUpdate_1.default();return react_1.useMemo((function(){return[function(){return state.current},function(newState){state.current=resolveHookState_1.resolveHookState(newState,state.current);update()}]}),[])}exports.default=useGetSet},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var util_1=__webpack_require__(8);var defaultTarget=util_1.isClient?window:null;var isListenerType1=function(target){return!!target.addEventListener};var isListenerType2=function(target){return!!target.on};var useEvent=function(name,handler,target,options){if(target===void 0){target=defaultTarget}react_1.useEffect((function(){if(!handler){return}if(!target){return}if(isListenerType1(target)){target.addEventListener(name,handler,options)}else if(isListenerType2(target)){target.on(name,handler,options)}return function(){if(isListenerType1(target)){target.removeEventListener(name,handler,options)}else if(isListenerType2(target)){target.off(name,handler,options)}}}),[name,handler,target,JSON.stringify(options)])};exports.default=useEvent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useHoverDirty=function(ref,enabled){if(enabled===void 0){enabled=true}if(false){}var _a=react_1.useState(false),value=_a[0],setValue=_a[1];react_1.useEffect((function(){var onMouseOver=function(){return setValue(true)};var onMouseOut=function(){return setValue(false)};if(enabled&&ref&&ref.current){ref.current.addEventListener("mouseover",onMouseOver);ref.current.addEventListener("mouseout",onMouseOut)}var current=ref.current;return function(){if(enabled&&current){current.removeEventListener("mouseover",onMouseOver);current.removeEventListener("mouseout",onMouseOut)}}}),[enabled,ref]);return value};exports.default=useHoverDirty},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useIsomorphicLayoutEffect=typeof window!=="undefined"?react_1.useLayoutEffect:react_1.useEffect;exports.default=useIsomorphicLayoutEffect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useEvent_1=tslib_1.__importDefault(__webpack_require__(35));var noop=function(){};var createKeyPredicate=function(keyFilter){return typeof keyFilter==="function"?keyFilter:typeof keyFilter==="string"?function(event){return event.key===keyFilter}:keyFilter?function(){return true}:function(){return false}};var useKey=function(key,fn,opts,deps){if(fn===void 0){fn=noop}if(opts===void 0){opts={}}if(deps===void 0){deps=[key]}var _a=opts.event,event=_a===void 0?"keydown":_a,target=opts.target,options=opts.options;var useMemoHandler=react_1.useMemo((function(){var predicate=createKeyPredicate(key);var handler=function(handlerEvent){if(predicate(handlerEvent)){return fn(handlerEvent)}};return handler}),deps);useEvent_1.default(event,useMemoHandler,target,options)};exports.default=useKey},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useKey_1=tslib_1.__importDefault(__webpack_require__(38));var useKeyPress=function(keyFilter){var _a=react_1.useState([false,null]),state=_a[0],set=_a[1];useKey_1.default(keyFilter,(function(event){return set([true,event])}),{event:"keydown"},[state]);useKey_1.default(keyFilter,(function(event){return set([false,event])}),{event:"keyup"},[state]);return state};exports.default=useKeyPress},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useUpdate_1=tslib_1.__importDefault(__webpack_require__(14));var resolveHookState_1=__webpack_require__(23);function useList(initialList){if(initialList===void 0){initialList=[]}var list=react_1.useRef(resolveHookState_1.resolveHookState(initialList));var update=useUpdate_1.default();var actions=react_1.useMemo((function(){var a={set:function(newList){list.current=resolveHookState_1.resolveHookState(newList,list.current);update()},push:function(){var items=[];for(var _i=0;_i<arguments.length;_i++){items[_i]=arguments[_i]}items.length&&actions.set((function(curr){return curr.concat(items)}))},updateAt:function(index,item){actions.set((function(curr){var arr=curr.slice();arr[index]=item;return arr}))},insertAt:function(index,item){actions.set((function(curr){var arr=curr.slice();index>arr.length?arr[index]=item:arr.splice(index,0,item);return arr}))},update:function(predicate,newItem){actions.set((function(curr){return curr.map((function(item){return predicate(item,newItem)?newItem:item}))}))},updateFirst:function(predicate,newItem){var index=list.current.findIndex((function(item){return predicate(item,newItem)}));index>=0&&actions.updateAt(index,newItem)},upsert:function(predicate,newItem){var index=list.current.findIndex((function(item){return predicate(item,newItem)}));index>=0?actions.updateAt(index,newItem):actions.push(newItem)},sort:function(compareFn){actions.set((function(curr){return curr.slice().sort(compareFn)}))},filter:function(callbackFn,thisArg){actions.set((function(curr){return curr.slice().filter(callbackFn,thisArg)}))},removeAt:function(index){actions.set((function(curr){var arr=curr.slice();arr.splice(index,1);return arr}))},clear:function(){actions.set([])},reset:function(){actions.set(resolveHookState_1.resolveHookState(initialList).slice())}};a.remove=a.removeAt;return a}),[]);return[list.current,actions]}exports.default=useList},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var useEffectOnce_1=tslib_1.__importDefault(__webpack_require__(18));var useMount=function(fn){useEffectOnce_1.default((function(){fn()}))};exports.default=useMount},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useRafState_1=tslib_1.__importDefault(__webpack_require__(19));var useMouse=function(ref){if(false){}var _a=useRafState_1.default({docX:0,docY:0,posX:0,posY:0,elX:0,elY:0,elH:0,elW:0}),state=_a[0],setState=_a[1];react_1.useEffect((function(){var moveHandler=function(event){if(ref&&ref.current){var _a=ref.current.getBoundingClientRect(),left=_a.left,top_1=_a.top,elW=_a.width,elH=_a.height;var posX=left+window.pageXOffset;var posY=top_1+window.pageYOffset;var elX=event.pageX-posX;var elY=event.pageY-posY;setState({docX:event.pageX,docY:event.pageY,posX:posX,posY:posY,elX:elX,elY:elY,elH:elH,elW:elW})}};document.addEventListener("mousemove",moveHandler);return function(){document.removeEventListener("mousemove",moveHandler)}}),[ref]);return state};exports.default=useMouse},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useRaf=function(ms,delay){if(ms===void 0){ms=1e12}if(delay===void 0){delay=0}var _a=react_1.useState(0),elapsed=_a[0],set=_a[1];react_1.useLayoutEffect((function(){var raf;var timerStop;var start;var onFrame=function(){var time=Math.min(1,(Date.now()-start)/ms);set(time);loop()};var loop=function(){raf=requestAnimationFrame(onFrame)};var onStart=function(){timerStop=setTimeout((function(){cancelAnimationFrame(raf);set(1)}),ms);start=Date.now();loop()};var timerDelay=setTimeout(onStart,delay);return function(){clearTimeout(timerStop);clearTimeout(timerDelay);cancelAnimationFrame(raf)}}),[ms,delay]);return elapsed};exports.default=useRaf},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _moment=_interopRequireDefault(__webpack_require__(48));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var unitsMap={ms:{weight:1,type:"fixed",base:1},s:{weight:2,type:"fixed",base:1e3},m:{weight:3,type:"mixed",base:1e3*60},h:{weight:4,type:"mixed",base:1e3*60*60},d:{weight:5,type:"mixed",base:1e3*60*60*24},w:{weight:6,type:"calendar",base:NaN},M:{weight:7,type:"calendar",base:NaN},y:{weight:9,type:"calendar",base:NaN}};var units=Object.keys(unitsMap).sort((function(a,b){return unitsMap[b].weight-unitsMap[a].weight}));var unitsDesc=_toConsumableArray(units);var unitsAsc=_toConsumableArray(units).reverse();var isDate=function isDate(d){return Object.prototype.toString.call(d)==="[object Date]"};var isValidDate=function isValidDate(d){return isDate(d)&&!isNaN(d.valueOf())};function parse(text){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$roundUp=_ref.roundUp,roundUp=_ref$roundUp===void 0?false:_ref$roundUp,_ref$momentInstance=_ref.momentInstance,momentInstance=_ref$momentInstance===void 0?_moment.default:_ref$momentInstance,forceNow=_ref.forceNow;if(!text)return undefined;if(momentInstance.isMoment(text))return text;if(isDate(text))return momentInstance(text);if(forceNow!==undefined&&!isValidDate(forceNow)){throw new Error("forceNow must be a valid Date")}var time;var mathString="";var index;var parseString;if(text.substring(0,3)==="now"){time=momentInstance(forceNow);mathString=text.substring("now".length)}else{index=text.indexOf("||");if(index===-1){parseString=text;mathString=""}else{parseString=text.substring(0,index);mathString=text.substring(index+2)}time=momentInstance(parseString)}if(!mathString.length){return time}return parseDateMath(mathString,time,roundUp)}function parseDateMath(mathString,time,roundUp){var dateTime=time;var len=mathString.length;var i=0;while(i<len){var c=mathString.charAt(i++);var type=void 0;var num=void 0;var unit=void 0;if(c==="/"){type=0}else if(c==="+"){type=1}else if(c==="-"){type=2}else{return}if(isNaN(mathString.charAt(i))){num=1}else if(mathString.length===2){num=mathString.charAt(i)}else{var numFrom=i;while(!isNaN(mathString.charAt(i))){i++;if(i>=len)return}num=parseInt(mathString.substring(numFrom,i),10)}if(type===0){if(num!==1){return}}unit=mathString.charAt(i++);for(var j=i;j<len;j++){var unitChar=mathString.charAt(i);if(/[a-z]/i.test(unitChar)){unit+=unitChar;i++}else{break}}if(units.indexOf(unit)===-1){return}else{if(type===0){if(roundUp)dateTime.endOf(unit);else dateTime.startOf(unit)}else if(type===1){dateTime.add(num,unit)}else if(type===2){dateTime.subtract(num,unit)}}}return dateTime}var _default={parse:parse,unitsMap:Object.freeze(unitsMap),units:Object.freeze(units),unitsAsc:Object.freeze(unitsAsc),unitsDesc:Object.freeze(unitsDesc)};exports.default=_default;module.exports=exports.default},function(module,exports,__webpack_require__){ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(acequire,exports,module){"use strict";var oop=acequire("../lib/oop");var TextHighlightRules=acequire("./text_highlight_rules").TextHighlightRules;var JsonHighlightRules=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"text",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment.start",regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],comment:[{token:"comment.end",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}};oop.inherits(JsonHighlightRules,TextHighlightRules);exports.JsonHighlightRules=JsonHighlightRules}));ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],(function(acequire,exports,module){"use strict";var Range=acequire("../range").Range;var MatchingBraceOutdent=function(){};(function(){this.checkOutdent=function(line,input){if(!/^\s+$/.test(line))return false;return/^\s*\}/.test(input)};this.autoOutdent=function(doc,row){var line=doc.getLine(row);var match=line.match(/^(\s*\})/);if(!match)return 0;var column=match[1].length;var openBracePos=doc.findMatchingBracket({row:row,column:column});if(!openBracePos||openBracePos.row==row)return 0;var indent=this.$getIndent(doc.getLine(openBracePos.row));doc.replace(new Range(row,0,row,column-1),indent)};this.$getIndent=function(line){return line.match(/^\s*/)[0]}}).call(MatchingBraceOutdent.prototype);exports.MatchingBraceOutdent=MatchingBraceOutdent}));ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(acequire,exports,module){"use strict";var oop=acequire("../../lib/oop");var Range=acequire("../../range").Range;var BaseFoldMode=acequire("./fold_mode").FoldMode;var FoldMode=exports.FoldMode=function(commentRegex){if(commentRegex){this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+commentRegex.start));this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+commentRegex.end))}};oop.inherits(FoldMode,BaseFoldMode);(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/;this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/;this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/;this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/;this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/;this._getFoldWidgetBase=this.getFoldWidget;this.getFoldWidget=function(session,foldStyle,row){var line=session.getLine(row);if(this.singleLineBlockCommentRe.test(line)){if(!this.startRegionRe.test(line)&&!this.tripleStarBlockCommentRe.test(line))return""}var fw=this._getFoldWidgetBase(session,foldStyle,row);if(!fw&&this.startRegionRe.test(line))return"start";return fw};this.getFoldWidgetRange=function(session,foldStyle,row,forceMultiline){var line=session.getLine(row);if(this.startRegionRe.test(line))return this.getCommentRegionBlock(session,line,row);var match=line.match(this.foldingStartMarker);if(match){var i=match.index;if(match[1])return this.openingBracketBlock(session,match[1],row,i);var range=session.getCommentFoldRange(row,i+match[0].length,1);if(range&&!range.isMultiLine()){if(forceMultiline){range=this.getSectionRange(session,row)}else if(foldStyle!="all")range=null}return range}if(foldStyle==="markbegin")return;var match=line.match(this.foldingStopMarker);if(match){var i=match.index+match[0].length;if(match[1])return this.closingBracketBlock(session,match[1],row,i);return session.getCommentFoldRange(row,i,-1)}};this.getSectionRange=function(session,row){var line=session.getLine(row);var startIndent=line.search(/\S/);var startRow=row;var startColumn=line.length;row=row+1;var endRow=row;var maxRow=session.getLength();while(++row<maxRow){line=session.getLine(row);var indent=line.search(/\S/);if(indent===-1)continue;if(startIndent>indent)break;var subRange=this.getFoldWidgetRange(session,"all",row);if(subRange){if(subRange.start.row<=startRow){break}else if(subRange.isMultiLine()){row=subRange.end.row}else if(startIndent==indent){break}}endRow=row}return new Range(startRow,startColumn,endRow,session.getLine(endRow).length)};this.getCommentRegionBlock=function(session,line,row){var startColumn=line.search(/\s*$/);var maxRow=session.getLength();var startRow=row;var re=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/;var depth=1;while(++row<maxRow){line=session.getLine(row);var m=re.exec(line);if(!m)continue;if(m[1])depth--;else depth++;if(!depth)break}var endRow=row;if(endRow>startRow){return new Range(startRow,startColumn,endRow,line.length)}}}).call(FoldMode.prototype)}));ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle","ace/worker/worker_client"],(function(acequire,exports,module){"use strict";var oop=acequire("../lib/oop");var TextMode=acequire("./text").Mode;var HighlightRules=acequire("./json_highlight_rules").JsonHighlightRules;var MatchingBraceOutdent=acequire("./matching_brace_outdent").MatchingBraceOutdent;var CstyleBehaviour=acequire("./behaviour/cstyle").CstyleBehaviour;var CStyleFoldMode=acequire("./folding/cstyle").FoldMode;var WorkerClient=acequire("../worker/worker_client").WorkerClient;var Mode=function(){this.HighlightRules=HighlightRules;this.$outdent=new MatchingBraceOutdent;this.$behaviour=new CstyleBehaviour;this.foldingRules=new CStyleFoldMode};oop.inherits(Mode,TextMode);(function(){this.getNextLineIndent=function(state,line,tab){var indent=this.$getIndent(line);if(state=="start"){var match=line.match(/^.*[\{\(\[]\s*$/);if(match){indent+=tab}}return indent};this.checkOutdent=function(state,line,input){return this.$outdent.checkOutdent(line,input)};this.autoOutdent=function(state,doc,row){this.$outdent.autoOutdent(doc,row)};this.createWorker=function(session){var worker=new WorkerClient(["ace"],__webpack_require__(151),"JsonWorker");worker.attachToDocument(session.getDocument());worker.on("annotate",(function(e){session.setAnnotations(e.data)}));worker.on("terminate",(function(){session.clearAnnotations()}));return worker};this.$id="ace/mode/json"}).call(Mode.prototype);exports.Mode=Mode}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_visDefaultEditor_osd_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(47);var _node_modules_val_loader_dist_cjs_js_key_visDefaultEditor_osd_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_visDefaultEditor_osd_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__osdBundles__.define("plugin/visDefaultEditor/public",__webpack_require__,153)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__osdPublicPath__["visDefaultEditor"]},function(module,exports){module.exports=__osdSharedDeps__.Moment},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var createMemo=function(fn){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return react_1.useMemo((function(){return fn.apply(void 0,args)}),args)}};exports.default=createMemo},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var createReducerContext=function(reducer,defaultInitialState){var context=react_1.createContext(undefined);var providerFactory=react_1.createFactory(context.Provider);var ReducerProvider=function(_a){var children=_a.children,initialState=_a.initialState;var state=react_1.useReducer(reducer,initialState!==undefined?initialState:defaultInitialState);return providerFactory({value:state},children)};var useReducerContext=function(){var state=react_1.useContext(context);if(state==null){throw new Error("useReducerContext must be used inside a ReducerProvider.")}return state};return[useReducerContext,ReducerProvider,context]};exports.default=createReducerContext},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useUpdateEffect_1=tslib_1.__importDefault(__webpack_require__(16));function composeMiddleware(chain){return function(context,dispatch){return chain.reduceRight((function(res,middleware){return middleware(context)(res)}),dispatch)}}var createReducer=function(){var middlewares=[];for(var _i=0;_i<arguments.length;_i++){middlewares[_i]=arguments[_i]}var composedMiddleware=composeMiddleware(middlewares);return function(reducer,initialState,initializer){if(initializer===void 0){initializer=function(value){return value}}var ref=react_1.useRef(initializer(initialState));var _a=react_1.useState(ref.current),setState=_a[1];var dispatch=react_1.useCallback((function(action){ref.current=reducer(ref.current,action);setState(ref.current);return action}),[reducer]);var dispatchRef=react_1.useRef(composedMiddleware({getState:function(){return ref.current},dispatch:function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return dispatchRef.current.apply(dispatchRef,args)}},dispatch));useUpdateEffect_1.default((function(){dispatchRef.current=composedMiddleware({getState:function(){return ref.current},dispatch:function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return dispatchRef.current.apply(dispatchRef,args)}},dispatch)}),[dispatch]);return[ref.current,dispatchRef.current]}};exports.default=createReducer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var createStateContext=function(defaultInitialValue){var context=react_1.createContext(undefined);var providerFactory=react_1.createFactory(context.Provider);var StateProvider=function(_a){var children=_a.children,initialValue=_a.initialValue;var state=react_1.useState(initialValue!==undefined?initialValue:defaultInitialValue);return providerFactory({value:state},children)};var useStateContext=function(){var state=react_1.useContext(context);if(state==null){throw new Error("useStateContext must be used inside a StateProvider.")}return state};return[useStateContext,StateProvider,context]};exports.default=createStateContext},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useAsync_1=tslib_1.__importDefault(__webpack_require__(29));var useAsyncRetry=function(fn,deps){if(deps===void 0){deps=[]}var _a=react_1.useState(0),attempt=_a[0],setAttempt=_a[1];var state=useAsync_1.default(fn,tslib_1.__spreadArrays(deps,[attempt]));var stateLoading=state.loading;var retry=react_1.useCallback((function(){if(stateLoading){if(false){}return}setAttempt((function(currentAttempt){return currentAttempt+1}))}),tslib_1.__spreadArrays(deps,[stateLoading]));return tslib_1.__assign(tslib_1.__assign({},state),{retry:retry})};exports.default=useAsyncRetry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var createHTMLMediaHook_1=tslib_1.__importDefault(__webpack_require__(31));var useAudio=createHTMLMediaHook_1.default("audio");exports.default=useAudio},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var parseTimeRanges=function(ranges){var result=[];for(var i=0;i<ranges.length;i++){result.push({start:ranges.start(i),end:ranges.end(i)})}return result};exports.default=parseTimeRanges},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var React=tslib_1.__importStar(__webpack_require__(0));var util_1=__webpack_require__(8);var useState=React.useState,useEffect=React.useEffect;var nav=typeof navigator==="object"?navigator:undefined;var isBatteryApiSupported=nav&&typeof nav.getBattery==="function";function useBatteryMock(){return{isSupported:false}}function useBattery(){var _a=useState({isSupported:true,fetched:false}),state=_a[0],setState=_a[1];useEffect((function(){var isMounted=true;var battery=null;var handleChange=function(){if(!isMounted||!battery){return}var newState={isSupported:true,fetched:true,level:battery.level,charging:battery.charging,dischargingTime:battery.dischargingTime,chargingTime:battery.chargingTime};!util_1.isDeepEqual(state,newState)&&setState(newState)};nav.getBattery().then((function(bat){if(!isMounted){return}battery=bat;util_1.on(battery,"chargingchange",handleChange);util_1.on(battery,"chargingtimechange",handleChange);util_1.on(battery,"dischargingtimechange",handleChange);util_1.on(battery,"levelchange",handleChange);handleChange()}));return function(){isMounted=false;if(battery){util_1.off(battery,"chargingchange",handleChange);util_1.off(battery,"chargingtimechange",handleChange);util_1.off(battery,"dischargingtimechange",handleChange);util_1.off(battery,"levelchange",handleChange)}}}),[]);return state}exports.default=isBatteryApiSupported?useBattery:useBatteryMock},function(module,exports,__webpack_require__){"use strict";module.exports=function equal(a,b){if(a===b)return true;if(a&&b&&typeof a=="object"&&typeof b=="object"){if(a.constructor!==b.constructor)return false;var length,i,keys;if(Array.isArray(a)){length=a.length;if(length!=b.length)return false;for(i=length;i--!==0;)if(!equal(a[i],b[i]))return false;return true}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();keys=Object.keys(a);length=keys.length;if(length!==Object.keys(b).length)return false;for(i=length;i--!==0;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return false;for(i=length;i--!==0;){var key=keys[i];if(key==="_owner"&&a.$$typeof){continue}if(!equal(a[key],b[key]))return false}return true}return a!==a&&b!==b}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useBeforeUnload=function(enabled,message){if(enabled===void 0){enabled=true}var handler=react_1.useCallback((function(event){var finalEnabled=typeof enabled==="function"?enabled():true;if(!finalEnabled){return}event.preventDefault();if(message){event.returnValue=message}return message}),[enabled,message]);react_1.useEffect((function(){if(!enabled){return}window.addEventListener("beforeunload",handler);return function(){return window.removeEventListener("beforeunload",handler)}}),[enabled,handler])};exports.default=useBeforeUnload},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var useToggle_1=tslib_1.__importDefault(__webpack_require__(32));exports.default=useToggle_1.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var util_1=__webpack_require__(8);var defaultEvents=["mousedown","touchstart"];var useClickAway=function(ref,onClickAway,events){if(events===void 0){events=defaultEvents}var savedCallback=react_1.useRef(onClickAway);react_1.useEffect((function(){savedCallback.current=onClickAway}),[onClickAway]);react_1.useEffect((function(){var handler=function(event){var el=ref.current;el&&!el.contains(event.target)&&savedCallback.current(event)};for(var _i=0,events_1=events;_i<events_1.length;_i++){var eventName=events_1[_i];util_1.on(document,eventName,handler)}return function(){for(var _i=0,events_2=events;_i<events_2.length;_i++){var eventName=events_2[_i];util_1.off(document,eventName,handler)}}}),[events,ref])};exports.default=useClickAway},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var js_cookie_1=tslib_1.__importDefault(__webpack_require__(62));var useCookie=function(cookieName){var _a=react_1.useState((function(){return js_cookie_1.default.get(cookieName)||null})),value=_a[0],setValue=_a[1];var updateCookie=react_1.useCallback((function(newValue,options){js_cookie_1.default.set(cookieName,newValue,options);setValue(newValue)}),[cookieName]);var deleteCookie=react_1.useCallback((function(){js_cookie_1.default.remove(cookieName);setValue(null)}),[cookieName]);return[value,updateCookie,deleteCookie]};exports.default=useCookie},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(factory){var registeredInModuleLoader;if(true){!(__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));registeredInModuleLoader=true}if(true){module.exports=factory();registeredInModuleLoader=true}if(!registeredInModuleLoader){var OldCookies=window.Cookies;var api=window.Cookies=factory();api.noConflict=function(){window.Cookies=OldCookies;return api}}})((function(){function extend(){var i=0;var result={};for(;i<arguments.length;i++){var attributes=arguments[i];for(var key in attributes){result[key]=attributes[key]}}return result}function decode(s){return s.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function init(converter){function api(){}function set(key,value,attributes){if(typeof document==="undefined"){return}attributes=extend({path:"/"},api.defaults,attributes);if(typeof attributes.expires==="number"){attributes.expires=new Date(new Date*1+attributes.expires*864e5)}attributes.expires=attributes.expires?attributes.expires.toUTCString():"";try{var result=JSON.stringify(value);if(/^[\{\[]/.test(result)){value=result}}catch(e){}value=converter.write?converter.write(value,key):encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent);key=encodeURIComponent(String(key)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var stringifiedAttributes="";for(var attributeName in attributes){if(!attributes[attributeName]){continue}stringifiedAttributes+="; "+attributeName;if(attributes[attributeName]===true){continue}stringifiedAttributes+="="+attributes[attributeName].split(";")[0]}return document.cookie=key+"="+value+stringifiedAttributes}function get(key,json){if(typeof document==="undefined"){return}var jar={};var cookies=document.cookie?document.cookie.split("; "):[];var i=0;for(;i<cookies.length;i++){var parts=cookies[i].split("=");var cookie=parts.slice(1).join("=");if(!json&&cookie.charAt(0)==='"'){cookie=cookie.slice(1,-1)}try{var name=decode(parts[0]);cookie=(converter.read||converter)(cookie,name)||decode(cookie);if(json){try{cookie=JSON.parse(cookie)}catch(e){}}jar[name]=cookie;if(key===name){break}}catch(e){}}return key?jar[key]:jar}api.set=set;api.get=function(key){return get(key,false)};api.getJSON=function(key){return get(key,true)};api.remove=function(key,attributes){set(key,"",extend(attributes,{expires:-1}))};api.defaults={};api.withConverter=init;return api}return init((function(){}))}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var copy_to_clipboard_1=tslib_1.__importDefault(__webpack_require__(64));var react_1=__webpack_require__(0);var useMountedState_1=tslib_1.__importDefault(__webpack_require__(11));var useSetState_1=tslib_1.__importDefault(__webpack_require__(17));var useCopyToClipboard=function(){var isMounted=useMountedState_1.default();var _a=useSetState_1.default({value:undefined,error:undefined,noUserInteraction:true}),state=_a[0],setState=_a[1];var copyToClipboard=react_1.useCallback((function(value){try{if(false){}var noUserInteraction=copy_to_clipboard_1.default(value);if(!isMounted()){return}setState({value:value,error:undefined,noUserInteraction:noUserInteraction})}catch(error){if(!isMounted()){return}setState({value:undefined,error:error,noUserInteraction:true})}}),[]);return[state,copyToClipboard]};exports.default=useCopyToClipboard},function(module,exports,__webpack_require__){"use strict";var deselectCurrent=__webpack_require__(65);var clipboardToIE11Formatting={"text/plain":"Text","text/html":"Url",default:"Text"};var defaultMessage="Copy to clipboard: #{key}, Enter";function format(message){var copyKey=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return message.replace(/#{\s*key\s*}/g,copyKey)}function copy(text,options){var debug,message,reselectPrevious,range,selection,mark,success=false;if(!options){options={}}debug=options.debug||false;try{reselectPrevious=deselectCurrent();range=document.createRange();selection=document.getSelection();mark=document.createElement("span");mark.textContent=text;mark.style.all="unset";mark.style.position="fixed";mark.style.top=0;mark.style.clip="rect(0, 0, 0, 0)";mark.style.whiteSpace="pre";mark.style.webkitUserSelect="text";mark.style.MozUserSelect="text";mark.style.msUserSelect="text";mark.style.userSelect="text";mark.addEventListener("copy",(function(e){e.stopPropagation();if(options.format){e.preventDefault();if(typeof e.clipboardData==="undefined"){debug&&console.warn("unable to use e.clipboardData");debug&&console.warn("trying IE specific stuff");window.clipboardData.clearData();var format=clipboardToIE11Formatting[options.format]||clipboardToIE11Formatting["default"];window.clipboardData.setData(format,text)}else{e.clipboardData.clearData();e.clipboardData.setData(options.format,text)}}if(options.onCopy){e.preventDefault();options.onCopy(e.clipboardData)}}));document.body.appendChild(mark);range.selectNodeContents(mark);selection.addRange(range);var successful=document.execCommand("copy");if(!successful){throw new Error("copy command was unsuccessful")}success=true}catch(err){debug&&console.error("unable to copy using execCommand: ",err);debug&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(options.format||"text",text);options.onCopy&&options.onCopy(window.clipboardData);success=true}catch(err){debug&&console.error("unable to copy using clipboardData: ",err);debug&&console.error("falling back to prompt");message=format("message"in options?options.message:defaultMessage);window.prompt(message,text)}}finally{if(selection){if(typeof selection.removeRange=="function"){selection.removeRange(range)}else{selection.removeAllRanges()}}if(mark){document.body.removeChild(mark)}reselectPrevious()}return success}module.exports=copy},function(module,exports){module.exports=function(){var selection=document.getSelection();if(!selection.rangeCount){return function(){}}var active=document.activeElement;var ranges=[];for(var i=0;i<selection.rangeCount;i++){ranges.push(selection.getRangeAt(i))}switch(active.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":active.blur();break;default:active=null;break}selection.removeAllRanges();return function(){selection.type==="Caret"&&selection.removeAllRanges();if(!selection.rangeCount){ranges.forEach((function(range){selection.addRange(range)}))}active&&active.focus()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var nano_css_1=__webpack_require__(67);var cssom_1=__webpack_require__(68);var vcssom_1=__webpack_require__(69);var cssToTree_1=__webpack_require__(71);var react_1=__webpack_require__(0);var nano=nano_css_1.create();cssom_1.addon(nano);vcssom_1.addon(nano);var counter=0;var useCss=function(css){var className=react_1.useMemo((function(){return"react-use-css-"+(counter++).toString(36)}),[]);var sheet=react_1.useMemo((function(){return new nano.VSheet}),[]);react_1.useLayoutEffect((function(){var tree={};cssToTree_1.cssToTree(tree,css,"."+className,"");sheet.diff(tree);return function(){sheet.diff({})}}));return className};exports.default=useCss},function(module,exports,__webpack_require__){"use strict";var KEBAB_REGEX=/[A-Z]/g;var hash=function(str){var h=5381,i=str.length;while(i)h=h*33^str.charCodeAt(--i);return"_"+(h>>>0).toString(36)};exports.create=function(config){config=config||{};var assign=config.assign||Object.assign;var client=typeof window==="object";if(false){}var renderer=assign({raw:"",pfx:"_",client:client,assign:assign,stringify:JSON.stringify,kebab:function(prop){return prop.replace(KEBAB_REGEX,"-$&").toLowerCase()},decl:function(key,value){key=renderer.kebab(key);return key+":"+value+";"},hash:function(obj){return hash(renderer.stringify(obj))},selector:function(parent,selector){return parent+(selector[0]===":"?"":" ")+selector},putRaw:function(rawCssRule){renderer.raw+=rawCssRule}},config);if(renderer.client){if(!renderer.sh)document.head.appendChild(renderer.sh=document.createElement("style"));if(false){}renderer.putRaw=function(rawCssRule){if(true){var sheet=renderer.sh.sheet;try{sheet.insertRule(rawCssRule,sheet.cssRules.length)}catch(error){}}else{}}}renderer.put=function(selector,decls,atrule){var str="";var prop,value;var postponed=[];for(prop in decls){value=decls[prop];if(value instanceof Object&&!(value instanceof Array)){postponed.push(prop)}else{if(false){}else{str+=renderer.decl(prop,value,selector,atrule)}}}if(str){if(false){}else{str=selector+"{"+str+"}"}renderer.putRaw(atrule?atrule+"{"+str+"}":str)}for(var i=0;i<postponed.length;i++){prop=postponed[i];if(prop[0]==="@"&&prop!=="@font-face"){renderer.putAt(selector,decls[prop],prop)}else{renderer.put(renderer.selector(selector,prop),decls[prop],atrule)}}};renderer.putAt=renderer.put;return renderer}},function(module,exports,__webpack_require__){"use strict";exports.addon=function(renderer){if(!renderer.client)return;if(false){}document.head.appendChild(renderer.msh=document.createElement("style"));renderer.createRule=function(selector,prelude){var rawCss=selector+"{}";if(prelude)rawCss=prelude+"{"+rawCss+"}";var sheet=prelude?renderer.msh.sheet:renderer.sh.sheet;var index=sheet.insertRule(rawCss,sheet.cssRules.length);var rule=(sheet.cssRules||sheet.rules)[index];rule.index=index;if(prelude){var selectorRule=(rule.cssRules||rule.rules)[0];rule.style=selectorRule.style;rule.styleMap=selectorRule.styleMap}return rule}}},function(module,exports,__webpack_require__){"use strict";var removeRule=__webpack_require__(70).removeRule;exports.addon=function(renderer){if(!renderer.client)return;if(false){}var kebab=renderer.kebab;function VRule(selector,prelude){this.rule=renderer.createRule(selector,prelude);this.decl={}}VRule.prototype.diff=function(newDecl){var oldDecl=this.decl;var style=this.rule.style;var property;for(property in oldDecl)if(newDecl[property]===undefined)style.removeProperty(property);for(property in newDecl)if(newDecl[property]!==oldDecl[property])style.setProperty(kebab(property),newDecl[property]);this.decl=newDecl};VRule.prototype.del=function(){removeRule(this.rule)};function VSheet(){this.tree={}}VSheet.prototype.diff=function(newTree){var oldTree=this.tree;for(var prelude in oldTree){if(newTree[prelude]===undefined){var rules=oldTree[prelude];for(var selector in rules)rules[selector].del()}}for(var prelude in newTree){if(oldTree[prelude]===undefined){for(var selector in newTree[prelude]){var rule=new VRule(selector,prelude);rule.diff(newTree[prelude][selector]);newTree[prelude][selector]=rule}}else{var oldRules=oldTree[prelude];var newRules=newTree[prelude];for(var selector in oldRules)if(!newRules[selector])oldRules[selector].del();for(var selector in newRules){var rule=oldRules[selector];if(rule){rule.diff(newRules[selector]);newRules[selector]=rule}else{rule=new VRule(selector,prelude);rule.diff(newRules[selector]);newRules[selector]=rule}}}}this.tree=newTree};renderer.VRule=VRule;renderer.VSheet=VSheet}},function(module,exports){function removeRule(rule){var maxIndex=rule.index;var sh=rule.parentStyleSheet;var rules=sh.cssRules||sh.rules;maxIndex=Math.max(maxIndex,rules.length-1);while(maxIndex>=0){if(rules[maxIndex]===rule){sh.deleteRule(maxIndex);break}maxIndex--}}exports.removeRule=removeRule},function(module,exports){function cssToTree(tree,css,selector,prelude){var declarations={};var hasDeclarations=false;var key,value;for(key in css){value=css[key];if(typeof value!=="object"){hasDeclarations=true;declarations[key]=value}}if(hasDeclarations){if(!tree[prelude])tree[prelude]={};tree[prelude][selector]=declarations}for(key in css){value=css[key];if(typeof value==="object"){if(key[0]==="@"){cssToTree(tree,value,selector,key)}else{var hasCurrentSymbol=key.indexOf("&")>-1;var selectorParts=selector.split(",");if(hasCurrentSymbol){for(var i=0;i<selectorParts.length;i++){selectorParts[i]=key.replace(/&/g,selectorParts[i])}}else{for(var i=0;i<selectorParts.length;i++){selectorParts[i]=selectorParts[i]+" "+key}}cssToTree(tree,value,selectorParts.join(","),prelude)}}}}exports.cssToTree=cssToTree},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useTimeoutFn_1=tslib_1.__importDefault(__webpack_require__(26));function useDebounce(fn,ms,deps){if(ms===void 0){ms=0}if(deps===void 0){deps=[]}var _a=useTimeoutFn_1.default(fn,ms),isReady=_a[0],cancel=_a[1],reset=_a[2];react_1.useEffect(reset,deps);return[isReady,cancel]}exports.default=useDebounce},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var util_1=__webpack_require__(8);var useCustomCompareEffect_1=tslib_1.__importDefault(__webpack_require__(25));var isPrimitive=function(val){return val!==Object(val)};var useDeepCompareEffect=function(effect,deps){if(false){}useCustomCompareEffect_1.default(effect,deps,util_1.isDeepEqual)};exports.default=useDeepCompareEffect},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useDefault=function(defaultValue,initialValue){var _a=react_1.useState(initialValue),value=_a[0],setValue=_a[1];if(value===undefined||value===null){return[defaultValue,setValue]}return[value,setValue]};exports.default=useDefault},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var React=tslib_1.__importStar(__webpack_require__(0));var useMountedState_1=tslib_1.__importDefault(__webpack_require__(11));var useState=React.useState,useMemo=React.useMemo,useCallback=React.useCallback,useEffect=React.useEffect;var noop=function(){};var createProcess=function(options,mounted){return function(dataTransfer,event){var uri=dataTransfer.getData("text/uri-list");if(uri){(options.onUri||noop)(uri,event);return}if(dataTransfer.files&&dataTransfer.files.length){(options.onFiles||noop)(Array.from(dataTransfer.files),event);return}if(dataTransfer.items&&dataTransfer.items.length){dataTransfer.items[0].getAsString((function(text){if(mounted){(options.onText||noop)(text,event)}}))}}};var useDrop=function(options,args){if(options===void 0){options={}}if(args===void 0){args=[]}var onFiles=options.onFiles,onText=options.onText,onUri=options.onUri;var isMounted=useMountedState_1.default();var _a=useState(false),over=_a[0],setOverRaw=_a[1];var setOver=useCallback(setOverRaw,[]);var process=useMemo((function(){return createProcess(options,isMounted())}),[onFiles,onText,onUri]);useEffect((function(){var onDragOver=function(event){event.preventDefault();setOver(true)};var onDragEnter=function(event){event.preventDefault();setOver(true)};var onDragLeave=function(){setOver(false)};var onDragExit=function(){setOver(false)};var onDrop=function(event){event.preventDefault();setOver(false);process(event.dataTransfer,event)};var onPaste=function(event){process(event.clipboardData,event)};document.addEventListener("dragover",onDragOver);document.addEventListener("dragenter",onDragEnter);document.addEventListener("dragleave",onDragLeave);document.addEventListener("dragexit",onDragExit);document.addEventListener("drop",onDrop);if(onText){document.addEventListener("paste",onPaste)}return function(){document.removeEventListener("dragover",onDragOver);document.removeEventListener("dragenter",onDragEnter);document.removeEventListener("dragleave",onDragLeave);document.removeEventListener("dragexit",onDragExit);document.removeEventListener("drop",onDrop);document.removeEventListener("paste",onPaste)}}),tslib_1.__spreadArrays([process],args));return{over:over}};exports.default=useDrop},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useMountedState_1=tslib_1.__importDefault(__webpack_require__(11));var noop=function(){};var createProcess=function(options,mounted){return function(dataTransfer,event){var uri=dataTransfer.getData("text/uri-list");if(uri){(options.onUri||noop)(uri,event);return}if(dataTransfer.files&&dataTransfer.files.length){(options.onFiles||noop)(Array.from(dataTransfer.files),event);return}if(dataTransfer.items&&dataTransfer.items.length){dataTransfer.items[0].getAsString((function(text){if(mounted){(options.onText||noop)(text,event)}}))}}};var createBond=function(process,setOver){return{onDragOver:function(event){event.preventDefault()},onDragEnter:function(event){event.preventDefault();setOver(true)},onDragLeave:function(){setOver(false)},onDrop:function(event){event.preventDefault();event.persist();setOver(false);process(event.dataTransfer,event)},onPaste:function(event){event.persist();process(event.clipboardData,event)}}};var useDropArea=function(options){if(options===void 0){options={}}var onFiles=options.onFiles,onText=options.onText,onUri=options.onUri;var isMounted=useMountedState_1.default();var _a=react_1.useState(false),over=_a[0],setOver=_a[1];var process=react_1.useMemo((function(){return createProcess(options,isMounted())}),[onFiles,onText,onUri]);var bond=react_1.useMemo((function(){return createBond(process,setOver)}),[process,setOver]);return[bond,{over:over}]};exports.default=useDropArea},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);function useEnsuredForwardedRef(forwardedRef){var ensuredRef=react_1.useRef(forwardedRef&&forwardedRef.current);react_1.useEffect((function(){if(!forwardedRef){return}forwardedRef.current=ensuredRef.current}),[forwardedRef]);return ensuredRef}exports.default=useEnsuredForwardedRef;function ensuredForwardRef(Component){return react_1.forwardRef((function(props,ref){var ensuredRef=useEnsuredForwardedRef(ref);return Component(props,ensuredRef)}))}exports.ensuredForwardRef=ensuredForwardRef},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useError=function(){var _a=react_1.useState(null),error=_a[0],setError=_a[1];react_1.useEffect((function(){if(error){throw error}}),[error]);var dispatchError=react_1.useCallback((function(err){setError(err)}),[]);return dispatchError};exports.default=useError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useFavicon=function(href){react_1.useEffect((function(){var link=document.querySelector("link[rel*='icon']")||document.createElement("link");link.type="image/x-icon";link.rel="shortcut icon";link.href=href;document.getElementsByTagName("head")[0].appendChild(link)}),[href])};exports.default=useFavicon},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var screenfull_1=tslib_1.__importDefault(__webpack_require__(81));var noop=function(){};var useFullscreen=function(ref,on,options){if(options===void 0){options={}}var video=options.video,_a=options.onClose,onClose=_a===void 0?noop:_a;var _b=react_1.useState(on),isFullscreen=_b[0],setIsFullscreen=_b[1];react_1.useLayoutEffect((function(){if(!on){return}if(!ref.current){return}var onWebkitEndFullscreen=function(){video.current.removeEventListener("webkitendfullscreen",onWebkitEndFullscreen);onClose()};var onChange=function(){if(screenfull_1.default.isEnabled){var isScreenfullFullscreen=screenfull_1.default.isFullscreen;setIsFullscreen(isScreenfullFullscreen);if(!isScreenfullFullscreen){onClose()}}};if(screenfull_1.default.isEnabled){try{screenfull_1.default.request(ref.current);setIsFullscreen(true)}catch(error){onClose(error);setIsFullscreen(false)}screenfull_1.default.on("change",onChange)}else if(video&&video.current&&video.current.webkitEnterFullscreen){video.current.webkitEnterFullscreen();video.current.addEventListener("webkitendfullscreen",onWebkitEndFullscreen);setIsFullscreen(true)}else{onClose();setIsFullscreen(false)}return function(){setIsFullscreen(false);if(screenfull_1.default.isEnabled){try{screenfull_1.default.off("change",onChange);screenfull_1.default.exit()}catch(_a){}}else if(video&&video.current&&video.current.webkitExitFullscreen){video.current.removeEventListener("webkitendfullscreen",onWebkitEndFullscreen);video.current.webkitExitFullscreen()}}}),[on,video,ref]);return isFullscreen};exports.default=useFullscreen},function(module,exports,__webpack_require__){
/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/
(function(){"use strict";var document=typeof window!=="undefined"&&typeof window.document!=="undefined"?window.document:{};var isCommonjs=true&&module.exports;var fn=function(){var val;var fnMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];var i=0;var l=fnMap.length;var ret={};for(;i<l;i++){val=fnMap[i];if(val&&val[1]in document){for(i=0;i<val.length;i++){ret[fnMap[0][i]]=val[i]}return ret}}return false}();var eventNameMap={change:fn.fullscreenchange,error:fn.fullscreenerror};var screenfull={request:function(element,options){return new Promise(function(resolve,reject){var onFullScreenEntered=function(){this.off("change",onFullScreenEntered);resolve()}.bind(this);this.on("change",onFullScreenEntered);element=element||document.documentElement;var returnPromise=element[fn.requestFullscreen](options);if(returnPromise instanceof Promise){returnPromise.then(onFullScreenEntered).catch(reject)}}.bind(this))},exit:function(){return new Promise(function(resolve,reject){if(!this.isFullscreen){resolve();return}var onFullScreenExit=function(){this.off("change",onFullScreenExit);resolve()}.bind(this);this.on("change",onFullScreenExit);var returnPromise=document[fn.exitFullscreen]();if(returnPromise instanceof Promise){returnPromise.then(onFullScreenExit).catch(reject)}}.bind(this))},toggle:function(element,options){return this.isFullscreen?this.exit():this.request(element,options)},onchange:function(callback){this.on("change",callback)},onerror:function(callback){this.on("error",callback)},on:function(event,callback){var eventName=eventNameMap[event];if(eventName){document.addEventListener(eventName,callback,false)}},off:function(event,callback){var eventName=eventNameMap[event];if(eventName){document.removeEventListener(eventName,callback,false)}},raw:fn};if(!fn){if(isCommonjs){module.exports={isEnabled:false}}else{window.screenfull={isEnabled:false}}return}Object.defineProperties(screenfull,{isFullscreen:{get:function(){return Boolean(document[fn.fullscreenElement])}},element:{enumerable:true,get:function(){return document[fn.fullscreenElement]}},isEnabled:{enumerable:true,get:function(){return Boolean(document[fn.fullscreenEnabled])}}});if(isCommonjs){module.exports=screenfull}else{window.screenfull=screenfull}})()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useGeolocation=function(options){var _a=react_1.useState({loading:true,accuracy:null,altitude:null,altitudeAccuracy:null,heading:null,latitude:null,longitude:null,speed:null,timestamp:Date.now()}),state=_a[0],setState=_a[1];var mounted=true;var watchId;var onEvent=function(event){if(mounted){setState({loading:false,accuracy:event.coords.accuracy,altitude:event.coords.altitude,altitudeAccuracy:event.coords.altitudeAccuracy,heading:event.coords.heading,latitude:event.coords.latitude,longitude:event.coords.longitude,speed:event.coords.speed,timestamp:event.timestamp})}};var onEventError=function(error){return mounted&&setState((function(oldState){return tslib_1.__assign(tslib_1.__assign({},oldState),{loading:false,error:error})}))};react_1.useEffect((function(){navigator.geolocation.getCurrentPosition(onEvent,onEventError,options);watchId=navigator.geolocation.watchPosition(onEvent,onEventError,options);return function(){mounted=false;navigator.geolocation.clearWatch(watchId)}}),[]);return state};exports.default=useGeolocation},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useUpdate_1=tslib_1.__importDefault(__webpack_require__(14));var useGetSetState=function(initialState){if(initialState===void 0){initialState={}}if(false){}var update=useUpdate_1.default();var state=react_1.useRef(tslib_1.__assign({},initialState));var get=react_1.useCallback((function(){return state.current}),[]);var set=react_1.useCallback((function(patch){if(!patch){return}if(false){}Object.assign(state.current,patch);update()}),[]);return[get,set]};exports.default=useGetSetState},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var set_harmonic_interval_1=__webpack_require__(85);var useHarmonicIntervalFn=function(fn,delay){if(delay===void 0){delay=0}var latestCallback=react_1.useRef((function(){}));react_1.useEffect((function(){latestCallback.current=fn}));react_1.useEffect((function(){if(delay!==null){var interval_1=set_harmonic_interval_1.setHarmonicInterval((function(){return latestCallback.current()}),delay);return function(){return set_harmonic_interval_1.clearHarmonicInterval(interval_1)}}return undefined}),[delay])};exports.default=useHarmonicIntervalFn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var counter=0;var buckets={};var setHarmonicInterval=function(fn,ms){var _a;var id=counter++;if(buckets[ms]){buckets[ms].listeners[id]=fn}else{var timer=setInterval((function(){var listeners=buckets[ms].listeners;var didThrow=false;var lastError;for(var _i=0,_a=Object.values(listeners);_i<_a.length;_i++){var listener=_a[_i];try{listener()}catch(error){didThrow=true;lastError=error}}if(didThrow)throw lastError}),ms);buckets[ms]={ms:ms,timer:timer,listeners:(_a={},_a[id]=fn,_a)}}return{bucket:buckets[ms],id:id}};var clearHarmonicInterval=function(_a){var bucket=_a.bucket,id=_a.id;delete bucket.listeners[id];var hasListeners=false;for(var listener in bucket.listeners){hasListeners=true;break}if(!hasListeners){clearInterval(bucket.timer);delete buckets[bucket.ms]}};exports.clearHarmonicInterval=clearHarmonicInterval;exports.setHarmonicInterval=setHarmonicInterval},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var React=tslib_1.__importStar(__webpack_require__(0));var useState=React.useState;var noop=function(){};var useHover=function(element){var _a=useState(false),state=_a[0],setState=_a[1];var onMouseEnter=function(originalOnMouseEnter){return function(event){(originalOnMouseEnter||noop)(event);setState(true)}};var onMouseLeave=function(originalOnMouseLeave){return function(event){(originalOnMouseLeave||noop)(event);setState(false)}};if(typeof element==="function"){element=element(state)}var el=React.cloneElement(element,{onMouseEnter:onMouseEnter(element.props.onMouseEnter),onMouseLeave:onMouseLeave(element.props.onMouseLeave)});return[el,state]};exports.default=useHover},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var throttle_debounce_1=__webpack_require__(88);var util_1=__webpack_require__(8);var defaultEvents=["mousemove","mousedown","resize","keydown","touchstart","wheel"];var oneMinute=6e4;var useIdle=function(ms,initialState,events){if(ms===void 0){ms=oneMinute}if(initialState===void 0){initialState=false}if(events===void 0){events=defaultEvents}var _a=react_1.useState(initialState),state=_a[0],setState=_a[1];react_1.useEffect((function(){var mounted=true;var timeout;var localState=state;var set=function(newState){if(mounted){localState=newState;setState(newState)}};var onEvent=throttle_debounce_1.throttle(50,(function(){if(localState){set(false)}clearTimeout(timeout);timeout=setTimeout((function(){return set(true)}),ms)}));var onVisibility=function(){if(!document.hidden){onEvent()}};for(var i=0;i<events.length;i++){util_1.on(window,events[i],onEvent)}util_1.on(document,"visibilitychange",onVisibility);timeout=setTimeout((function(){return set(true)}),ms);return function(){mounted=false;for(var i=0;i<events.length;i++){util_1.off(window,events[i],onEvent)}util_1.off(document,"visibilitychange",onVisibility)}}),[ms,events]);return state};exports.default=useIdle},function(module,exports,__webpack_require__){(function(global,factory){true?factory(exports):undefined})(this,(function(exports){"use strict";function throttle(delay,noTrailing,callback,debounceMode){var timeoutID;var cancelled=false;var lastExec=0;function clearExistingTimeout(){if(timeoutID){clearTimeout(timeoutID)}}function cancel(){clearExistingTimeout();cancelled=true}if(typeof noTrailing!=="boolean"){debounceMode=callback;callback=noTrailing;noTrailing=undefined}function wrapper(){for(var _len=arguments.length,arguments_=new Array(_len),_key=0;_key<_len;_key++){arguments_[_key]=arguments[_key]}var self=this;var elapsed=Date.now()-lastExec;if(cancelled){return}function exec(){lastExec=Date.now();callback.apply(self,arguments_)}function clear(){timeoutID=undefined}if(debounceMode&&!timeoutID){exec()}clearExistingTimeout();if(debounceMode===undefined&&elapsed>delay){exec()}else if(noTrailing!==true){timeoutID=setTimeout(debounceMode?clear:exec,debounceMode===undefined?delay-elapsed:delay)}}wrapper.cancel=cancel;return wrapper}function debounce(delay,atBegin,callback){return callback===undefined?throttle(delay,atBegin,false):throttle(delay,callback,atBegin!==false)}exports.debounce=debounce;exports.throttle=throttle;Object.defineProperty(exports,"__esModule",{value:true})}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useIntersection=function(ref,options){var _a=react_1.useState(null),intersectionObserverEntry=_a[0],setIntersectionObserverEntry=_a[1];react_1.useEffect((function(){if(ref.current&&typeof IntersectionObserver==="function"){var handler=function(entries){setIntersectionObserverEntry(entries[0])};var observer_1=new IntersectionObserver(handler,options);observer_1.observe(ref.current);return function(){setIntersectionObserverEntry(null);observer_1.disconnect()}}return function(){}}),[ref.current,options.threshold,options.root,options.rootMargin]);return intersectionObserverEntry};exports.default=useIntersection},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useInterval=function(callback,delay){var savedCallback=react_1.useRef((function(){}));react_1.useEffect((function(){savedCallback.current=callback}));react_1.useEffect((function(){if(delay!==null){var interval_1=setInterval((function(){return savedCallback.current()}),delay||0);return function(){return clearInterval(interval_1)}}return undefined}),[delay])};exports.default=useInterval},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var createBreakpoint=function(breakpoints){if(breakpoints===void 0){breakpoints={laptopL:1440,laptop:1024,tablet:768}}return function(){var _a=react_1.useState(0),screen=_a[0],setScreen=_a[1];react_1.useEffect((function(){var setSideScreen=function(){setScreen(window.innerWidth)};setSideScreen();window.addEventListener("resize",setSideScreen);return function(){window.removeEventListener("resize",setSideScreen)}}));var sortedBreakpoints=react_1.useMemo((function(){return Object.entries(breakpoints).sort((function(a,b){return a[1]>=b[1]?1:-1}))}),[breakpoints]);var result=sortedBreakpoints.reduce((function(acc,_a){var name=_a[0],width=_a[1];if(screen>=width){return name}else{return acc}}),sortedBreakpoints[0][0]);return result}};exports.default=createBreakpoint},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var useKeyPress_1=tslib_1.__importDefault(__webpack_require__(39));var useUpdateEffect_1=tslib_1.__importDefault(__webpack_require__(16));var useKeyPressEvent=function(key,keydown,keyup,useKeyPress){if(useKeyPress===void 0){useKeyPress=useKeyPress_1.default}var _a=useKeyPress(key),pressed=_a[0],event=_a[1];useUpdateEffect_1.default((function(){if(!pressed&&keyup){keyup(event)}else if(pressed&&keydown){keydown(event)}}),[pressed])};exports.default=useKeyPressEvent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useLifecycles=function(mount,unmount){react_1.useEffect((function(){if(mount){mount()}return function(){if(unmount){unmount()}}}),[])};exports.default=useLifecycles},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var util_1=__webpack_require__(8);var useLocalStorage=function(key,initialValue,options){if(!util_1.isClient){return[initialValue,function(){}]}var serializer=options?options.raw?String:options.serializer:JSON.stringify;var deserializer=options?options.raw?String:options.deserializer:JSON.parse;var _a=react_1.useState((function(){try{var localStorageValue=localStorage.getItem(key);if(localStorageValue!==null){return deserializer(localStorageValue)}else{initialValue&&localStorage.setItem(key,serializer(initialValue));return initialValue}}catch(_a){return initialValue}})),state=_a[0],setState=_a[1];react_1.useEffect((function(){try{localStorage.setItem(key,serializer(state))}catch(_a){}}),[state]);return[state,setState]};exports.default=useLocalStorage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var util_1=__webpack_require__(8);var patchHistoryMethod=function(method){var original=history[method];history[method]=function(state){var result=original.apply(this,arguments);var event=new Event(method.toLowerCase());event.state=state;window.dispatchEvent(event);return result}};if(util_1.isClient){patchHistoryMethod("pushState");patchHistoryMethod("replaceState")}var useLocationServer=function(){return{trigger:"load",length:1}};var buildState=function(trigger){var state=history.state,length=history.length;var hash=location.hash,host=location.host,hostname=location.hostname,href=location.href,origin=location.origin,pathname=location.pathname,port=location.port,protocol=location.protocol,search=location.search;return{trigger:trigger,state:state,length:length,hash:hash,host:host,hostname:hostname,href:href,origin:origin,pathname:pathname,port:port,protocol:protocol,search:search}};var useLocationBrowser=function(){var _a=react_1.useState(buildState("load")),state=_a[0],setState=_a[1];react_1.useEffect((function(){var onPopstate=function(){return setState(buildState("popstate"))};var onPushstate=function(){return setState(buildState("pushstate"))};var onReplacestate=function(){return setState(buildState("replacestate"))};util_1.on(window,"popstate",onPopstate);util_1.on(window,"pushstate",onPushstate);util_1.on(window,"replacestate",onReplacestate);return function(){util_1.off(window,"popstate",onPopstate);util_1.off(window,"pushstate",onPushstate);util_1.off(window,"replacestate",onReplacestate)}}),[]);return state};var hasEventConstructor=typeof Event==="function";exports.default=util_1.isClient&&hasEventConstructor?useLocationBrowser:useLocationServer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);function getClosestBody(el){if(!el){return null}else if(el.tagName==="BODY"){return el}else if(el.tagName==="IFRAME"){var document_1=el.contentDocument;return document_1?document_1.body:null}else if(!el.offsetParent){return null}return getClosestBody(el.offsetParent)}exports.getClosestBody=getClosestBody;function preventDefault(rawEvent){var e=rawEvent||window.event;if(e.touches.length>1)return true;if(e.preventDefault)e.preventDefault();return false}var isIosDevice=typeof window!=="undefined"&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform);var bodies=new Map;var doc=typeof document==="object"?document:undefined;var documentListenerAdded=false;exports.default=!doc?function useLockBodyMock(_locked,_elementRef){if(_locked===void 0){_locked=true}}:function useLockBody(locked,elementRef){if(locked===void 0){locked=true}elementRef=elementRef||react_1.useRef(doc.body);react_1.useEffect((function(){var body=getClosestBody(elementRef.current);if(!body){return}var bodyInfo=bodies.get(body);if(locked){if(!bodyInfo){bodies.set(body,{counter:1,initialOverflow:body.style.overflow});if(isIosDevice){if(!documentListenerAdded){document.addEventListener("touchmove",preventDefault,{passive:false});documentListenerAdded=true}}else{body.style.overflow="hidden"}}else{bodies.set(body,{counter:bodyInfo.counter+1,initialOverflow:bodyInfo.initialOverflow})}}else{if(bodyInfo){if(bodyInfo.counter===1){bodies.delete(body);if(isIosDevice){body.ontouchmove=null;if(documentListenerAdded){document.removeEventListener("touchmove",preventDefault);documentListenerAdded=false}}else{body.style.overflow=bodyInfo.initialOverflow}}else{bodies.set(body,{counter:bodyInfo.counter-1,initialOverflow:bodyInfo.initialOverflow})}}}}),[locked,elementRef.current])}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var useEffectOnce_1=tslib_1.__importDefault(__webpack_require__(18));var useUpdateEffect_1=tslib_1.__importDefault(__webpack_require__(16));var useLogger=function(componentName){var rest=[];for(var _i=1;_i<arguments.length;_i++){rest[_i-1]=arguments[_i]}useEffectOnce_1.default((function(){console.log.apply(console,tslib_1.__spreadArrays([componentName+" mounted"],rest));return function(){return console.log(componentName+" unmounted")}}));useUpdateEffect_1.default((function(){console.log.apply(console,tslib_1.__spreadArrays([componentName+" updated"],rest))}))};exports.default=useLogger},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var isTouchEvent=function(event){return"touches"in event};var preventDefault=function(event){if(!isTouchEvent(event))return;if(event.touches.length<2&&event.preventDefault){event.preventDefault()}};var useLongPress=function(callback,_a){var _b=_a===void 0?{}:_a,_c=_b.isPreventDefault,isPreventDefault=_c===void 0?true:_c,_d=_b.delay,delay=_d===void 0?300:_d;var timeout=react_1.useRef();var target=react_1.useRef();var start=react_1.useCallback((function(event){if(isPreventDefault&&event.target){event.target.addEventListener("touchend",preventDefault,{passive:false});target.current=event.target}timeout.current=setTimeout((function(){return callback(event)}),delay)}),[callback,delay]);var clear=react_1.useCallback((function(){timeout.current&&clearTimeout(timeout.current);if(isPreventDefault&&target.current){target.current.removeEventListener("touchend",preventDefault)}}),[]);return{onMouseDown:function(e){return start(e)},onTouchStart:function(e){return start(e)},onMouseUp:clear,onMouseLeave:clear,onTouchEnd:clear}};exports.default=useLongPress},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useMap=function(initialMap){if(initialMap===void 0){initialMap={}}var _a=react_1.useState(initialMap),map=_a[0],set=_a[1];var stableActions=react_1.useMemo((function(){return{set:function(key,entry){set((function(prevMap){var _a;return tslib_1.__assign(tslib_1.__assign({},prevMap),(_a={},_a[key]=entry,_a))}))},setAll:function(newMap){set(newMap)},remove:function(key){set((function(prevMap){var _a=prevMap,_b=key,omit=_a[_b],rest=tslib_1.__rest(_a,[typeof _b==="symbol"?_b:_b+""]);return rest}))},reset:function(){return set(initialMap)}}}),[set]);var utils=tslib_1.__assign({get:react_1.useCallback((function(key){return map[key]}),[map])},stableActions);return[map,utils]};exports.default=useMap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var util_1=__webpack_require__(8);var useMedia=function(query,defaultState){if(defaultState===void 0){defaultState=false}var _a=react_1.useState(util_1.isClient?function(){return window.matchMedia(query).matches}:defaultState),state=_a[0],setState=_a[1];react_1.useEffect((function(){var mounted=true;var mql=window.matchMedia(query);var onChange=function(){if(!mounted){return}setState(!!mql.matches)};mql.addListener(onChange);setState(mql.matches);return function(){mounted=false;mql.removeListener(onChange)}}),[query]);return state};exports.default=useMedia},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var util_1=__webpack_require__(8);var noop=function(){};var useMediaDevices=function(){var _a=react_1.useState({}),state=_a[0],setState=_a[1];react_1.useEffect((function(){var mounted=true;var onChange=function(){navigator.mediaDevices.enumerateDevices().then((function(devices){if(mounted){setState({devices:devices.map((function(_a){var deviceId=_a.deviceId,groupId=_a.groupId,kind=_a.kind,label=_a.label;return{deviceId:deviceId,groupId:groupId,kind:kind,label:label}}))})}})).catch(noop)};util_1.on(navigator.mediaDevices,"devicechange",onChange);onChange();return function(){mounted=false;util_1.off(navigator.mediaDevices,"devicechange",onChange)}}),[]);return state};var useMediaDevicesMock=function(){return{}};exports.default=typeof navigator==="object"&&!!navigator.mediaDevices?useMediaDevices:useMediaDevicesMock},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);function useMediatedState(mediator,initialState){var mediatorFn=react_1.useRef(mediator);var _a=react_1.useState(initialState),state=_a[0],setMediatedState=_a[1];var setState=react_1.useCallback((function(newState){if(mediatorFn.current.length===2){mediatorFn.current(newState,setMediatedState)}else{setMediatedState(mediatorFn.current(newState))}}),[state]);return[state,setState]}exports.useMediatedState=useMediatedState},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useMethods=function(createMethods,initialState){var reducer=react_1.useMemo((function(){return function(reducerState,action){var _a;return(_a=createMethods(reducerState))[action.type].apply(_a,action.payload)}}),[createMethods]);var _a=react_1.useReducer(reducer,initialState),state=_a[0],dispatch=_a[1];var wrappedMethods=react_1.useMemo((function(){var actionTypes=Object.keys(createMethods(initialState));return actionTypes.reduce((function(acc,type){acc[type]=function(){var payload=[];for(var _i=0;_i<arguments.length;_i++){payload[_i]=arguments[_i]}return dispatch({type:type,payload:payload})};return acc}),{})}),[createMethods,initialState]);return[state,wrappedMethods]};exports.default=useMethods},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var util_1=__webpack_require__(8);var defaultState={acceleration:{x:null,y:null,z:null},accelerationIncludingGravity:{x:null,y:null,z:null},rotationRate:{alpha:null,beta:null,gamma:null},interval:16};var useMotion=function(initialState){if(initialState===void 0){initialState=defaultState}var _a=react_1.useState(initialState),state=_a[0],setState=_a[1];react_1.useEffect((function(){var handler=function(event){var acceleration=event.acceleration,accelerationIncludingGravity=event.accelerationIncludingGravity,rotationRate=event.rotationRate,interval=event.interval;setState({acceleration:{x:acceleration.x,y:acceleration.y,z:acceleration.z},accelerationIncludingGravity:{x:accelerationIncludingGravity.x,y:accelerationIncludingGravity.y,z:accelerationIncludingGravity.z},rotationRate:{alpha:rotationRate.alpha,beta:rotationRate.beta,gamma:rotationRate.gamma},interval:interval})};util_1.on(window,"devicemotion",handler);return function(){util_1.off(window,"devicemotion",handler)}}),[]);return state};exports.default=useMotion},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var useHoverDirty_1=tslib_1.__importDefault(__webpack_require__(36));var useMouse_1=tslib_1.__importDefault(__webpack_require__(42));var nullRef={current:null};var useMouseHovered=function(ref,options){if(options===void 0){options={}}var whenHovered=!!options.whenHovered;var bound=!!options.bound;var isHovered=useHoverDirty_1.default(ref,whenHovered);var state=useMouse_1.default(whenHovered&&!isHovered?nullRef:ref);if(bound){state.elX=Math.max(0,Math.min(state.elX,state.elW));state.elY=Math.max(0,Math.min(state.elY,state.elH))}return state};exports.default=useMouseHovered},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var util_1=__webpack_require__(8);var getConnection=function(){if(typeof navigator!=="object"){return null}var nav=navigator;return nav.connection||nav.mozConnection||nav.webkitConnection};var getConnectionState=function(){var connection=getConnection();if(!connection){return{}}var downlink=connection.downlink,downlinkMax=connection.downlinkMax,effectiveType=connection.effectiveType,type=connection.type,rtt=connection.rtt;return{downlink:downlink,downlinkMax:downlinkMax,effectiveType:effectiveType,type:type,rtt:rtt}};var useNetwork=function(initialState){if(initialState===void 0){initialState={}}var _a=react_1.useState(initialState),state=_a[0],setState=_a[1];react_1.useEffect((function(){var localState=state;var localSetState=function(patch){localState=tslib_1.__assign(tslib_1.__assign({},localState),patch);setState(localState)};var connection=getConnection();var onOnline=function(){localSetState({online:true,since:new Date})};var onOffline=function(){localSetState({online:false,since:new Date})};var onConnectionChange=function(){localSetState(getConnectionState())};util_1.on(window,"online",onOnline);util_1.on(window,"offline",onOffline);if(connection){util_1.on(connection,"change",onConnectionChange);localSetState(tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({},state),{online:navigator.onLine,since:undefined}),getConnectionState()))}return function(){util_1.off(window,"online",onOnline);util_1.off(window,"offline",onOffline);if(connection){util_1.off(connection,"change",onConnectionChange)}}}),[]);return state};exports.default=useNetwork},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var useCounter_1=tslib_1.__importDefault(__webpack_require__(33));exports.default=useCounter_1.default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useIsomorphicLayoutEffect_1=tslib_1.__importDefault(__webpack_require__(37));function useObservable(observable$,initialValue){var _a=react_1.useState(initialValue),value=_a[0],update=_a[1];useIsomorphicLayoutEffect_1.default((function(){var s=observable$.subscribe(update);return function(){return s.unsubscribe()}}),[observable$]);return value}exports.default=useObservable},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var util_1=__webpack_require__(8);var defaultState={angle:0,type:"landscape-primary"};var useOrientation=function(initialState){if(initialState===void 0){initialState=defaultState}var _a=react_1.useState(initialState),state=_a[0],setState=_a[1];react_1.useEffect((function(){var mounted=true;var onChange=function(){if(mounted){var orientation_1=screen.orientation;if(orientation_1){var angle=orientation_1.angle,type=orientation_1.type;setState({angle:angle,type:type})}else if(window.orientation){setState({angle:typeof window.orientation==="number"?window.orientation:0,type:""})}else{setState(initialState)}}};util_1.on(window,"orientationchange",onChange);onChange();return function(){mounted=false;util_1.off(window,"orientationchange",onChange)}}),[]);return state};exports.default=useOrientation},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var usePageLeave=function(onPageLeave,args){if(args===void 0){args=[]}react_1.useEffect((function(){if(!onPageLeave){return}var handler=function(event){event=event?event:window.event;var from=event.relatedTarget||event.toElement;if(!from||from.nodeName==="HTML"){onPageLeave()}};document.addEventListener("mouseout",handler);return function(){document.removeEventListener("mouseout",handler)}}),args)};exports.default=usePageLeave},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var util_1=__webpack_require__(8);var noop=function(){};var usePermission=function(permissionDesc){var mounted=true;var permissionStatus=null;var _a=react_1.useState(""),state=_a[0],setState=_a[1];var onChange=function(){if(mounted&&permissionStatus){setState(permissionStatus.state)}};var changeState=function(){onChange();util_1.on(permissionStatus,"change",onChange)};react_1.useEffect((function(){navigator.permissions.query(permissionDesc).then((function(status){permissionStatus=status;changeState()})).catch(noop);return function(){mounted=false;permissionStatus&&util_1.off(permissionStatus,"change",onChange)}}),[]);return state};exports.default=usePermission},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var usePrevious=function(state){var ref=react_1.useRef();react_1.useEffect((function(){ref.current=state}));return ref.current};exports.default=usePrevious},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useFirstMountState_1=__webpack_require__(22);var strictEquals=function(prev,next){return prev===next};function usePreviousDistinct(value,compare){if(compare===void 0){compare=strictEquals}var prevRef=react_1.useRef();var curRef=react_1.useRef(value);var isFirstMount=useFirstMountState_1.useFirstMountState();if(!isFirstMount&&!compare(curRef.current,value)){prevRef.current=curRef.current;curRef.current=value}return prevRef.current}exports.default=usePreviousDistinct},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useMountedState_1=tslib_1.__importDefault(__webpack_require__(11));var usePromise=function(){var isMounted=useMountedState_1.default();return react_1.useCallback((function(promise){return new Promise((function(resolve,reject){var onValue=function(value){isMounted()&&resolve(value)};var onError=function(error){isMounted()&&reject(error)};promise.then(onValue,onError)}))}),[])};exports.default=usePromise},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useQueue=function(initialValue){if(initialValue===void 0){initialValue=[]}var _a=react_1.useState(initialValue),state=_a[0],set=_a[1];return{add:function(value){set((function(queue){return tslib_1.__spreadArrays(queue,[value])}))},remove:function(){var result;set((function(_a){var first=_a[0],rest=_a.slice(1);result=first;return rest}));return result},get first(){return state[0]},get last(){return state[state.length-1]},get size(){return state.length}}};exports.default=useQueue},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);function useRafLoop(callback){var raf=react_1.useRef(null);var _a=react_1.useState(true),isActive=_a[0],setIsActive=_a[1];function loopStep(){callback();raf.current=requestAnimationFrame(loopStep)}function loopStop(){setIsActive(false)}function loopStart(){setIsActive(true)}function clearCurrentLoop(){raf.current&&cancelAnimationFrame(raf.current)}react_1.useEffect((function(){return clearCurrentLoop}),[]);react_1.useEffect((function(){clearCurrentLoop();isActive&&(raf.current=requestAnimationFrame(loopStep));return clearCurrentLoop}),[isActive,callback]);return[loopStop,isActive,loopStart]}exports.default=useRafLoop},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var getValue=function(search,param){return new URLSearchParams(search).get(param)};var useSearchParam=function(param){var _a=react_1.useState((function(){return getValue(location.search,param)})),value=_a[0],setValue=_a[1];react_1.useEffect((function(){var onChange=function(){setValue(getValue(location.search,param))};window.addEventListener("popstate",onChange);window.addEventListener("pushstate",onChange);window.addEventListener("replacestate",onChange);return function(){window.removeEventListener("popstate",onChange);window.removeEventListener("pushstate",onChange);window.removeEventListener("replacestate",onChange)}}),[]);return value};var useSearchParamServer=function(){return null};exports.default=typeof window==="object"?useSearchParam:useSearchParamServer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useRafState_1=tslib_1.__importDefault(__webpack_require__(19));var useScroll=function(ref){if(false){}var _a=useRafState_1.default({x:0,y:0}),state=_a[0],setState=_a[1];react_1.useEffect((function(){var handler=function(){if(ref.current){setState({x:ref.current.scrollLeft,y:ref.current.scrollTop})}};if(ref.current){ref.current.addEventListener("scroll",handler,{capture:false,passive:true})}return function(){if(ref.current){ref.current.removeEventListener("scroll",handler)}}}),[ref]);return state};exports.default=useScroll},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useScrolling=function(ref){var _a=react_1.useState(false),scrolling=_a[0],setScrolling=_a[1];react_1.useEffect((function(){if(ref.current){var scrollingTimeout_1;var handleScrollEnd_1=function(){setScrolling(false)};var handleScroll_1=function(){setScrolling(true);clearTimeout(scrollingTimeout_1);scrollingTimeout_1=setTimeout((function(){return handleScrollEnd_1()}),150)};ref.current.addEventListener("scroll",handleScroll_1,false);return function(){if(ref.current){ref.current.removeEventListener("scroll",handleScroll_1,false)}}}return function(){}}),[ref]);return scrolling};exports.default=useScrolling},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var util_1=__webpack_require__(8);var useSessionStorage=function(key,initialValue,raw){if(!util_1.isClient){return[initialValue,function(){}]}var _a=react_1.useState((function(){try{var sessionStorageValue=sessionStorage.getItem(key);if(typeof sessionStorageValue!=="string"){sessionStorage.setItem(key,raw?String(initialValue):JSON.stringify(initialValue));return initialValue}else{return raw?sessionStorageValue:JSON.parse(sessionStorageValue||"null")}}catch(_a){return initialValue}})),state=_a[0],setState=_a[1];react_1.useEffect((function(){try{var serializedState=raw?String(state):JSON.stringify(state);sessionStorage.setItem(key,serializedState)}catch(_a){}}));return[state,setState]};exports.default=useSessionStorage},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var fast_shallow_equal_1=__webpack_require__(122);var useCustomCompareEffect_1=tslib_1.__importDefault(__webpack_require__(25));var isPrimitive=function(val){return val!==Object(val)};var shallowEqualDepsList=function(prevDeps,nextDeps){return prevDeps.every((function(dep,index){return fast_shallow_equal_1.equal(dep,nextDeps[index])}))};var useShallowCompareEffect=function(effect,deps){if(false){}useCustomCompareEffect_1.default(effect,deps,shallowEqualDepsList)};exports.default=useShallowCompareEffect},function(module,exports){var keyList=Object.keys;exports.equal=function equal(a,b){if(a===b)return true;if(!(a instanceof Object)||!(b instanceof Object))return false;var keys=keyList(a);var length=keys.length;for(var i=0;i<length;i++)if(!(keys[i]in b))return false;for(var i=0;i<length;i++)if(a[keys[i]]!==b[keys[i]])return false;return length===keyList(b).length}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var React=tslib_1.__importStar(__webpack_require__(0));var util_1=__webpack_require__(8);var useState=React.useState,useEffect=React.useEffect,useRef=React.useRef;var DRAF=function(callback){return setTimeout(callback,35)};var useSize=function(element,_a){var _b=_a===void 0?{}:_a,_c=_b.width,width=_c===void 0?Infinity:_c,_d=_b.height,height=_d===void 0?Infinity:_d;if(!util_1.isClient){return[typeof element==="function"?element({width:width,height:height}):element,{width:width,height:height}]}var _e=useState({width:width,height:height}),state=_e[0],setState=_e[1];if(typeof element==="function"){element=element(state)}var style=element.props.style||{};var ref=useRef(null);var window=null;var setSize=function(){var iframe=ref.current;var size=iframe?{width:iframe.offsetWidth,height:iframe.offsetHeight}:{width:width,height:height};setState(size)};var onWindow=function(windowToListenOn){windowToListenOn.addEventListener("resize",setSize);DRAF(setSize)};useEffect((function(){var iframe=ref.current;if(!iframe){return}if(iframe.contentWindow){window=iframe.contentWindow;onWindow(window)}else{var onLoad_1=function(){iframe.removeEventListener("load",onLoad_1);window=iframe.contentWindow;onWindow(window)};iframe.addEventListener("load",onLoad_1)}return function(){if(window&&window.removeEventListener){window.removeEventListener("resize",setSize)}}}),[]);style.position="relative";var sized=React.cloneElement.apply(React,tslib_1.__spreadArrays([element,{style:style}],tslib_1.__spreadArrays([React.createElement("iframe",{ref:ref,style:{background:"transparent",border:"none",height:"100%",left:0,position:"absolute",top:0,width:"100%",zIndex:-1}})],React.Children.toArray(element.props.children))));return[sized,state]};exports.default=useSize},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var util_1=__webpack_require__(8);var useMountedState_1=tslib_1.__importDefault(__webpack_require__(11));var useSetState_1=tslib_1.__importDefault(__webpack_require__(17));var noop=function(){};var useSlider=function(ref,options){if(options===void 0){options={}}var isMounted=useMountedState_1.default();var isSliding=react_1.useRef(false);var frame=react_1.useRef(0);var _a=useSetState_1.default({isSliding:false,value:0}),state=_a[0],setState=_a[1];react_1.useEffect((function(){if(util_1.isClient){var styles=options.styles===undefined?true:options.styles;var reverse_1=options.reverse===undefined?false:options.reverse;if(ref.current&&styles){ref.current.style.userSelect="none"}var startScrubbing_1=function(){if(!isSliding.current&&isMounted()){(options.onScrubStart||noop)();isSliding.current=true;setState({isSliding:true});bindEvents_1()}};var stopScrubbing_1=function(){if(isSliding.current&&isMounted()){(options.onScrubStop||noop)();isSliding.current=false;setState({isSliding:false});unbindEvents_1()}};var onMouseDown_1=function(event){startScrubbing_1();onMouseMove_1(event)};var onMouseMove_1=options.vertical?function(event){return onScrub_1(event.clientY)}:function(event){return onScrub_1(event.clientX)};var onTouchStart_1=function(event){startScrubbing_1();onTouchMove_1(event)};var onTouchMove_1=options.vertical?function(event){return onScrub_1(event.changedTouches[0].clientY)}:function(event){return onScrub_1(event.changedTouches[0].clientX)};var bindEvents_1=function(){util_1.on(document,"mousemove",onMouseMove_1);util_1.on(document,"mouseup",stopScrubbing_1);util_1.on(document,"touchmove",onTouchMove_1);util_1.on(document,"touchend",stopScrubbing_1)};var unbindEvents_1=function(){util_1.off(document,"mousemove",onMouseMove_1);util_1.off(document,"mouseup",stopScrubbing_1);util_1.off(document,"touchmove",onTouchMove_1);util_1.off(document,"touchend",stopScrubbing_1)};var onScrub_1=function(clientXY){cancelAnimationFrame(frame.current);frame.current=requestAnimationFrame((function(){if(isMounted()&&ref.current){var rect=ref.current.getBoundingClientRect();var pos=options.vertical?rect.top:rect.left;var length_1=options.vertical?rect.height:rect.width;if(!length_1){return}var value=(clientXY-pos)/length_1;if(value>1){value=1}else if(value<0){value=0}if(reverse_1){value=1-value}setState({value:value});(options.onScrub||noop)(value)}}))};util_1.on(ref.current,"mousedown",onMouseDown_1);util_1.on(ref.current,"touchstart",onTouchStart_1);return function(){util_1.off(ref.current,"mousedown",onMouseDown_1);util_1.off(ref.current,"touchstart",onTouchStart_1)}}else{return undefined}}),[ref,options.vertical]);return state};exports.default=useSlider},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useMount_1=tslib_1.__importDefault(__webpack_require__(41));var useSetState_1=tslib_1.__importDefault(__webpack_require__(17));var voices=typeof window==="object"&&typeof window.speechSynthesis==="object"?window.speechSynthesis.getVoices():[];var useSpeech=function(text,opts){if(opts===void 0){opts={}}var _a=useSetState_1.default({isPlaying:false,lang:opts.lang||"default",voice:opts.voice||voices[0],rate:opts.rate||1,pitch:opts.pitch||1,volume:opts.volume||1}),state=_a[0],setState=_a[1];var uterranceRef=react_1.useRef(null);useMount_1.default((function(){var utterance=new SpeechSynthesisUtterance(text);opts.lang&&(utterance.lang=opts.lang);opts.voice&&(utterance.voice=opts.voice);utterance.rate=opts.rate||1;utterance.pitch=opts.pitch||1;utterance.volume=opts.volume||1;utterance.onstart=function(){return setState({isPlaying:true})};utterance.onresume=function(){return setState({isPlaying:true})};utterance.onend=function(){return setState({isPlaying:false})};utterance.onpause=function(){return setState({isPlaying:false})};uterranceRef.current=utterance;window.speechSynthesis.speak(uterranceRef.current)}));return state};exports.default=useSpeech},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var isFocusedElementEditable=function(){var activeElement=document.activeElement,body=document.body;if(!activeElement){return false}if(activeElement===body){return false}switch(activeElement.tagName){case"INPUT":case"TEXTAREA":return true}return activeElement.hasAttribute("contenteditable")};var isTypedCharGood=function(_a){var keyCode=_a.keyCode,metaKey=_a.metaKey,ctrlKey=_a.ctrlKey,altKey=_a.altKey;if(metaKey||ctrlKey||altKey){return false}if(keyCode>=48&&keyCode<=57){return true}if(keyCode>=65&&keyCode<=90){return true}return false};var useStartTyping=function(onStartTyping){react_1.useLayoutEffect((function(){var keydown=function(event){!isFocusedElementEditable()&&isTypedCharGood(event)&&onStartTyping(event)};document.addEventListener("keydown",keydown);return function(){document.removeEventListener("keydown",keydown)}}),[])};exports.default=useStartTyping},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useFirstMountState_1=__webpack_require__(22);var resolveHookState_1=__webpack_require__(23);function useStateWithHistory(initialState,capacity,initialHistory){if(capacity===void 0){capacity=10}if(capacity<1){throw new Error("Capacity has to be greater than 1, got '"+capacity+"'")}var isFirstMount=useFirstMountState_1.useFirstMountState();var _a=react_1.useState(initialState),state=_a[0],innerSetState=_a[1];var history=react_1.useRef(initialHistory!==null&&initialHistory!==void 0?initialHistory:[]);var historyPosition=react_1.useRef(0);if(isFirstMount){if(history.current.length){if(history.current[history.current.length-1]!==initialState){history.current.push(initialState)}if(history.current.length>capacity){history.current=history.current.slice(history.current.length-capacity)}}else{history.current.push(initialState)}historyPosition.current=history.current.length&&history.current.length-1}var setState=react_1.useCallback((function(newState){innerSetState((function(currentState){newState=resolveHookState_1.resolveHookState(newState);if(newState!==currentState){if(historyPosition.current<history.current.length-1){history.current=history.current.slice(0,historyPosition.current+1)}historyPosition.current=history.current.push(newState)-1;if(history.current.length>capacity){history.current=history.current.slice(history.current.length-capacity)}}return newState}))}),[state,capacity]);var historyState=react_1.useMemo((function(){return{history:history.current,position:historyPosition.current,capacity:capacity,back:function(amount){if(amount===void 0){amount=1}if(!historyPosition.current){return}innerSetState((function(){historyPosition.current-=Math.min(amount,historyPosition.current);return history.current[historyPosition.current]}))},forward:function(amount){if(amount===void 0){amount=1}if(historyPosition.current===history.current.length-1){return}innerSetState((function(){historyPosition.current=Math.min(historyPosition.current+amount,history.current.length-1);return history.current[historyPosition.current]}))},go:function(position){if(position===historyPosition.current){return}innerSetState((function(){historyPosition.current=position<0?Math.max(history.current.length+position,0):Math.min(history.current.length-1,position);return history.current[historyPosition.current]}))}}}),[state]);return[state,setState,historyState]}exports.useStateWithHistory=useStateWithHistory},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useMountedState_1=tslib_1.__importDefault(__webpack_require__(11));var useUpdate_1=tslib_1.__importDefault(__webpack_require__(14));var useUpdateEffect_1=tslib_1.__importDefault(__webpack_require__(16));function useStateList(stateSet){if(stateSet===void 0){stateSet=[]}var isMounted=useMountedState_1.default();var update=useUpdate_1.default();var index=react_1.useRef(0);useUpdateEffect_1.default((function(){if(stateSet.length<=index.current){index.current=stateSet.length-1;update()}}),[stateSet.length]);var actions=react_1.useMemo((function(){return{next:function(){return actions.setStateAt(index.current+1)},prev:function(){return actions.setStateAt(index.current-1)},setStateAt:function(newIndex){if(!isMounted())return;if(!stateSet.length)return;if(newIndex===index.current)return;index.current=newIndex>=0?newIndex%stateSet.length:stateSet.length+newIndex%stateSet.length;update()},setState:function(state){if(!isMounted())return;var newIndex=stateSet.length?stateSet.indexOf(state):-1;if(newIndex===-1){throw new Error("State '"+state+"' is not a valid state (does not exist in state list)")}index.current=newIndex;update()}}}),[stateSet]);return tslib_1.__assign({state:stateSet[index.current],currentIndex:index.current},actions)}exports.default=useStateList},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useUnmount_1=tslib_1.__importDefault(__webpack_require__(15));var useThrottle=function(value,ms){if(ms===void 0){ms=200}var _a=react_1.useState(value),state=_a[0],setState=_a[1];var timeout=react_1.useRef();var nextValue=react_1.useRef(null);var hasNextValue=react_1.useRef(0);react_1.useEffect((function(){if(!timeout.current){setState(value);var timeoutCallback_1=function(){if(hasNextValue.current){hasNextValue.current=false;setState(nextValue.current);timeout.current=setTimeout(timeoutCallback_1,ms)}else{timeout.current=undefined}};timeout.current=setTimeout(timeoutCallback_1,ms)}else{nextValue.current=value;hasNextValue.current=true}}),[value]);useUnmount_1.default((function(){timeout.current&&clearTimeout(timeout.current)}));return state};exports.default=useThrottle},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useUnmount_1=tslib_1.__importDefault(__webpack_require__(15));var useThrottleFn=function(fn,ms,args){if(ms===void 0){ms=200}var _a=react_1.useState(null),state=_a[0],setState=_a[1];var timeout=react_1.useRef();var nextArgs=react_1.useRef();react_1.useEffect((function(){if(!timeout.current){setState(fn.apply(void 0,args));var timeoutCallback_1=function(){if(nextArgs.current){setState(fn.apply(void 0,nextArgs.current));nextArgs.current=undefined;timeout.current=setTimeout(timeoutCallback_1,ms)}else{timeout.current=undefined}};timeout.current=setTimeout(timeoutCallback_1,ms)}else{nextArgs.current=args}}),args);useUnmount_1.default((function(){timeout.current&&clearTimeout(timeout.current)}));return state};exports.default=useThrottleFn},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var useTimeoutFn_1=tslib_1.__importDefault(__webpack_require__(26));var useUpdate_1=tslib_1.__importDefault(__webpack_require__(14));function useTimeout(ms){if(ms===void 0){ms=0}var update=useUpdate_1.default();return useTimeoutFn_1.default(update,ms)}exports.default=useTimeout},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var DEFAULT_USE_TITLE_OPTIONS={restoreOnUnmount:false};function useTitle(title,options){if(options===void 0){options=DEFAULT_USE_TITLE_OPTIONS}var prevTitleRef=react_1.useRef(document.title);document.title=title;react_1.useEffect((function(){if(options&&options.restoreOnUnmount){return function(){document.title=prevTitleRef.current}}else{return}}),[])}exports.default=typeof document!=="undefined"?useTitle:function(_title){}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var ts_easing_1=__webpack_require__(134);var useRaf_1=tslib_1.__importDefault(__webpack_require__(43));var useTween=function(easingName,ms,delay){if(easingName===void 0){easingName="inCirc"}if(ms===void 0){ms=200}if(delay===void 0){delay=0}var fn=ts_easing_1.easing[easingName];var t=useRaf_1.default(ms,delay);if(false){}return fn(t)};exports.default=useTween},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.easing={linear:function(t){return t},quadratic:function(t){return t*(-(t*t)*t+4*t*t-6*t+4)},cubic:function(t){return t*(4*t*t-9*t+6)},elastic:function(t){return t*(33*t*t*t*t-106*t*t*t+126*t*t-67*t+15)},inQuad:function(t){return t*t},outQuad:function(t){return t*(2-t)},inOutQuad:function(t){return t<.5?2*t*t:-1+(4-2*t)*t},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},inQuart:function(t){return t*t*t*t},outQuart:function(t){return 1- --t*t*t*t},inOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return 1+--t*t*t*t*t},inOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},inSine:function(t){return-Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-(Math.cos(Math.PI*t)-1)/2},inExpo:function(t){return Math.pow(2,10*(t-1))},outExpo:function(t){return-Math.pow(2,-10*t)+1},inOutExpo:function(t){t/=.5;if(t<1)return Math.pow(2,10*(t-1))/2;t--;return(-Math.pow(2,-10*t)+2)/2},inCirc:function(t){return-Math.sqrt(1-t*t)+1},outCirc:function(t){return Math.sqrt(1-(t=t-1)*t)},inOutCirc:function(t){t/=.5;if(t<1)return-(Math.sqrt(1-t*t)-1)/2;t-=2;return(Math.sqrt(1-t*t)+1)/2}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var useUnmountPromise=function(){var refUnmounted=react_1.useRef(false);react_1.useEffect((function(){return function(){refUnmounted.current=true}}));var wrapper=react_1.useMemo((function(){var race=function(promise,onError){var newPromise=new Promise((function(resolve,reject){promise.then((function(result){if(!refUnmounted.current)resolve(result)}),(function(error){if(!refUnmounted.current)reject(error);else if(onError)onError(error);else console.error("useUnmountPromise",error)}))}));return newPromise};return race}),[]);return wrapper};exports.default=useUnmountPromise},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var useList_1=tslib_1.__importDefault(__webpack_require__(40));function useUpsert(predicate,initialList){if(initialList===void 0){initialList=[]}var _a=useList_1.default(initialList),list=_a[0],listActions=_a[1];return[list,tslib_1.__assign(tslib_1.__assign({},listActions),{upsert:function(newItem){listActions.upsert(predicate,newItem)}})]}exports.default=useUpsert},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);var isVibrationApiSupported=typeof navigator==="object"&&"vibrate"in navigator;var useVibrateMock=function(){};function useVibrate(enabled,pattern,loop){if(enabled===void 0){enabled=true}if(pattern===void 0){pattern=[1e3,1e3]}if(loop===void 0){loop=true}react_1.useEffect((function(){var interval;if(enabled){navigator.vibrate(pattern);if(loop){var duration=pattern instanceof Array?pattern.reduce((function(a,b){return a+b})):pattern;interval=setInterval((function(){navigator.vibrate(pattern)}),duration)}}return function(){if(enabled){navigator.vibrate(0);if(loop){clearInterval(interval)}}}}),[enabled])}exports.default=isVibrationApiSupported?useVibrate:useVibrateMock},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var createHTMLMediaHook_1=tslib_1.__importDefault(__webpack_require__(31));var useVideo=createHTMLMediaHook_1.default("video");exports.default=useVideo},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);function useStateValidator(state,validator,initialState){if(initialState===void 0){initialState=[undefined]}var validatorInner=react_1.useRef(validator);var stateInner=react_1.useRef(state);validatorInner.current=validator;stateInner.current=state;var _a=react_1.useState(initialState),validity=_a[0],setValidity=_a[1];var validate=react_1.useCallback((function(){if(validatorInner.current.length>=2){validatorInner.current(stateInner.current,setValidity)}else{setValidity(validatorInner.current(stateInner.current))}}),[setValidity]);react_1.useEffect((function(){validate()}),[state]);return[validity,validate]}exports.default=useStateValidator},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var scrollbar_width_1=__webpack_require__(141);var react_1=__webpack_require__(0);function useScrollbarWidth(){var _a=react_1.useState(scrollbar_width_1.scrollbarWidth()),sbw=_a[0],setSbw=_a[1];react_1.useEffect((function(){if(typeof sbw!=="undefined"){return}var raf=requestAnimationFrame((function(){setSbw(scrollbar_width_1.scrollbarWidth())}));return function(){return cancelAnimationFrame(raf)}}),[]);return sbw}exports.useScrollbarWidth=useScrollbarWidth},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(t){if("undefined"==typeof document)return 0;if(document.body&&(!document.readyState||"loading"!==document.readyState)){if(!0!==t&&"number"==typeof e.__cache)return e.__cache;var o=document.createElement("div"),d=o.style;d.display="block",d.position="absolute",d.width="100px",d.height="100px",d.left="-999px",d.top="-999px",d.overflow="scroll",document.body.insertBefore(o,null);var r=o.clientWidth;if(0!==r)return e.__cache=100-r,document.body.removeChild(o),e.__cache;document.body.removeChild(o)}};exports.scrollbarWidth=e},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);function useMultiStateValidator(states,validator,initialValidity){if(initialValidity===void 0){initialValidity=[undefined]}if(typeof states!=="object"){throw new Error("states expected to be an object or array, got "+typeof states)}var validatorInner=react_1.useRef(validator);var statesInner=react_1.useRef(states);validatorInner.current=validator;statesInner.current=states;var _a=react_1.useState(initialValidity),validity=_a[0],setValidity=_a[1];var validate=react_1.useCallback((function(){if(validatorInner.current.length>=2){validatorInner.current(statesInner.current,setValidity)}else{setValidity(validatorInner.current(statesInner.current))}}),[setValidity]);react_1.useEffect((function(){validate()}),Object.values(states));return[validity,validate]}exports.useMultiStateValidator=useMultiStateValidator},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var util_1=__webpack_require__(8);var useRafState_1=tslib_1.__importDefault(__webpack_require__(19));var useWindowScroll=function(){var _a=useRafState_1.default({x:util_1.isClient?window.pageXOffset:0,y:util_1.isClient?window.pageYOffset:0}),state=_a[0],setState=_a[1];react_1.useEffect((function(){var handler=function(){setState({x:window.pageXOffset,y:window.pageYOffset})};window.addEventListener("scroll",handler,{capture:false,passive:true});return function(){window.removeEventListener("scroll",handler)}}),[]);return state};exports.default=useWindowScroll},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useRafState_1=tslib_1.__importDefault(__webpack_require__(19));var util_1=__webpack_require__(8);var useWindowSize=function(initialWidth,initialHeight){if(initialWidth===void 0){initialWidth=Infinity}if(initialHeight===void 0){initialHeight=Infinity}var _a=useRafState_1.default({width:util_1.isClient?window.innerWidth:initialWidth,height:util_1.isClient?window.innerHeight:initialHeight}),state=_a[0],setState=_a[1];react_1.useEffect((function(){if(util_1.isClient){var handler_1=function(){setState({width:window.innerWidth,height:window.innerHeight})};window.addEventListener("resize",handler_1);return function(){window.removeEventListener("resize",handler_1)}}}),[]);return state};exports.default=useWindowSize},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var resize_observer_polyfill_1=tslib_1.__importDefault(__webpack_require__(146));var useMeasure=function(){var _a=react_1.useState({x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0}),rect=_a[0],set=_a[1];var observer=react_1.useState((function(){return new resize_observer_polyfill_1.default((function(entries){var entry=entries[0];if(entry){set(entry.contentRect)}}))}))[0];var ref=react_1.useCallback((function(node){observer.disconnect();if(node){observer.observe(node)}}),[observer]);return[ref,rect]};exports.default=useMeasure},function(module,exports,__webpack_require__){(function(global){(function(global,factory){true?module.exports=factory():undefined})(this,(function(){"use strict";var MapShim=function(){if(typeof Map!=="undefined"){return Map}function getIndex(arr,key){var result=-1;arr.some((function(entry,index){if(entry[0]===key){result=index;return true}return false}));return result}return function(){function class_1(){this.__entries__=[]}Object.defineProperty(class_1.prototype,"size",{get:function(){return this.__entries__.length},enumerable:true,configurable:true});class_1.prototype.get=function(key){var index=getIndex(this.__entries__,key);var entry=this.__entries__[index];return entry&&entry[1]};class_1.prototype.set=function(key,value){var index=getIndex(this.__entries__,key);if(~index){this.__entries__[index][1]=value}else{this.__entries__.push([key,value])}};class_1.prototype.delete=function(key){var entries=this.__entries__;var index=getIndex(entries,key);if(~index){entries.splice(index,1)}};class_1.prototype.has=function(key){return!!~getIndex(this.__entries__,key)};class_1.prototype.clear=function(){this.__entries__.splice(0)};class_1.prototype.forEach=function(callback,ctx){if(ctx===void 0){ctx=null}for(var _i=0,_a=this.__entries__;_i<_a.length;_i++){var entry=_a[_i];callback.call(ctx,entry[1],entry[0])}};return class_1}()}();var isBrowser=typeof window!=="undefined"&&typeof document!=="undefined"&&window.document===document;var global$1=function(){if(typeof global!=="undefined"&&global.Math===Math){return global}if(typeof self!=="undefined"&&self.Math===Math){return self}if(typeof window!=="undefined"&&window.Math===Math){return window}return Function("return this")()}();var requestAnimationFrame$1=function(){if(typeof requestAnimationFrame==="function"){return requestAnimationFrame.bind(global$1)}return function(callback){return setTimeout((function(){return callback(Date.now())}),1e3/60)}}();var trailingTimeout=2;function throttle(callback,delay){var leadingCall=false,trailingCall=false,lastCallTime=0;function resolvePending(){if(leadingCall){leadingCall=false;callback()}if(trailingCall){proxy()}}function timeoutCallback(){requestAnimationFrame$1(resolvePending)}function proxy(){var timeStamp=Date.now();if(leadingCall){if(timeStamp-lastCallTime<trailingTimeout){return}trailingCall=true}else{leadingCall=true;trailingCall=false;setTimeout(timeoutCallback,delay)}lastCallTime=timeStamp}return proxy}var REFRESH_DELAY=20;var transitionKeys=["top","right","bottom","left","width","height","size","weight"];var mutationObserverSupported=typeof MutationObserver!=="undefined";var ResizeObserverController=function(){function ResizeObserverController(){this.connected_=false;this.mutationEventsAdded_=false;this.mutationsObserver_=null;this.observers_=[];this.onTransitionEnd_=this.onTransitionEnd_.bind(this);this.refresh=throttle(this.refresh.bind(this),REFRESH_DELAY)}ResizeObserverController.prototype.addObserver=function(observer){if(!~this.observers_.indexOf(observer)){this.observers_.push(observer)}if(!this.connected_){this.connect_()}};ResizeObserverController.prototype.removeObserver=function(observer){var observers=this.observers_;var index=observers.indexOf(observer);if(~index){observers.splice(index,1)}if(!observers.length&&this.connected_){this.disconnect_()}};ResizeObserverController.prototype.refresh=function(){var changesDetected=this.updateObservers_();if(changesDetected){this.refresh()}};ResizeObserverController.prototype.updateObservers_=function(){var activeObservers=this.observers_.filter((function(observer){return observer.gatherActive(),observer.hasActive()}));activeObservers.forEach((function(observer){return observer.broadcastActive()}));return activeObservers.length>0};ResizeObserverController.prototype.connect_=function(){if(!isBrowser||this.connected_){return}document.addEventListener("transitionend",this.onTransitionEnd_);window.addEventListener("resize",this.refresh);if(mutationObserverSupported){this.mutationsObserver_=new MutationObserver(this.refresh);this.mutationsObserver_.observe(document,{attributes:true,childList:true,characterData:true,subtree:true})}else{document.addEventListener("DOMSubtreeModified",this.refresh);this.mutationEventsAdded_=true}this.connected_=true};ResizeObserverController.prototype.disconnect_=function(){if(!isBrowser||!this.connected_){return}document.removeEventListener("transitionend",this.onTransitionEnd_);window.removeEventListener("resize",this.refresh);if(this.mutationsObserver_){this.mutationsObserver_.disconnect()}if(this.mutationEventsAdded_){document.removeEventListener("DOMSubtreeModified",this.refresh)}this.mutationsObserver_=null;this.mutationEventsAdded_=false;this.connected_=false};ResizeObserverController.prototype.onTransitionEnd_=function(_a){var _b=_a.propertyName,propertyName=_b===void 0?"":_b;var isReflowProperty=transitionKeys.some((function(key){return!!~propertyName.indexOf(key)}));if(isReflowProperty){this.refresh()}};ResizeObserverController.getInstance=function(){if(!this.instance_){this.instance_=new ResizeObserverController}return this.instance_};ResizeObserverController.instance_=null;return ResizeObserverController}();var defineConfigurable=function(target,props){for(var _i=0,_a=Object.keys(props);_i<_a.length;_i++){var key=_a[_i];Object.defineProperty(target,key,{value:props[key],enumerable:false,writable:false,configurable:true})}return target};var getWindowOf=function(target){var ownerGlobal=target&&target.ownerDocument&&target.ownerDocument.defaultView;return ownerGlobal||global$1};var emptyRect=createRectInit(0,0,0,0);function toFloat(value){return parseFloat(value)||0}function getBordersSize(styles){var positions=[];for(var _i=1;_i<arguments.length;_i++){positions[_i-1]=arguments[_i]}return positions.reduce((function(size,position){var value=styles["border-"+position+"-width"];return size+toFloat(value)}),0)}function getPaddings(styles){var positions=["top","right","bottom","left"];var paddings={};for(var _i=0,positions_1=positions;_i<positions_1.length;_i++){var position=positions_1[_i];var value=styles["padding-"+position];paddings[position]=toFloat(value)}return paddings}function getSVGContentRect(target){var bbox=target.getBBox();return createRectInit(0,0,bbox.width,bbox.height)}function getHTMLElementContentRect(target){var clientWidth=target.clientWidth,clientHeight=target.clientHeight;if(!clientWidth&&!clientHeight){return emptyRect}var styles=getWindowOf(target).getComputedStyle(target);var paddings=getPaddings(styles);var horizPad=paddings.left+paddings.right;var vertPad=paddings.top+paddings.bottom;var width=toFloat(styles.width),height=toFloat(styles.height);if(styles.boxSizing==="border-box"){if(Math.round(width+horizPad)!==clientWidth){width-=getBordersSize(styles,"left","right")+horizPad}if(Math.round(height+vertPad)!==clientHeight){height-=getBordersSize(styles,"top","bottom")+vertPad}}if(!isDocumentElement(target)){var vertScrollbar=Math.round(width+horizPad)-clientWidth;var horizScrollbar=Math.round(height+vertPad)-clientHeight;if(Math.abs(vertScrollbar)!==1){width-=vertScrollbar}if(Math.abs(horizScrollbar)!==1){height-=horizScrollbar}}return createRectInit(paddings.left,paddings.top,width,height)}var isSVGGraphicsElement=function(){if(typeof SVGGraphicsElement!=="undefined"){return function(target){return target instanceof getWindowOf(target).SVGGraphicsElement}}return function(target){return target instanceof getWindowOf(target).SVGElement&&typeof target.getBBox==="function"}}();function isDocumentElement(target){return target===getWindowOf(target).document.documentElement}function getContentRect(target){if(!isBrowser){return emptyRect}if(isSVGGraphicsElement(target)){return getSVGContentRect(target)}return getHTMLElementContentRect(target)}function createReadOnlyRect(_a){var x=_a.x,y=_a.y,width=_a.width,height=_a.height;var Constr=typeof DOMRectReadOnly!=="undefined"?DOMRectReadOnly:Object;var rect=Object.create(Constr.prototype);defineConfigurable(rect,{x:x,y:y,width:width,height:height,top:y,right:x+width,bottom:height+y,left:x});return rect}function createRectInit(x,y,width,height){return{x:x,y:y,width:width,height:height}}var ResizeObservation=function(){function ResizeObservation(target){this.broadcastWidth=0;this.broadcastHeight=0;this.contentRect_=createRectInit(0,0,0,0);this.target=target}ResizeObservation.prototype.isActive=function(){var rect=getContentRect(this.target);this.contentRect_=rect;return rect.width!==this.broadcastWidth||rect.height!==this.broadcastHeight};ResizeObservation.prototype.broadcastRect=function(){var rect=this.contentRect_;this.broadcastWidth=rect.width;this.broadcastHeight=rect.height;return rect};return ResizeObservation}();var ResizeObserverEntry=function(){function ResizeObserverEntry(target,rectInit){var contentRect=createReadOnlyRect(rectInit);defineConfigurable(this,{target:target,contentRect:contentRect})}return ResizeObserverEntry}();var ResizeObserverSPI=function(){function ResizeObserverSPI(callback,controller,callbackCtx){this.activeObservations_=[];this.observations_=new MapShim;if(typeof callback!=="function"){throw new TypeError("The callback provided as parameter 1 is not a function.")}this.callback_=callback;this.controller_=controller;this.callbackCtx_=callbackCtx}ResizeObserverSPI.prototype.observe=function(target){if(!arguments.length){throw new TypeError("1 argument required, but only 0 present.")}if(typeof Element==="undefined"||!(Element instanceof Object)){return}if(!(target instanceof getWindowOf(target).Element)){throw new TypeError('parameter 1 is not of type "Element".')}var observations=this.observations_;if(observations.has(target)){return}observations.set(target,new ResizeObservation(target));this.controller_.addObserver(this);this.controller_.refresh()};ResizeObserverSPI.prototype.unobserve=function(target){if(!arguments.length){throw new TypeError("1 argument required, but only 0 present.")}if(typeof Element==="undefined"||!(Element instanceof Object)){return}if(!(target instanceof getWindowOf(target).Element)){throw new TypeError('parameter 1 is not of type "Element".')}var observations=this.observations_;if(!observations.has(target)){return}observations.delete(target);if(!observations.size){this.controller_.removeObserver(this)}};ResizeObserverSPI.prototype.disconnect=function(){this.clearActive();this.observations_.clear();this.controller_.removeObserver(this)};ResizeObserverSPI.prototype.gatherActive=function(){var _this=this;this.clearActive();this.observations_.forEach((function(observation){if(observation.isActive()){_this.activeObservations_.push(observation)}}))};ResizeObserverSPI.prototype.broadcastActive=function(){if(!this.hasActive()){return}var ctx=this.callbackCtx_;var entries=this.activeObservations_.map((function(observation){return new ResizeObserverEntry(observation.target,observation.broadcastRect())}));this.callback_.call(ctx,entries,ctx);this.clearActive()};ResizeObserverSPI.prototype.clearActive=function(){this.activeObservations_.splice(0)};ResizeObserverSPI.prototype.hasActive=function(){return this.activeObservations_.length>0};return ResizeObserverSPI}();var observers=typeof WeakMap!=="undefined"?new WeakMap:new MapShim;var ResizeObserver=function(){function ResizeObserver(callback){if(!(this instanceof ResizeObserver)){throw new TypeError("Cannot call a class as a function.")}if(!arguments.length){throw new TypeError("1 argument required, but only 0 present.")}var controller=ResizeObserverController.getInstance();var observer=new ResizeObserverSPI(callback,controller,this);observers.set(this,observer)}return ResizeObserver}();["observe","unobserve","disconnect"].forEach((function(method){ResizeObserver.prototype[method]=function(){var _a;return(_a=observers.get(this))[method].apply(_a,arguments)}}));var index=function(){if(typeof global$1.ResizeObserver!=="undefined"){return global$1.ResizeObserver}return ResizeObserver}();return index}))}).call(this,__webpack_require__(147))},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(0);function useRendersCount(){return++react_1.useRef(0).current}exports.useRendersCount=useRendersCount},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useSet=function(initialSet){if(initialSet===void 0){initialSet=new Set}var _a=react_1.useState(initialSet),set=_a[0],setSet=_a[1];var stableActions=react_1.useMemo((function(){var add=function(item){return setSet((function(prevSet){return new Set(tslib_1.__spreadArrays(Array.from(prevSet),[item]))}))};var remove=function(item){return setSet((function(prevSet){return new Set(Array.from(prevSet).filter((function(i){return i!==item})))}))};var toggle=function(item){return setSet((function(prevSet){return prevSet.has(item)?new Set(Array.from(prevSet).filter((function(i){return i!==item}))):new Set(tslib_1.__spreadArrays(Array.from(prevSet),[item]))}))};return{add:add,remove:remove,toggle:toggle,reset:function(){return setSet(initialSet)}}}),[setSet]);var utils=tslib_1.__assign({has:react_1.useCallback((function(item){return set.has(item)}),[set])},stableActions);return[set,utils]};exports.default=useSet},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(4);var react_1=__webpack_require__(0);var useEffectOnce_1=tslib_1.__importDefault(__webpack_require__(18));function createGlobalState(initialState){var store={state:initialState,setState:function(state){store.state=state;store.setters.forEach((function(setter){return setter(store.state)}))},setters:[]};return function(){var _a=react_1.useState(store.state),globalState=_a[0],stateSetter=_a[1];useEffectOnce_1.default((function(){return function(){store.setters=store.setters.filter((function(setter){return setter!==stateSetter}))}}));react_1.useLayoutEffect((function(){if(!store.setters.includes(stateSetter)){store.setters.push(stateSetter)}}));return[globalState,store.setState]}}exports.createGlobalState=createGlobalState;exports.default=createGlobalState},function(module,exports){module.exports.id="ace/mode/json_worker";module.exports.src='"no use strict";!function(window){function resolveModuleId(id,paths){for(var testPath=id,tail="";testPath;){var alias=paths[testPath];if("string"==typeof alias)return alias+tail;if(alias)return alias.location.replace(/\\/*$/,"/")+(tail||alias.main||alias.name);if(alias===!1)return"";var i=testPath.lastIndexOf("/");if(-1===i)break;tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}return id}if(!(void 0!==window.window&&window.document||window.acequire&&window.define)){window.console||(window.console=function(){var msgs=Array.prototype.slice.call(arguments,0);postMessage({type:"log",data:msgs})},window.console.error=window.console.warn=window.console.log=window.console.trace=window.console),window.window=window,window.ace=window,window.onerror=function(message,file,line,col,err){postMessage({type:"error",data:{message:message,data:err.data,file:file,line:line,col:col,stack:err.stack}})},window.normalizeModule=function(parentId,moduleName){if(-1!==moduleName.indexOf("!")){var chunks=moduleName.split("!");return window.normalizeModule(parentId,chunks[0])+"!"+window.normalizeModule(parentId,chunks[1])}if("."==moduleName.charAt(0)){var base=parentId.split("/").slice(0,-1).join("/");for(moduleName=(base?base+"/":"")+moduleName;-1!==moduleName.indexOf(".")&&previous!=moduleName;){var previous=moduleName;moduleName=moduleName.replace(/^\\.\\//,"").replace(/\\/\\.\\//,"/").replace(/[^\\/]+\\/\\.\\.\\//,"")}}return moduleName},window.acequire=function acequire(parentId,id){if(id||(id=parentId,parentId=null),!id.charAt)throw Error("worker.js acequire() accepts only (parentId, id) as arguments");id=window.normalizeModule(parentId,id);var module=window.acequire.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;if(!window.acequire.tlns)return console.log("unable to load "+id);var path=resolveModuleId(id,window.acequire.tlns);return".js"!=path.slice(-3)&&(path+=".js"),window.acequire.id=id,window.acequire.modules[id]={},importScripts(path),window.acequire(parentId,id)},window.acequire.modules={},window.acequire.tlns={},window.define=function(id,deps,factory){if(2==arguments.length?(factory=deps,"string"!=typeof id&&(deps=id,id=window.acequire.id)):1==arguments.length&&(factory=id,deps=[],id=window.acequire.id),"function"!=typeof factory)return window.acequire.modules[id]={exports:factory,initialized:!0},void 0;deps.length||(deps=["require","exports","module"]);var req=function(childId){return window.acequire(id,childId)};window.acequire.modules[id]={exports:{},factory:function(){var module=this,returnExports=factory.apply(this,deps.map(function(dep){switch(dep){case"require":return req;case"exports":return module.exports;case"module":return module;default:return req(dep)}}));return returnExports&&(module.exports=returnExports),module}}},window.define.amd={},acequire.tlns={},window.initBaseUrls=function(topLevelNamespaces){for(var i in topLevelNamespaces)acequire.tlns[i]=topLevelNamespaces[i]},window.initSender=function(){var EventEmitter=window.acequire("ace/lib/event_emitter").EventEmitter,oop=window.acequire("ace/lib/oop"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:"call",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:"event",name:name,data:data})}}.call(Sender.prototype),new Sender};var main=window.main=null,sender=window.sender=null;window.onmessage=function(e){var msg=e.data;if(msg.event&&sender)sender._signal(msg.event,msg.data);else if(msg.command)if(main[msg.command])main[msg.command].apply(main,msg.args);else{if(!window[msg.command])throw Error("Unknown command:"+msg.command);window[msg.command].apply(window,msg.args)}else if(msg.init){window.initBaseUrls(msg.tlns),acequire("ace/lib/es5-shim"),sender=window.sender=window.initSender();var clazz=acequire(msg.module)[msg.classname];main=window.main=new clazz(sender)}}}}(this),ace.define("ace/lib/oop",["require","exports","module"],function(acequire,exports){"use strict";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key];return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),ace.define("ace/range",["require","exports","module"],function(acequire,exports){"use strict";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):-1==cmp?-2:(cmp=this.compare(start.row,start.column),-1==cmp?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){var cmp=this.compareRange(range);return-1==cmp||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){"object"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){"object"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return 0==this.compare(row,column)?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return this.isMultiLine()||row!==this.start.row?this.start.row>row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?this.end.column>=column?0:1:0:this.start.column>column?-1:column>this.end.column?1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(firstRow>this.end.row)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(firstRow>this.start.row)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(0==cmp)return this;if(-1==cmp)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range}),ace.define("ace/apply_delta",["require","exports","module"],function(acequire,exports){"use strict";exports.applyDelta=function(docLines,delta){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||"";switch(delta.action){case"insert":var lines=delta.lines;if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn);else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case"remove":var endColumn=delta.end.column,endRow=delta.end.row;row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(acequire,exports){"use strict";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(listeners.length||defaultHandler){"object"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice();for(var i=0;listeners.length>i&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(listeners){listeners=listeners.slice();for(var i=0;listeners.length>i;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName];disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old);var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers){var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback)handlers[eventName],disabled&&this.setDefaultHandler(eventName,disabled.pop());else if(disabled){var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];return listeners||(listeners=this._eventRegistry[eventName]=[]),-1==listeners.indexOf(callback)&&listeners[capturing?"unshift":"push"](callback),callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(listeners){var index=listeners.indexOf(callback);-1!==index&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),EventEmitter=acequire("./lib/event_emitter").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this),this.attach(doc),column===void 0?this.setPosition(row.row,row.column):this.setPosition(row,column)};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert="insert"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end;return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos;if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._signal("change",{old:old,value:pos})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):0>row?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),0>column&&(pos.column=0),pos}}).call(Anchor.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),applyDelta=acequire("./apply_delta").applyDelta,EventEmitter=acequire("./lib/event_emitter").EventEmitter,Range=acequire("./range").Range,Anchor=acequire("./anchor").Anchor,Document=function(textOrLines){this.$lines=[""],0===textOrLines.length?this.$lines=[""]:Array.isArray(textOrLines)?this.insertMergedLines({row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},this.$split=0==="aaa".split(/a/).length?function(text){return text.replace(/\\r\\n|\\r/g,"\\n").split("\\n")}:function(text){return text.split(/\\r\\n|\\r|\\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\\r\\n|\\r|\\n)/m);this.$autoNewLine=match?match[1]:"\\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\\r\\n";case"unix":return"\\n";default:return this.$autoNewLine||"\\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(newLineMode){this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return"\\r\\n"==text||"\\r"==text||"\\n"==text},this.getLine=function(row){return this.$lines[row]||""},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())},this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)];else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||"").substring(range.start.column);var l=lines.length-1;range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead."),this.insertMergedLines(position,["",""])},this.insert=function(position,text){return 1>=this.getLength()&&this.$detectNewLine(text),this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length);return this.applyDelta({start:start,end:end,action:"insert",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){var length=this.getLength();void 0===row?row=length:0>row?row=0:row>=length&&(row=length-1,column=void 0);var line=this.getLine(row);return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;this.getLength()>row?(lines=lines.concat([""]),column=0):(lines=[""].concat(lines),row--,column=this.$lines[row].length),this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length};return this.applyDelta({start:start,end:end,action:"insert",lines:lines}),this.clonePos(end)},this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=this.getLength()-1>lastRow,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1);return this.applyDelta({start:range.start,end:range.end,action:"remove",lines:this.getLinesForRange(range)}),deletedLines},this.removeNewLine=function(row){this.getLength()-1>row&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:"remove",lines:["",""]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),0===text.length&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;deltas.length>i;i++)this.applyDelta(deltas[i])},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},this.applyDelta=function(delta,doNotValidate){var isInsert="insert"==delta.action;(isInsert?1>=delta.lines.length&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),applyDelta(this.$lines,delta,doNotValidate),this._signal("change",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){from=to,to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column;break}chunk.push(""),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:"insert"==delta.action?"remove":"insert",lines:delta.lines.slice()})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;l>i;i++)if(index-=lines[i].length+newlineLength,0>index)return{row:i,column:index+lines[i].length+newlineLength};return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;row>i;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype),exports.Document=Document}),ace.define("ace/lib/lang",["require","exports","module"],function(acequire,exports){"use strict";exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split("").reverse().join("")},exports.stringRepeat=function(string,count){for(var result="";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string);return result};var trimBeginRegexp=/^\\s\\s*/,trimEndRegexp=/\\s\\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,"")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,"")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;l>i;i++)copy[i]=array[i]&&"object"==typeof array[i]?this.copyObject(array[i]):array[i];return copy},exports.deepCopy=function deepCopy(obj){if("object"!=typeof obj||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;obj.length>key;key++)copy[key]=deepCopy(obj[key]);return copy}if("[object Object]"!==Object.prototype.toString.call(obj))return obj;copy={};for(var key in obj)copy[key]=deepCopy(obj[key]);return copy},exports.arrayToMap=function(arr){for(var map={},i=0;arr.length>i;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;array.length>=i;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g,"\\\\$1")},exports.escapeHTML=function(str){return str.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/\'/g,"&#39;").replace(/</g,"&#60;")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))};return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),timer=null},_self.isPending=function(){return timer},_self}}),ace.define("ace/worker/mirror",["require","exports","module","ace/range","ace/document","ace/lib/lang"],function(acequire,exports){"use strict";acequire("../range").Range;var Document=acequire("../document").Document,lang=acequire("../lib/lang"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(""),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on("change",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:"insert",start:data[i],lines:data[i+1]};else var d={action:"remove",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define("ace/mode/json/json_parse",["require","exports","module"],function(){"use strict";var at,ch,text,value,escapee={\'"\':\'"\',"\\\\":"\\\\","/":"/",b:"\\b",f:"\\f",n:"\\n",r:"\\r",t:"\t"},error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error("Expected \'"+c+"\' instead of \'"+ch+"\'"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string="";for("-"===ch&&(string="-",next("-"));ch>="0"&&"9">=ch;)string+=ch,next();if("."===ch)for(string+=".";next()&&ch>="0"&&"9">=ch;)string+=ch;if("e"===ch||"E"===ch)for(string+=ch,next(),("-"===ch||"+"===ch)&&(string+=ch,next());ch>="0"&&"9">=ch;)string+=ch,next();return number=+string,isNaN(number)?(error("Bad number"),void 0):number},string=function(){var hex,i,uffff,string="";if(\'"\'===ch)for(;next();){if(\'"\'===ch)return next(),string;if("\\\\"===ch)if(next(),"u"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex;string+=String.fromCharCode(uffff)}else{if("string"!=typeof escapee[ch])break;string+=escapee[ch]}else string+=ch}error("Bad string")},white=function(){for(;ch&&" ">=ch;)next()},word=function(){switch(ch){case"t":return next("t"),next("r"),next("u"),next("e"),!0;case"f":return next("f"),next("a"),next("l"),next("s"),next("e"),!1;case"n":return next("n"),next("u"),next("l"),next("l"),null}error("Unexpected \'"+ch+"\'")},array=function(){var array=[];if("["===ch){if(next("["),white(),"]"===ch)return next("]"),array;for(;ch;){if(array.push(value()),white(),"]"===ch)return next("]"),array;next(","),white()}}error("Bad array")},object=function(){var key,object={};if("{"===ch){if(next("{"),white(),"}"===ch)return next("}"),object;for(;ch;){if(key=string(),white(),next(":"),Object.hasOwnProperty.call(object,key)&&error(\'Duplicate key "\'+key+\'"\'),object[key]=value(),white(),"}"===ch)return next("}"),object;next(","),white()}}error("Bad object")};return value=function(){switch(white(),ch){case"{":return object();case"[":return array();case\'"\':return string();case"-":return number();default:return ch>="0"&&"9">=ch?number():word()}},function(source,reviver){var result;return text=source,at=0,ch=" ",result=value(),white(),ch&&error("Syntax error"),"function"==typeof reviver?function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}({"":result},""):result}}),ace.define("ace/mode/json_worker",["require","exports","module","ace/lib/oop","ace/worker/mirror","ace/mode/json/json_parse"],function(acequire,exports){"use strict";var oop=acequire("../lib/oop"),Mirror=acequire("../worker/mirror").Mirror,parse=acequire("./json/json_parse"),JsonWorker=exports.JsonWorker=function(sender){Mirror.call(this,sender),this.setTimeout(200)};oop.inherits(JsonWorker,Mirror),function(){this.onUpdate=function(){var value=this.doc.getValue(),errors=[];try{value&&parse(value)}catch(e){var pos=this.doc.indexToPosition(e.at-1);errors.push({row:pos.row,column:pos.column,text:e.message,type:"error"})}this.sender.emit("annotate",errors)}}.call(JsonWorker.prototype)}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(){function Empty(){}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){}}function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if("function"!=typeof target)throw new TypeError("Function.prototype.bind called on incompatible "+target);var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))};return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty);if((supportsAccessors=owns(prototypeOfObject,"__defineGetter__"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){var a=Array(l+2);return a[0]=a[1]=0,a}var lengthBefore,array=[];return array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,array.splice(5,0,"XXX"),lengthBefore+1==array.length,lengthBefore+1==array.length?!0:void 0\n}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]}}else Array.prototype.splice=function(pos,removeCount){var length=this.length;pos>0?pos>length&&(pos=length):void 0==pos?pos=0:0>pos&&(pos=Math.max(length+pos,0)),length>pos+removeCount||(removeCount=length-pos);var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length;if(pos===length)add&&this.push.apply(this,insert);else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove;if(tailOldPos>tailNewPos)for(var i=0;tailCount>i;++i)this[tailNewPos+i]=this[tailOldPos+i];else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i];if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert);else for(this.length=lengthAfterRemove+add,i=0;add>i;++i)this[pos+i]=insert[i]}return removed};Array.isArray||(Array.isArray=function(obj){return"[object Array]"==_toString(obj)});var boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString);if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,thisp=arguments[1],i=-1,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError;for(;length>++i;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=[],thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(0>--i)throw new TypeError("reduceRight of empty array with no initial value")}do i in this&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(object,property){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(owns(object,property)){var descriptor,getter,setter;if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty;createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={};for(var i in empty)empty[i]=null;return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,empty},Object.create=function(prototype,properties){var object;if(null===prototype)object=createEmpty();else{if("object"!=typeof prototype)throw new TypeError("typeof prototype["+typeof prototype+"] != \'object\'");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ",ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ",ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(object,property,descriptor){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if("object"!=typeof descriptor&&"function"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,"value"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,"get")&&defineGetter(object,property,descriptor.get),owns(descriptor,"set")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return"function"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(object){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError("Object.keys called on a non-object");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;ii>i;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()});var ws="\t\\n\v\\f\\r   ᠎             　\\u2028\\u2029\ufeff";if(!String.prototype.trim||ws.trim()){ws="["+ws+"]";var trimBeginRegexp=RegExp("^"+ws+ws+"*"),trimEndRegexp=RegExp(ws+ws+"*$");String.prototype.trim=function(){return(this+"").replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}}var toObject=function(o){if(null==o)throw new TypeError("can\'t convert "+o+" to object");return Object(o)}});'},function(module,exports){ace.define("ace/theme/github",["require","exports","module","ace/lib/dom"],(function(acequire,exports,module){exports.isDark=false;exports.cssClass="ace-github";exports.cssText='.ace-github .ace_gutter {background: #e8e8e8;color: #AAA;}.ace-github  {background: #fff;color: #000;}.ace-github .ace_keyword {font-weight: bold;}.ace-github .ace_string {color: #D14;}.ace-github .ace_variable.ace_class {color: teal;}.ace-github .ace_constant.ace_numeric {color: #099;}.ace-github .ace_constant.ace_buildin {color: #0086B3;}.ace-github .ace_support.ace_function {color: #0086B3;}.ace-github .ace_comment {color: #998;font-style: italic;}.ace-github .ace_variable.ace_language  {color: #0086B3;}.ace-github .ace_paren {font-weight: bold;}.ace-github .ace_boolean {font-weight: bold;}.ace-github .ace_string.ace_regexp {color: #009926;font-weight: normal;}.ace-github .ace_variable.ace_instance {color: teal;}.ace-github .ace_constant.ace_language {font-weight: bold;}.ace-github .ace_cursor {color: black;}.ace-github.ace_focus .ace_marker-layer .ace_active-line {background: rgb(255, 255, 204);}.ace-github .ace_marker-layer .ace_active-line {background: rgb(245, 245, 245);}.ace-github .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-github.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-github.ace_nobold .ace_line > span {font-weight: normal !important;}.ace-github .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-github .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-github .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-github .ace_gutter-active-line {background-color : rgba(0, 0, 0, 0.07);}.ace-github .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-github .ace_invisible {color: #BFBFBF}.ace-github .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-github .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var dom=acequire("../lib/dom");dom.importCssString(exports.cssText,exports.cssClass)}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"DefaultEditorController",(function(){return default_editor_controller_DefaultEditorController}));__webpack_require__.d(__webpack_exports__,"useValidation",(function(){return utils["g"]}));__webpack_require__.d(__webpack_exports__,"RangesParamEditor",(function(){return ranges["b"]}));__webpack_require__.d(__webpack_exports__,"RangeValues",(function(){return ranges["RangeValues"]}));__webpack_require__.d(__webpack_exports__,"DefaultEditorAggParams",(function(){return agg_params["a"]}));__webpack_require__.d(__webpack_exports__,"DefaultEditorSize",(function(){return editor_size["a"]}));__webpack_require__.d(__webpack_exports__,"getInitialWidth",(function(){return editor_size["b"]}));__webpack_require__.d(__webpack_exports__,"groupAndSortBy",(function(){return public_utils["a"]}));__webpack_require__.d(__webpack_exports__,"ISchemas",(function(){return schemas["ISchemas"]}));__webpack_require__.d(__webpack_exports__,"Schemas",(function(){return schemas["c"]}));__webpack_require__.d(__webpack_exports__,"Schema",(function(){return schemas["Schema"]}));__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var external_osdSharedDeps_React_=__webpack_require__(0);var external_osdSharedDeps_React_default=__webpack_require__.n(external_osdSharedDeps_React_);var external_osdSharedDeps_ReactDom_=__webpack_require__(27);var external_osdSharedDeps_ElasticEui_=__webpack_require__(1);function _extends(){_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const DefaultEditor=Object(external_osdSharedDeps_React_["lazy"])(()=>__webpack_require__.e(1).then(__webpack_require__.bind(null,170)));class default_editor_controller_DefaultEditorController{constructor(el,vis,eventEmitter,embeddableHandler){this.el=el;this.vis=vis;this.eventEmitter=eventEmitter;this.embeddableHandler=embeddableHandler}render(props){Object(external_osdSharedDeps_ReactDom_["render"])(external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiErrorBoundary"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Suspense"],{fallback:external_osdSharedDeps_React_default.a.createElement("div",{style:{display:"flex",flex:"1 1 auto",justifyContent:"center",alignItems:"center"}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLoadingChart"],{size:"xl",mono:true}))},external_osdSharedDeps_React_default.a.createElement(DefaultEditor,_extends({eventEmitter:this.eventEmitter,embeddableHandler:this.embeddableHandler,vis:this.vis},props)))),this.el)}destroy(){Object(external_osdSharedDeps_ReactDom_["unmountComponentAtNode"])(this.el)}}var utils=__webpack_require__(7);var ranges=__webpack_require__(20);var agg_params=__webpack_require__(13);var editor_size=__webpack_require__(28);var public_utils=__webpack_require__(21);var schemas=__webpack_require__(12);function public_plugin(){return new class VisDefaultEditor{setup(){}start(){}}}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__osdBundles__.get("plugin/opensearchDashboardsUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))}]);