(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=22)})([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"TypeToString",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"KnownTypeToString",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"TypeString",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"UnmappedTypeStrings",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SerializedFieldFormat",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"BackgroundRepeat",(function(){return BackgroundRepeat}));__webpack_require__.d(__webpack_exports__,"BackgroundSize",(function(){return BackgroundSize}));__webpack_require__.d(__webpack_exports__,"FontStyle",(function(){return FontStyle}));__webpack_require__.d(__webpack_exports__,"FontWeight",(function(){return FontWeight}));__webpack_require__.d(__webpack_exports__,"Overflow",(function(){return Overflow}));__webpack_require__.d(__webpack_exports__,"TextAlignment",(function(){return TextAlignment}));__webpack_require__.d(__webpack_exports__,"TextDecoration",(function(){return TextDecoration}));__webpack_require__.d(__webpack_exports__,"isExpressionAstBuilder",(function(){return isExpressionAstBuilder}));__webpack_require__.d(__webpack_exports__,"isExpressionAst",(function(){return isExpressionAst}));__webpack_require__.d(__webpack_exports__,"buildExpression",(function(){return buildExpression}));__webpack_require__.d(__webpack_exports__,"buildExpressionFunction",(function(){return buildExpressionFunction}));__webpack_require__.d(__webpack_exports__,"formatExpression",(function(){return formatExpression}));__webpack_require__.d(__webpack_exports__,"format",(function(){return format}));__webpack_require__.d(__webpack_exports__,"parseExpression",(function(){return parseExpression}));__webpack_require__.d(__webpack_exports__,"parse",(function(){return parse}));__webpack_require__.d(__webpack_exports__,"americanTypewriter",(function(){return fonts["americanTypewriter"]}));__webpack_require__.d(__webpack_exports__,"arial",(function(){return fonts["arial"]}));__webpack_require__.d(__webpack_exports__,"baskerville",(function(){return fonts["baskerville"]}));__webpack_require__.d(__webpack_exports__,"bookAntiqua",(function(){return fonts["bookAntiqua"]}));__webpack_require__.d(__webpack_exports__,"brushScript",(function(){return fonts["brushScript"]}));__webpack_require__.d(__webpack_exports__,"chalkboard",(function(){return fonts["chalkboard"]}));__webpack_require__.d(__webpack_exports__,"didot",(function(){return fonts["didot"]}));__webpack_require__.d(__webpack_exports__,"futura",(function(){return fonts["futura"]}));__webpack_require__.d(__webpack_exports__,"gillSans",(function(){return fonts["gillSans"]}));__webpack_require__.d(__webpack_exports__,"helveticaNeue",(function(){return fonts["helveticaNeue"]}));__webpack_require__.d(__webpack_exports__,"hoeflerText",(function(){return fonts["hoeflerText"]}));__webpack_require__.d(__webpack_exports__,"lucidaGrande",(function(){return fonts["lucidaGrande"]}));__webpack_require__.d(__webpack_exports__,"myriad",(function(){return fonts["myriad"]}));__webpack_require__.d(__webpack_exports__,"openSans",(function(){return fonts["openSans"]}));__webpack_require__.d(__webpack_exports__,"optima",(function(){return fonts["optima"]}));__webpack_require__.d(__webpack_exports__,"palatino",(function(){return fonts["palatino"]}));__webpack_require__.d(__webpack_exports__,"fonts",(function(){return fonts["fonts"]}));__webpack_require__.d(__webpack_exports__,"getType",(function(){return getType}));__webpack_require__.d(__webpack_exports__,"serializeProvider",(function(){return serializeProvider}));__webpack_require__.d(__webpack_exports__,"ExpressionType",(function(){return expression_type_ExpressionType}));__webpack_require__.d(__webpack_exports__,"typeSpecs",(function(){return typeSpecs}));__webpack_require__.d(__webpack_exports__,"boolean",(function(){return boolean_boolean}));__webpack_require__.d(__webpack_exports__,"isDatatable",(function(){return isDatatable}));__webpack_require__.d(__webpack_exports__,"datatable",(function(){return datatable}));__webpack_require__.d(__webpack_exports__,"isExpressionValueError",(function(){return isExpressionValueError}));__webpack_require__.d(__webpack_exports__,"error",(function(){return error_error}));__webpack_require__.d(__webpack_exports__,"filter",(function(){return filter}));__webpack_require__.d(__webpack_exports__,"image",(function(){return image_image}));__webpack_require__.d(__webpack_exports__,"opensearchDashboardsContext",(function(){return opensearchDashboardsContext}));__webpack_require__.d(__webpack_exports__,"opensearchDashboardsDatatable",(function(){return opensearchDashboardsDatatable}));__webpack_require__.d(__webpack_exports__,"nullType",(function(){return nullType}));__webpack_require__.d(__webpack_exports__,"num",(function(){return num}));__webpack_require__.d(__webpack_exports__,"number",(function(){return number}));__webpack_require__.d(__webpack_exports__,"pointseries",(function(){return pointseries}));__webpack_require__.d(__webpack_exports__,"range",(function(){return range}));__webpack_require__.d(__webpack_exports__,"render",(function(){return render}));__webpack_require__.d(__webpack_exports__,"shape",(function(){return shape}));__webpack_require__.d(__webpack_exports__,"string",(function(){return string}));__webpack_require__.d(__webpack_exports__,"style",(function(){return style}));__webpack_require__.d(__webpack_exports__,"ExpressionFunctionParameter",(function(){return ExpressionFunctionParameter}));__webpack_require__.d(__webpack_exports__,"ExpressionFunction",(function(){return expression_function_ExpressionFunction}));__webpack_require__.d(__webpack_exports__,"functionSpecs",(function(){return functionSpecs}));__webpack_require__.d(__webpack_exports__,"clog",(function(){return clog}));__webpack_require__.d(__webpack_exports__,"font",(function(){return font}));__webpack_require__.d(__webpack_exports__,"opensearchDashboards",(function(){return opensearchDashboards}));__webpack_require__.d(__webpack_exports__,"opensearchDashboardsContextFunction",(function(){return opensearchDashboardsContextFunction}));__webpack_require__.d(__webpack_exports__,"variableSet",(function(){return variableSet}));__webpack_require__.d(__webpack_exports__,"variable",(function(){return variable}));__webpack_require__.d(__webpack_exports__,"theme",(function(){return theme}));__webpack_require__.d(__webpack_exports__,"ExpressionRenderer",(function(){return ExpressionRenderer}));__webpack_require__.d(__webpack_exports__,"ExpressionRendererRegistry",(function(){return expression_renderer_registry_ExpressionRendererRegistry}));__webpack_require__.d(__webpack_exports__,"defaultState",(function(){return defaultState}));__webpack_require__.d(__webpack_exports__,"pureTransitions",(function(){return pureTransitions}));__webpack_require__.d(__webpack_exports__,"pureSelectors",(function(){return pureSelectors}));__webpack_require__.d(__webpack_exports__,"createExecutorContainer",(function(){return createExecutorContainer}));__webpack_require__.d(__webpack_exports__,"TypesRegistry",(function(){return TypesRegistry}));__webpack_require__.d(__webpack_exports__,"FunctionsRegistry",(function(){return FunctionsRegistry}));__webpack_require__.d(__webpack_exports__,"Executor",(function(){return executor_Executor}));__webpack_require__.d(__webpack_exports__,"executionPureTransitions",(function(){return executionPureTransitions}));__webpack_require__.d(__webpack_exports__,"createExecutionContainer",(function(){return createExecutionContainer}));__webpack_require__.d(__webpack_exports__,"Execution",(function(){return execution_Execution}));__webpack_require__.d(__webpack_exports__,"ExecutionContract",(function(){return ExecutionContract}));__webpack_require__.d(__webpack_exports__,"ExpressionsService",(function(){return expressions_services_ExpressionsService}));__webpack_require__.d(__webpack_exports__,"createError",(function(){return createError}));__webpack_require__.d(__webpack_exports__,"getByAlias",(function(){return getByAlias}));let BackgroundRepeat=function(BackgroundRepeat){BackgroundRepeat["REPEAT"]="repeat";BackgroundRepeat["REPEAT_NO"]="no-repeat";BackgroundRepeat["REPEAT_X"]="repeat-x";BackgroundRepeat["REPEAT_Y"]="repeat-y";BackgroundRepeat["ROUND"]="round";BackgroundRepeat["SPACE"]="space";return BackgroundRepeat}({});let BackgroundSize=function(BackgroundSize){BackgroundSize["AUTO"]="auto";BackgroundSize["CONTAIN"]="contain";BackgroundSize["COVER"]="cover";return BackgroundSize}({});let FontStyle=function(FontStyle){FontStyle["ITALIC"]="italic";FontStyle["NORMAL"]="normal";return FontStyle}({});let FontWeight=function(FontWeight){FontWeight["NORMAL"]="normal";FontWeight["BOLD"]="bold";FontWeight["BOLDER"]="bolder";FontWeight["LIGHTER"]="lighter";FontWeight["ONE"]="100";FontWeight["TWO"]="200";FontWeight["THREE"]="300";FontWeight["FOUR"]="400";FontWeight["FIVE"]="500";FontWeight["SIX"]="600";FontWeight["SEVEN"]="700";FontWeight["EIGHT"]="800";FontWeight["NINE"]="900";return FontWeight}({});let Overflow=function(Overflow){Overflow["AUTO"]="auto";Overflow["HIDDEN"]="hidden";Overflow["SCROLL"]="scroll";Overflow["VISIBLE"]="visible";return Overflow}({});let TextAlignment=function(TextAlignment){TextAlignment["CENTER"]="center";TextAlignment["JUSTIFY"]="justify";TextAlignment["LEFT"]="left";TextAlignment["RIGHT"]="right";return TextAlignment}({});let TextDecoration=function(TextDecoration){TextDecoration["NONE"]="none";TextDecoration["UNDERLINE"]="underline";return TextDecoration}({});const{toExpression:toExpression}=__webpack_require__(15);function format(ast,type){return toExpression(ast,type)}function buildExpressionFunction(fnName,initialArgs){const args=Object.entries(initialArgs).reduce((acc,_ref)=>{let[key,value]=_ref;if(Array.isArray(value)){acc[key]=value.map(v=>isExpressionAst(v)?buildExpression(v):v)}else if(value!==undefined){acc[key]=isExpressionAst(value)?[buildExpression(value)]:[value]}else{delete acc[key]}return acc},initialArgs);return{type:"expression_function_builder",name:fnName,arguments:args,addArgument(key,value){if(value!==undefined){if(!args.hasOwnProperty(key)){args[key]=[]}args[key].push(value)}return this},getArgument(key){if(!args.hasOwnProperty(key)){return}return args[key]},replaceArgument(key,values){if(!args.hasOwnProperty(key)){throw new Error("Argument to replace does not exist on this function")}args[key]=values;return this},removeArgument(key){delete args[key];return this},toAst(){const ast={};return{type:"function",function:fnName,arguments:Object.entries(args).reduce((acc,_ref2)=>{let[key,values]=_ref2;acc[key]=values.map(val=>isExpressionAstBuilder(val)?val.toAst():val);return acc},ast)}},toString(){return format({type:"expression",chain:[this.toAst()]},"expression")}}}const{parse:parseRaw}=__webpack_require__(15);function parse(expression,startRule){try{return parseRaw(String(expression),{startRule:startRule})}catch(e){throw new Error(`Unable to parse expression: ${e.message}`)}}function isExpressionAstBuilder(val){return(val===null||val===void 0?void 0:val.type)==="expression_builder"}function isExpressionAst(val){return(val===null||val===void 0?void 0:val.type)==="expression"}const generateExpressionAst=fns=>({type:"expression",chain:fns.map(fn=>fn.toAst())});function buildExpression(initialState){const chainToFunctionBuilder=chain=>chain.map(fn=>buildExpressionFunction(fn.function,fn.arguments));const extractFunctionsFromState=state=>{if(typeof state==="string"){return chainToFunctionBuilder(parse(state,"expression").chain)}else if(!Array.isArray(state)){return chainToFunctionBuilder(state.chain)}return state};const fns=initialState?extractFunctionsFromState(initialState):[];return{type:"expression_builder",functions:fns,findFunction(fnName){const foundFns=[];return fns.reduce((found,currFn)=>{Object.values(currFn.arguments).forEach(values=>{values.forEach(value=>{if(isExpressionAstBuilder(value)){found=found.concat(value.findFunction(fnName))}})});if(currFn.name===fnName){found.push(currFn)}return found},foundFns)},toAst(){if(fns.length<1){throw new Error("Functions have not been added to the expression builder")}return generateExpressionAst(fns)},toString(){if(fns.length<1){throw new Error("Functions have not been added to the expression builder")}return format(generateExpressionAst(fns),"expression")}}}function formatExpression(ast){return format(ast,"expression")}function parseExpression(expression){return parse(expression,"expression")}var fonts=__webpack_require__(8);function getType(node){if(node==null)return"null";if(typeof node==="object"){if(!node.type)throw new Error("Objects must have a type property");return node.type}return typeof node}const identity=x=>x;const serializeProvider=types=>({serialize:value=>(types[getType(value)].serialize||identity)(value),deserialize:value=>(types[getType(value)].deserialize||identity)(value)});function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}class expression_type_ExpressionType{constructor(definition){this.definition=definition;_defineProperty(this,"name",void 0);_defineProperty(this,"help",void 0);_defineProperty(this,"validate",void 0);_defineProperty(this,"create",void 0);_defineProperty(this,"serialize",void 0);_defineProperty(this,"deserialize",void 0);_defineProperty(this,"getToFn",typeName=>!this.definition.to?undefined:this.definition.to[typeName]||this.definition.to["*"]);_defineProperty(this,"getFromFn",typeName=>!this.definition.from?undefined:this.definition.from[typeName]||this.definition.from["*"]);_defineProperty(this,"castsTo",value=>typeof this.getToFn(value)==="function");_defineProperty(this,"castsFrom",value=>typeof this.getFromFn(value)==="function");_defineProperty(this,"to",(value,toTypeName,types)=>{const typeName=getType(value);if(typeName!==this.name){throw new Error(`Can not cast object of type '${typeName}' using '${this.name}'`)}else if(!this.castsTo(toTypeName)){throw new Error(`Can not cast '${typeName}' to '${toTypeName}'`)}return this.getToFn(toTypeName)(value,types)});_defineProperty(this,"from",(value,types)=>{const typeName=getType(value);if(!this.castsFrom(typeName)){throw new Error(`Can not cast '${this.name}' from ${typeName}`)}return this.getFromFn(typeName)(value,types)});const{name:name,help:help,deserialize:deserialize,serialize:serialize,validate:validate}=definition;this.name=name;this.help=help||"";this.validate=validate||(()=>{});this.create=definition.create;this.serialize=serialize;this.deserialize=deserialize}}const boolean_name="boolean";const boolean_boolean={name:boolean_name,from:{null:()=>false,number:n=>Boolean(n),string:s=>Boolean(s)},to:{render:value=>{const text=`${value}`;return{type:"render",as:"text",value:{text:text}}},datatable:value=>({type:"datatable",columns:[{id:"value",name:"value",meta:{type:boolean_name}}],rows:[{value:value}]})}};var external_osdSharedDeps_Lodash_=__webpack_require__(2);const datatable_name="datatable";const isDatatable=datatable=>!!datatable&&typeof datatable==="object"&&datatable.type==="datatable";const datatable={name:datatable_name,validate:table=>{if(!table.columns){throw new Error("datatable must have a columns array, even if it is empty")}if(!table.rows){throw new Error("datatable must have a rows array, even if it is empty")}},serialize:table=>{const{columns:columns,rows:rows}=table;return{...table,rows:rows.map(row=>columns.map(column=>row[column.name]))}},deserialize:table=>{const{columns:columns,rows:rows}=table;return{...table,rows:rows.map(row=>Object(external_osdSharedDeps_Lodash_["zipObject"])(Object(external_osdSharedDeps_Lodash_["map"])(columns,"name"),row))}},from:{null:()=>({type:datatable_name,meta:{},rows:[],columns:[]}),pointseries:value=>({type:datatable_name,meta:{},rows:value.rows,columns:Object(external_osdSharedDeps_Lodash_["map"])(value.columns,(val,colName)=>({id:colName,name:colName,meta:{type:val.type}}))})},to:{render:table=>({type:"render",as:"table",value:{datatable:table,paginate:true,perPage:10,showHeader:true}}),pointseries:table=>{const validFields=["x","y","color","size","text"];const columns=table.columns.filter(column=>validFields.includes(column.id));const rows=table.rows.map(row=>Object(external_osdSharedDeps_Lodash_["pick"])(row,validFields));return{type:"pointseries",columns:columns.reduce((acc,column)=>{acc[column.name]={type:column.meta.type,expression:column.name,role:"dimension"};return acc},{}),rows:rows}}}};const error_name="error";const isExpressionValueError=value=>getType(value)==="error";const error_error={name:error_name,to:{render:input=>({type:"render",as:error_name,value:{error:input.error,info:input.info}})}};const filter={name:"filter",from:{null:()=>({type:"filter",filterType:"filter",meta:{},and:[]})}};const image_name="image";const image_image={name:image_name,to:{render:input=>({type:"render",as:"image",value:input})}};const opensearchDashboardsContext={name:"opensearch_dashboards_context",from:{null:()=>({type:"opensearch_dashboards_context"})},to:{null:()=>({type:"null"})}};const opensearch_dashboards_datatable_name="opensearch_dashboards_datatable";const opensearchDashboardsDatatable={name:opensearch_dashboards_datatable_name,from:{datatable:context=>({type:opensearch_dashboards_datatable_name,rows:context.rows,columns:context.columns.map(column=>({id:column.name,name:column.name}))}),pointseries:context=>{const columns=Object(external_osdSharedDeps_Lodash_["map"])(context.columns,(column,n)=>({id:n,name:n,...column}));return{type:opensearch_dashboards_datatable_name,rows:context.rows,columns:columns}}}};const null_name="null";const nullType={name:null_name,from:{"*":()=>null}};var external_osdSharedDeps_OsdI18n_=__webpack_require__(1);const num={name:"num",from:{null:()=>({type:"num",value:0}),boolean:b=>({type:"num",value:Number(b)}),string:n=>{const value=Number(n);if(Number.isNaN(value)){throw new Error(external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.types.number.fromStringConversionErrorMessage",{defaultMessage:'Can\'t typecast "{string}" string to number',values:{string:n}}))}return{type:"num",value:value}},"*":value=>({type:"num",value:Number(value)})},to:{render:_ref=>{let{value:value}=_ref;const text=`${value}`;return{type:"render",as:"text",value:{text:text}}},datatable:_ref2=>{let{value:value}=_ref2;return{type:"datatable",columns:[{id:"value",name:"value",meta:{type:"number"}}],rows:[{value:value}]}}}};const number_name="number";const number={name:number_name,from:{null:()=>0,boolean:b=>Number(b),string:n=>{const value=Number(n);if(Number.isNaN(value)){throw new Error(external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.types.number.fromStringConversionErrorMessage",{defaultMessage:'Can\'t typecast "{string}" string to number',values:{string:n}}))}return value}},to:{render:value=>{const text=`${value}`;return{type:"render",as:"text",value:{text:text}}},datatable:value=>({type:"datatable",columns:[{id:"value",name:"value",meta:{type:"number"}}],rows:[{value:value}]})}};const pointseries_name="pointseries";const pointseries={name:pointseries_name,from:{null:()=>({type:pointseries_name,rows:[],columns:{}})},to:{render:(pseries,types)=>{const datatable=types.datatable.from(pseries,types);return{type:"render",as:"table",value:{datatable:datatable,showHeader:true}}}}};const range_name="range";const range={name:range_name,from:{null:()=>({type:"range",from:0,to:0})},to:{render:value=>{const text=`from ${value.from} to ${value.to}`;return{type:"render",as:"text",value:{text:text}}}}};const render_name="render";const render={name:render_name,from:{"*":v=>({type:render_name,as:"debug",value:v})}};const shape_name="shape";const shape={name:"shape",to:{render:input=>({type:"render",as:shape_name,value:input})}};const string_name="string";const string={name:string_name,from:{null:()=>"",boolean:b=>String(b),number:n=>String(n)},to:{render:text=>({type:"render",as:"text",value:{text:text}}),datatable:value=>({type:"datatable",columns:[{id:"value",name:"value",meta:{type:"string"}}],rows:[{value:value}]})}};const style_name="style";const style={name:style_name,from:{null:()=>({type:"style",spec:{},css:""})}};const typeSpecs=[boolean_boolean,datatable,error_error,filter,image_image,opensearchDashboardsContext,opensearchDashboardsDatatable,nullType,num,number,pointseries,range,render,shape,string,style];function expression_function_parameter_defineProperty(obj,key,value){key=expression_function_parameter_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function expression_function_parameter_toPropertyKey(arg){var key=expression_function_parameter_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function expression_function_parameter_toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}class ExpressionFunctionParameter{constructor(name,arg){expression_function_parameter_defineProperty(this,"name",void 0);expression_function_parameter_defineProperty(this,"required",void 0);expression_function_parameter_defineProperty(this,"help",void 0);expression_function_parameter_defineProperty(this,"types",void 0);expression_function_parameter_defineProperty(this,"default",void 0);expression_function_parameter_defineProperty(this,"aliases",void 0);expression_function_parameter_defineProperty(this,"multi",void 0);expression_function_parameter_defineProperty(this,"resolve",void 0);expression_function_parameter_defineProperty(this,"options",void 0);const{required:required,help:help,types:types,aliases:aliases,multi:multi,resolve:resolve,options:options}=arg;if(name==="_"){throw Error("Arg names must not be _. Use it in aliases instead.")}this.name=name;this.required=!!required;this.help=help||"";this.types=types||[];this.default=arg.default;this.aliases=aliases||[];this.multi=!!multi;this.resolve=resolve==null?true:resolve;this.options=options||[]}accepts(type){if(!this.types.length)return true;return this.types.indexOf(type)>-1}}function expression_function_defineProperty(obj,key,value){key=expression_function_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function expression_function_toPropertyKey(arg){var key=expression_function_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function expression_function_toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}class expression_function_ExpressionFunction{constructor(functionDefinition){expression_function_defineProperty(this,"name",void 0);expression_function_defineProperty(this,"aliases",void 0);expression_function_defineProperty(this,"type",void 0);expression_function_defineProperty(this,"fn",void 0);expression_function_defineProperty(this,"help",void 0);expression_function_defineProperty(this,"args",{});expression_function_defineProperty(this,"inputTypes",void 0);expression_function_defineProperty(this,"accepts",type=>{if(!this.inputTypes)return true;return this.inputTypes.indexOf(type)>-1});const{name:name,type:_type,aliases:aliases,fn:fn,help:help,args:args,inputTypes:inputTypes,context:context}=functionDefinition;this.name=name;this.type=_type;this.aliases=aliases||[];this.fn=(input,params,handlers)=>Promise.resolve(fn(input,params,handlers));this.help=help||"";this.inputTypes=inputTypes||(context===null||context===void 0?void 0:context.types);for(const[key,arg]of Object.entries(args||{})){this.args[key]=new ExpressionFunctionParameter(key,arg)}}}const clog={name:"clog",args:{},help:"Outputs the context to the console",fn:input=>{console.log(input);return input}};const dashify=str=>str.trim().replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\W/g,m=>/[À-ž]/.test(m)?m:"-").replace(/^-+|-+$/g,"").toLowerCase();const inlineStyle=obj=>{if(!obj)return"";const styles=Object.keys(obj).map(key=>{const prop=dashify(key);const line=prop.concat(":").concat(String(obj[key]));return line});return styles.join(";")};const font={name:"font",aliases:[],type:"style",help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.fontHelpText",{defaultMessage:"Create a font style."}),inputTypes:["null"],args:{align:{default:'{ theme "font.align" default="left" }',help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.font.args.alignHelpText",{defaultMessage:"The horizontal text alignment."}),options:Object.values(TextAlignment),types:["string"]},color:{default:`{ theme "font.color" }`,help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.font.args.colorHelpText",{defaultMessage:"The text color."}),types:["string"]},family:{default:`{ theme "font.family" default="${fonts["openSans"].value}" }`,help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.font.args.familyHelpText",{defaultMessage:"An acceptable {css} web font string",values:{css:"CSS"}}),types:["string"]},italic:{default:`{ theme "font.italic" default=false }`,help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.font.args.italicHelpText",{defaultMessage:"Italicize the text?"}),options:[true,false],types:["boolean"]},lHeight:{default:`{ theme "font.lHeight" }`,aliases:["lineHeight"],help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.font.args.lHeightHelpText",{defaultMessage:"The line height in pixels"}),types:["number","null"]},size:{default:`{ theme "font.size" default=14 }`,help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.font.args.sizeHelpText",{defaultMessage:"The font size in pixels"}),types:["number"]},underline:{default:`{ theme "font.underline" default=false }`,help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.font.args.underlineHelpText",{defaultMessage:"Underline the text?"}),options:[true,false],types:["boolean"]},weight:{default:`{ theme "font.weight" default="normal" }`,help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.font.args.weightHelpText",{defaultMessage:"The font weight. For example, {list}, or {end}.",values:{list:Object.values(FontWeight).slice(0,-1).map(weight=>`\`"${weight}"\``).join(", "),end:`\`"${Object.values(FontWeight).slice(-1)[0]}"\``}}),options:Object.values(FontWeight),types:["string"]}},fn:(input,args)=>{if(!Object.values(FontWeight).includes(args.weight)){throw new Error(external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.font.invalidFontWeightErrorMessage",{defaultMessage:"Invalid font weight: '{weight}'",values:{weight:args.weight}}))}if(!Object.values(TextAlignment).includes(args.align)){throw new Error(external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.font.invalidTextAlignmentErrorMessage",{defaultMessage:"Invalid text alignment: '{align}'",values:{align:args.align}}))}const lineHeight=args.lHeight!=null?`${args.lHeight}px`:"1";const spec={fontFamily:args.family,fontWeight:args.weight,fontStyle:args.italic?FontStyle.ITALIC:FontStyle.NORMAL,textDecoration:args.underline?TextDecoration.UNDERLINE:TextDecoration.NONE,textAlign:args.align,fontSize:`${args.size}px`,lineHeight:lineHeight};if(args.color){spec.color=args.color}return{type:"style",spec:spec,css:inlineStyle(spec)}}};const toArray=query=>!query?[]:Array.isArray(query)?query:[query];const opensearchDashboards={name:"opensearchDashboards",type:"opensearch_dashboards_context",inputTypes:["opensearch_dashboards_context","null"],help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.opensearchDashboards.help",{defaultMessage:"Gets OpenSearch Dashboards global context"}),args:{},fn(input,_,_ref){let{search:search={}}=_ref;const output={...input,type:"opensearch_dashboards_context",query:[...toArray(search.query),...toArray((input||{}).query)],filters:[...search.filters||[],...(input||{}).filters||[]],timeRange:search.timeRange||(input?input.timeRange:undefined)};return output}};var common_=__webpack_require__(17);const getParsedValue=(data,defaultValue)=>typeof data==="string"&&data.length?JSON.parse(data)||defaultValue:defaultValue;const mergeQueries=function(){let first=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];let second=arguments.length>1?arguments[1]:undefined;return Object(external_osdSharedDeps_Lodash_["uniqBy"])([...Array.isArray(first)?first:[first],...Array.isArray(second)?second:[second]],n=>JSON.stringify(n.query))};const opensearchDashboardsContextFunction={name:"opensearch_dashboards_context",type:"opensearch_dashboards_context",inputTypes:["opensearch_dashboards_context","null"],help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.opensearch_dashboards_context.help",{defaultMessage:"Updates opensearch dashboards global context"}),args:{q:{types:["string","null"],aliases:["query","_"],default:null,help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.opensearch_dashboards_context.q.help",{defaultMessage:"Specify OpenSearch Dashboards free form text query"})},filters:{types:["string","null"],default:'"[]"',help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.opensearch_dashboards_context.filters.help",{defaultMessage:"Specify OpenSearch Dashboards generic filters"})},timeRange:{types:["string","null"],default:null,help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.opensearch_dashboards_context.timeRange.help",{defaultMessage:"Specify OpenSearch Dashboards time range filter"})},savedSearchId:{types:["string","null"],default:null,help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.opensearch_dashboards_context.savedSearchId.help",{defaultMessage:"Specify saved search ID to be used for queries and filters"})}},async fn(input,args,_ref){let{getSavedObject:getSavedObject}=_ref;const timeRange=getParsedValue(args.timeRange,input===null||input===void 0?void 0:input.timeRange);let queries=mergeQueries(input===null||input===void 0?void 0:input.query,getParsedValue(args===null||args===void 0?void 0:args.q,[]));let filters=[...(input===null||input===void 0?void 0:input.filters)||[],...getParsedValue(args===null||args===void 0?void 0:args.filters,[])];if(args.savedSearchId){if(typeof getSavedObject!=="function"){throw new Error('"getSavedObject" function not available in execution context. '+"When you execute expression you need to add extra execution context "+'as the third argument and provide "getSavedObject" implementation.')}const obj=await getSavedObject("search",args.savedSearchId);const search=obj.attributes.kibanaSavedObjectMeta;const{query:query,filter:filter}=getParsedValue(search.searchSourceJSON,{});if(query){queries=mergeQueries(queries,query)}if(filter){filters=[...filters,...Array.isArray(filter)?filter:[filter]]}}return{type:"opensearch_dashboards_context",query:queries,filters:Object(common_["uniqFilters"])(filters).filter(f=>{var _f$meta;return!((_f$meta=f.meta)!==null&&_f$meta!==void 0&&_f$meta.disabled)}),timeRange:timeRange}}};const variableSet={name:"var_set",help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.varset.help",{defaultMessage:"Updates the OpenSearch Dashboards global context."}),args:{name:{types:["string"],aliases:["_"],required:true,help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.varset.name.help",{defaultMessage:"Specify the name of the variable."})},value:{aliases:["val"],help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.varset.val.help",{defaultMessage:"Specify the value for the variable. When unspecified, the input context is used."})}},fn(input,args,context){const variables=context.variables;variables[args.name]=args.value===undefined?input:args.value;return input}};const variable={name:"var",help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.var.help",{defaultMessage:"Updates the OpenSearch Dashboards global context."}),args:{name:{types:["string"],aliases:["_"],required:true,help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.var.name.help",{defaultMessage:"Specify the name of the variable."})}},fn(input,args,context){const variables=context.variables;return variables[args.name]}};const theme={name:"theme",aliases:[],help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.themeHelpText",{defaultMessage:"Reads a theme setting."}),inputTypes:["null"],args:{variable:{aliases:["_"],help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.theme.args.variableHelpText",{defaultMessage:"Name of the theme variable to read."}),required:true,types:["string"]},default:{help:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.functions.theme.args.defaultHelpText",{defaultMessage:"default value in case theming info is not available."})}},fn:(input,args,handlers)=>{const vars=handlers.variables.theme||{};return Object(external_osdSharedDeps_Lodash_["get"])(vars,args.variable,args.default)}};const functionSpecs=[clog,font,opensearchDashboards,opensearchDashboardsContextFunction,variableSet,variable,theme];function expression_renderer_defineProperty(obj,key,value){key=expression_renderer_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function expression_renderer_toPropertyKey(arg){var key=expression_renderer_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function expression_renderer_toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}class ExpressionRenderer{constructor(config){expression_renderer_defineProperty(this,"name",void 0);expression_renderer_defineProperty(this,"displayName",void 0);expression_renderer_defineProperty(this,"help",void 0);expression_renderer_defineProperty(this,"validate",void 0);expression_renderer_defineProperty(this,"reuseDomNode",void 0);expression_renderer_defineProperty(this,"render",void 0);const{name:name,displayName:displayName,help:help,validate:validate,reuseDomNode:reuseDomNode,render:render}=config;this.name=name;this.displayName=displayName||name;this.help=help||"";this.validate=validate||(()=>{});this.reuseDomNode=Boolean(reuseDomNode);this.render=render}}function expression_renderer_registry_defineProperty(obj,key,value){key=expression_renderer_registry_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function expression_renderer_registry_toPropertyKey(arg){var key=expression_renderer_registry_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function expression_renderer_registry_toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}class expression_renderer_registry_ExpressionRendererRegistry{constructor(){expression_renderer_registry_defineProperty(this,"renderers",new Map)}register(definition){if(typeof definition==="function")definition=definition();const renderer=new ExpressionRenderer(definition);this.renderers.set(renderer.name,renderer)}get(id){return this.renderers.get(id)||null}toJS(){return this.toArray().reduce((acc,renderer)=>({...acc,[renderer.name]:renderer}),{})}toArray(){return[...this.renderers.values()]}}var state_containers_=__webpack_require__(10);const defaultState={functions:{},types:{},context:{}};const pureTransitions={addFunction:state=>fn=>({...state,functions:{...state.functions,[fn.name]:fn}}),addType:state=>type=>({...state,types:{...state.types,[type.name]:type}}),extendContext:state=>extraContext=>({...state,context:{...state.context,...extraContext}})};const pureSelectors={getFunction:state=>id=>state.functions[id]||null,getType:state=>id=>state.types[id]||null,getContext:_ref=>{let{context:context}=_ref;return()=>context}};const createExecutorContainer=function(){let state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:defaultState;const container=Object(state_containers_["createStateContainer"])(state,pureTransitions,pureSelectors);return container};const executionDefaultState={...defaultState,state:"not-started",ast:{type:"expression",chain:[]}};const executionPureTransitions={start:state=>()=>({...state,state:"pending"}),setResult:state=>result=>({...state,state:"result",result:result}),setError:state=>error=>({...state,state:"error",error:error})};const freeze=state=>state;const createExecutionContainer=function(){let state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:executionDefaultState;const container=Object(state_containers_["createStateContainer"])(state,executionPureTransitions,{},{freeze:freeze});return container};const createError=err=>({type:"error",error:{stack:true?undefined:undefined,message:typeof err==="string"?err:String(err.message),name:typeof err==="object"?err.name||"Error":"Error",original:err instanceof Error?err:typeof err==="object"&&"original"in err&&err.original instanceof Error?err.original:undefined}});function getByAlias(node,nodeName){const lowerCaseName=nodeName.toLowerCase();return Object.values(node).find(_ref=>{let{name:name,aliases:aliases}=_ref;if(!name)return false;if(name.toLowerCase()===lowerCaseName)return true;return(aliases||[]).some(alias=>alias.toLowerCase()===lowerCaseName)})}var opensearchDashboardsUtils_common_=__webpack_require__(9);var abort_utils_=__webpack_require__(18);var inspector_common_=__webpack_require__(13);function execution_contract_defineProperty(obj,key,value){key=execution_contract_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function execution_contract_toPropertyKey(arg){var key=execution_contract_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function execution_contract_toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}class ExecutionContract{get isPending(){const state=this.execution.state.get().state;const finished=state==="error"||state==="result";return!finished}constructor(execution){this.execution=execution;execution_contract_defineProperty(this,"cancel",()=>{this.execution.cancel()});execution_contract_defineProperty(this,"getData",async()=>{try{return await this.execution.result}catch(e){return{type:"error",error:{type:e.type,message:e.message,stack:e.stack}}}});execution_contract_defineProperty(this,"getExpression",()=>this.execution.expression);execution_contract_defineProperty(this,"getAst",()=>this.execution.state.get().ast);execution_contract_defineProperty(this,"inspect",()=>this.execution.inspectorAdapters)}}function execution_defineProperty(obj,key,value){key=execution_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function execution_toPropertyKey(arg){var key=execution_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function execution_toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}const createAbortErrorValue=()=>createError({message:"The expression was aborted.",name:"AbortError"});const createDefaultInspectorAdapters=()=>({requests:new inspector_common_["RequestAdapter"],data:new inspector_common_["DataAdapter"]});class execution_Execution{race(promise){return Promise.race([this.abortRejection.promise,promise])}get result(){return this.firstResultFuture.promise}get inspectorAdapters(){return this.context.inspectorAdapters}constructor(params){this.params=params;execution_defineProperty(this,"state",void 0);execution_defineProperty(this,"input",null);execution_defineProperty(this,"context",void 0);execution_defineProperty(this,"abortController",new AbortController);execution_defineProperty(this,"abortRejection",Object(abort_utils_["toPromise"])(this.abortController.signal));execution_defineProperty(this,"hasStarted",false);execution_defineProperty(this,"firstResultFuture",new opensearchDashboardsUtils_common_["Defer"]);execution_defineProperty(this,"contract",new ExecutionContract(this));execution_defineProperty(this,"expression",void 0);const{executor:executor}=params;if(!params.ast&&!params.expression){throw new TypeError("Execution params should contain at least .ast or .expression key.")}else if(params.ast&&params.expression){throw new TypeError("Execution params cannot contain both .ast and .expression key.")}this.expression=params.expression||formatExpression(params.ast);const ast=params.ast||parseExpression(this.expression);this.state=createExecutionContainer({...executor.state.get(),state:"not-started",ast:ast});this.context={getInitialInput:()=>this.input,variables:{},types:executor.getTypes(),abortSignal:this.abortController.signal,...params.context||{},inspectorAdapters:params.context&&params.context.inspectorAdapters?params.context.inspectorAdapters:createDefaultInspectorAdapters()}}cancel(){this.abortController.abort()}start(){let input=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(this.hasStarted)throw new Error("Execution already started.");this.hasStarted=true;this.input=input;this.state.transitions.start();const{resolve:resolve,reject:reject}=this.firstResultFuture;const chainPromise=this.invokeChain(this.state.get().ast.chain,input);this.race(chainPromise).then(resolve,error=>{if(this.abortController.signal.aborted)resolve(createAbortErrorValue());else reject(error)});this.firstResultFuture.promise.then(result=>{this.state.transitions.setResult(result)},error=>{this.state.transitions.setError(error)}).finally(()=>this.abortRejection.cleanup())}async invokeChain(chainArr,input){if(!chainArr.length)return input;for(const link of chainArr){const{function:fnName,arguments:fnArgs}=link;const fn=getByAlias(this.state.get().functions,fnName);if(!fn){return createError({message:`Function ${fnName} could not be found.`})}let args={};let timeStart;try{const{resolvedArgs:resolvedArgs}=await this.race(this.resolveArgs(fn,input,fnArgs));args=resolvedArgs;timeStart=this.params.debug?Object(opensearchDashboardsUtils_common_["now"])():0;const output=await this.race(this.invokeFunction(fn,input,resolvedArgs));if(this.params.debug){const timeEnd=Object(opensearchDashboardsUtils_common_["now"])();link.debug={success:true,fn:fn.name,input:input,args:resolvedArgs,output:output,duration:timeEnd-timeStart}}if(getType(output)==="error")return output;input=output}catch(rawError){const timeEnd=this.params.debug?Object(opensearchDashboardsUtils_common_["now"])():0;const error=createError(rawError);error.error.message=`[${fnName}] > ${error.error.message}`;if(this.params.debug){link.debug={success:false,fn:fn.name,input:input,args:args,error:error,rawError:rawError,duration:timeStart?timeEnd-timeStart:undefined}}return error}}return input}async invokeFunction(fn,input,args){const normalizedInput=this.cast(input,fn.inputTypes);const output=await this.race(fn.fn(normalizedInput,args,this.context));const returnType=getType(output);const expectedType=fn.type;if(expectedType&&returnType!==expectedType){throw new Error(`Function '${fn.name}' should return '${expectedType}',`+` actually returned '${returnType}'`)}const type=this.context.types[fn.type];if(type&&type.validate){try{type.validate(output)}catch(e){throw new Error(`Output of '${fn.name}' is not a valid type '${fn.type}': ${e}`)}}return output}cast(value,toTypeNames){if(!toTypeNames||toTypeNames.length===0)return value;const fromTypeName=getType(value);if(toTypeNames.includes(fromTypeName))return value;const{types:types}=this.state.get();const fromTypeDef=types[fromTypeName];for(const toTypeName of toTypeNames){if(fromTypeDef&&fromTypeDef.castsTo(toTypeName)){return fromTypeDef.to(value,toTypeName,types)}const toTypeDef=types[toTypeName];if(toTypeDef&&toTypeDef.castsFrom(fromTypeName))return toTypeDef.from(value,types)}throw new Error(`Can not cast '${fromTypeName}' to any of '${toTypeNames.join(", ")}'`)}async resolveArgs(fnDef,input,argAsts){var _this=this;const argDefs=fnDef.args;const dealiasedArgAsts=Object(external_osdSharedDeps_Lodash_["reduce"])(argAsts,(acc,argAst,argName)=>{const argDef=getByAlias(argDefs,argName);if(!argDef){throw new Error(`Unknown argument '${argName}' passed to function '${fnDef.name}'`)}acc[argDef.name]=(acc[argDef.name]||[]).concat(argAst);return acc},{});for(const argDef of Object.values(argDefs)){const{aliases:aliases,default:argDefault,name:argName,required:required}=argDef;if(typeof argDefault!=="undefined"||!required||typeof dealiasedArgAsts[argName]!=="undefined")continue;if(!aliases||aliases.length===0){throw new Error(`${fnDef.name} requires an argument`)}const errorArg=argName==="_"?aliases[0]:argName;throw new Error(`${fnDef.name} requires an "${errorArg}" argument`)}const argAstsWithDefaults=Object(external_osdSharedDeps_Lodash_["reduce"])(argDefs,(acc,argDef,argName)=>{if(typeof acc[argName]==="undefined"&&typeof argDef.default!=="undefined"){acc[argName]=[parse(argDef.default,"argument")]}return acc},dealiasedArgAsts);const resolveArgFns=Object(external_osdSharedDeps_Lodash_["mapValues"])(argAstsWithDefaults,(asts,argName)=>asts.map(item=>async function(){let subInput=arguments.length>0&&arguments[0]!==undefined?arguments[0]:input;const output=await _this.interpret(item,subInput,{debug:_this.params.debug});if(isExpressionValueError(output))throw output.error;const casted=_this.cast(output,argDefs[argName].types);return casted}));const argNames=Object(external_osdSharedDeps_Lodash_["keys"])(resolveArgFns);const resolvedArgValues=await Promise.all(argNames.map(argName=>{const interpretFns=resolveArgFns[argName];if(!argDefs[argName].resolve)return interpretFns;return Promise.all(interpretFns.map(fn=>fn()))}));const resolvedMultiArgs=Object(external_osdSharedDeps_Lodash_["zipObject"])(argNames,resolvedArgValues);const resolvedArgs=Object(external_osdSharedDeps_Lodash_["mapValues"])(resolvedMultiArgs,(argValues,argName)=>{if(argDefs[argName].multi)return argValues;return Object(external_osdSharedDeps_Lodash_["last"])(argValues)});return{resolvedArgs:resolvedArgs}}async interpret(ast,input,options){switch(getType(ast)){case"expression":const execution=this.params.executor.createExecution(ast,this.context,options);execution.start(input);return await execution.result;case"string":case"number":case"null":case"boolean":return ast;default:throw new Error(`Unknown AST object: ${JSON.stringify(ast)}`)}}}function executor_defineProperty(obj,key,value){key=executor_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function executor_toPropertyKey(arg){var key=executor_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function executor_toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}class TypesRegistry{constructor(executor){this.executor=executor}register(typeDefinition){this.executor.registerType(typeDefinition)}get(id){return this.executor.state.selectors.getType(id)}toJS(){return this.executor.getTypes()}toArray(){return Object.values(this.toJS())}}class FunctionsRegistry{constructor(executor){this.executor=executor}register(functionDefinition){this.executor.registerFunction(functionDefinition)}get(id){return this.executor.state.selectors.getFunction(id)}toJS(){return this.executor.getFunctions()}toArray(){return Object.values(this.toJS())}}class executor_Executor{static createWithDefaults(state){const executor=new executor_Executor(state);for(const type of typeSpecs)executor.registerType(type);for(const func of functionSpecs)executor.registerFunction(func);return executor}constructor(state){executor_defineProperty(this,"state",void 0);executor_defineProperty(this,"functions",void 0);executor_defineProperty(this,"types",void 0);this.state=createExecutorContainer(state);this.functions=new FunctionsRegistry(this);this.types=new TypesRegistry(this)}registerFunction(functionDefinition){const fn=new expression_function_ExpressionFunction(typeof functionDefinition==="object"?functionDefinition:functionDefinition());this.state.transitions.addFunction(fn)}getFunction(name){return this.state.get().functions[name]}getFunctions(){return{...this.state.get().functions}}registerType(typeDefinition){const type=new expression_type_ExpressionType(typeof typeDefinition==="object"?typeDefinition:typeDefinition());this.state.transitions.addType(type)}getType(name){return this.state.get().types[name]}getTypes(){return{...this.state.get().types}}extendContext(extraContext){this.state.transitions.extendContext(extraContext)}get context(){return this.state.selectors.getContext()}async run(ast,input,context){const execution=this.createExecution(ast,context);execution.start(input);return await execution.result}createExecution(ast){let context=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};let{debug:debug}=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};const params={executor:this,context:{...this.context,...context},debug:debug};if(typeof ast==="string")params.expression=ast;else params.ast=ast;const execution=new execution_Execution(params);return execution}fork(){const initialState=this.state.get();const fork=new executor_Executor(initialState);this.state.state$.subscribe(_ref=>{let{types:types,functions:functions,context:context}=_ref;const state=fork.state.get();fork.state.set({...state,types:{...types,...state.types},functions:{...functions,...state.functions},context:{...context,...state.context}})});return fork}}function expressions_services_defineProperty(obj,key,value){key=expressions_services_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function expressions_services_toPropertyKey(arg){var key=expressions_services_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function expressions_services_toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}class expressions_services_ExpressionsService{constructor(){var _this=this;let{executor:_executor=executor_Executor.createWithDefaults(),renderers:_renderers=new expression_renderer_registry_ExpressionRendererRegistry}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};expressions_services_defineProperty(this,"executor",void 0);expressions_services_defineProperty(this,"renderers",void 0);expressions_services_defineProperty(this,"registerFunction",(function(){return _this.executor.registerFunction(...arguments)}));expressions_services_defineProperty(this,"registerType",(function(){return _this.executor.registerType(...arguments)}));expressions_services_defineProperty(this,"registerRenderer",(function(){return _this.renderers.register(...arguments)}));expressions_services_defineProperty(this,"run",(ast,input,context)=>this.executor.run(ast,input,context));expressions_services_defineProperty(this,"getFunction",name=>this.executor.getFunction(name));expressions_services_defineProperty(this,"getFunctions",()=>this.executor.getFunctions());expressions_services_defineProperty(this,"getRenderer",name=>this.renderers.get(name));expressions_services_defineProperty(this,"getRenderers",()=>this.renderers.toJS());expressions_services_defineProperty(this,"getType",name=>this.executor.getType(name));expressions_services_defineProperty(this,"getTypes",()=>this.executor.getTypes());expressions_services_defineProperty(this,"execute",(function(ast){let input=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{type:"null"};let context=arguments.length>2?arguments[2]:undefined;const execution=_this.executor.createExecution(ast,context);execution.start(input);return execution.contract}));expressions_services_defineProperty(this,"fork",()=>{const executor=this.executor.fork();const renderers=this.renderers;const fork=new expressions_services_ExpressionsService({executor:executor,renderers:renderers});return fork});this.executor=_executor;this.renderers=_renderers}setup(){return this}start(){return this}stop(){}}},function(module,exports){module.exports=__osdSharedDeps__.OsdI18n},function(module,exports){module.exports=__osdSharedDeps__.Lodash},function(module,exports){module.exports=__osdSharedDeps__.React},function(module,exports,__webpack_require__){"use strict";module.exports=function(cssWithMappingToString){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list}},function(module,exports){module.exports=__osdSharedDeps__.RxjsOperators},function(module,exports){module.exports=__osdSharedDeps__.Rxjs},function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&typeof btoa!=="undefined"){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"americanTypewriter",(function(){return americanTypewriter}));__webpack_require__.d(__webpack_exports__,"arial",(function(){return arial}));__webpack_require__.d(__webpack_exports__,"baskerville",(function(){return baskerville}));__webpack_require__.d(__webpack_exports__,"bookAntiqua",(function(){return bookAntiqua}));__webpack_require__.d(__webpack_exports__,"brushScript",(function(){return brushScript}));__webpack_require__.d(__webpack_exports__,"chalkboard",(function(){return chalkboard}));__webpack_require__.d(__webpack_exports__,"didot",(function(){return didot}));__webpack_require__.d(__webpack_exports__,"futura",(function(){return futura}));__webpack_require__.d(__webpack_exports__,"gillSans",(function(){return gillSans}));__webpack_require__.d(__webpack_exports__,"helveticaNeue",(function(){return helveticaNeue}));__webpack_require__.d(__webpack_exports__,"hoeflerText",(function(){return hoeflerText}));__webpack_require__.d(__webpack_exports__,"lucidaGrande",(function(){return lucidaGrande}));__webpack_require__.d(__webpack_exports__,"myriad",(function(){return myriad}));__webpack_require__.d(__webpack_exports__,"openSans",(function(){return openSans}));__webpack_require__.d(__webpack_exports__,"optima",(function(){return optima}));__webpack_require__.d(__webpack_exports__,"palatino",(function(){return palatino}));__webpack_require__.d(__webpack_exports__,"fonts",(function(){return fonts}));function createFont(font){return font}const americanTypewriter=createFont({label:"American Typewriter",value:"'American Typewriter', 'Courier New', Courier, Monaco, mono"});const arial=createFont({label:"Arial",value:"Arial, sans-serif"});const baskerville=createFont({label:"Baskerville",value:"Baskerville, Georgia, Garamond, 'Times New Roman', Times, serif"});const bookAntiqua=createFont({label:"Book Antiqua",value:"'Book Antiqua', Georgia, Garamond, 'Times New Roman', Times, serif"});const brushScript=createFont({label:"Brush Script",value:"'Brush Script MT', 'Comic Sans', sans-serif"});const chalkboard=createFont({label:"Chalkboard",value:"Chalkboard, 'Comic Sans', sans-serif"});const didot=createFont({label:"Didot",value:"Didot, Georgia, Garamond, 'Times New Roman', Times, serif"});const futura=createFont({label:"Futura",value:"Futura, Impact, Helvetica, Arial, sans-serif"});const gillSans=createFont({label:"Gill Sans",value:"'Gill Sans', 'Lucida Grande', 'Lucida Sans Unicode', Verdana, Helvetica, Arial, sans-serif"});const helveticaNeue=createFont({label:"Helvetica Neue",value:"'Helvetica Neue', Helvetica, Arial, sans-serif"});const hoeflerText=createFont({label:"Hoefler Text",value:"'Hoefler Text', Garamond, Georgia, 'Times New Roman', Times, serif"});const lucidaGrande=createFont({label:"Lucida Grande",value:"'Lucida Grande', 'Lucida Sans Unicode', Lucida, Verdana, Helvetica, Arial, sans-serif"});const myriad=createFont({label:"Myriad",value:"Myriad, Helvetica, Arial, sans-serif"});const openSans=createFont({label:"Open Sans",value:"'Open Sans', Helvetica, Arial, sans-serif"});const optima=createFont({label:"Optima",value:"Optima, 'Lucida Grande', 'Lucida Sans Unicode', Verdana, Helvetica, Arial, sans-serif"});const palatino=createFont({label:"Palatino",value:"Palatino, 'Book Antiqua', Georgia, Garamond, 'Times New Roman', Times, serif"});const fonts=[americanTypewriter,arial,baskerville,bookAntiqua,brushScript,chalkboard,didot,futura,gillSans,helveticaNeue,hoeflerText,lucidaGrande,myriad,openSans,optima,palatino]},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__osdBundles__.get("plugin/opensearchDashboardsUtils/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__osdBundles__.get("plugin/opensearchDashboardsUtils/common/state_containers");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__osdBundles__.get("plugin/opensearchDashboardsUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getType=getType;function getType(node){if(node==null)return"null";if(typeof node==="object"){if(!node.type)throw new Error("Objects must have a type property");return node.type}return typeof node}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__osdBundles__.get("plugin/inspector/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__osdSharedDeps__.ElasticEui},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Fn",{enumerable:true,get:function(){return _fn.Fn}});Object.defineProperty(exports,"Registry",{enumerable:true,get:function(){return _registry.Registry}});Object.defineProperty(exports,"addRegistries",{enumerable:true,get:function(){return _registries.addRegistries}});Object.defineProperty(exports,"castProvider",{enumerable:true,get:function(){return _cast.castProvider}});Object.defineProperty(exports,"fromExpression",{enumerable:true,get:function(){return _ast.fromExpression}});Object.defineProperty(exports,"getByAlias",{enumerable:true,get:function(){return _get_by_alias.getByAlias}});Object.defineProperty(exports,"getType",{enumerable:true,get:function(){return _get_type.getType}});Object.defineProperty(exports,"parse",{enumerable:true,get:function(){return _grammar.parse}});Object.defineProperty(exports,"register",{enumerable:true,get:function(){return _registries.register}});Object.defineProperty(exports,"registryFactory",{enumerable:true,get:function(){return _registries.registryFactory}});Object.defineProperty(exports,"safeElementFromExpression",{enumerable:true,get:function(){return _ast.safeElementFromExpression}});Object.defineProperty(exports,"toExpression",{enumerable:true,get:function(){return _ast.toExpression}});var _ast=__webpack_require__(37);var _fn=__webpack_require__(38);var _get_type=__webpack_require__(12);var _cast=__webpack_require__(40);var _grammar=__webpack_require__(16);var _get_by_alias=__webpack_require__(41);var _registry=__webpack_require__(42);var _registries=__webpack_require__(43)},function(module,exports,__webpack_require__){"use strict";function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function peg$SyntaxError(message,expected,found,location){this.message=message;this.expected=expected;this.found=found;this.location=location;this.name="SyntaxError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,peg$SyntaxError)}}peg$subclass(peg$SyntaxError,Error);peg$SyntaxError.buildMessage=function(expected,found){const DESCRIBE_EXPECTATION_FNS={literal:function(expectation){return'"'+literalEscape(expectation.text)+'"'},class:function(expectation){let escapedParts="";let i;for(i=0;i<expectation.parts.length;i++){escapedParts+=expectation.parts[i]instanceof Array?classEscape(expectation.parts[i][0])+"-"+classEscape(expectation.parts[i][1]):classEscape(expectation.parts[i])}return"["+(expectation.inverted?"^":"")+escapedParts+"]"},any:function(expectation){return"any character"},end:function(expectation){return"end of input"},other:function(expectation){return expectation.description}};function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}function literalEscape(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(ch){return"\\x0"+hex(ch)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(ch){return"\\x"+hex(ch)}))}function classEscape(s){return s.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(ch){return"\\x0"+hex(ch)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(ch){return"\\x"+hex(ch)}))}function describeExpectation(expectation){return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation)}function describeExpected(expected){const descriptions=new Array(expected.length);let i;let j;for(i=0;i<expected.length;i++){descriptions[i]=describeExpectation(expected[i])}descriptions.sort();if(descriptions.length>0){for(i=1,j=1;i<descriptions.length;i++){if(descriptions[i-1]!==descriptions[i]){descriptions[j]=descriptions[i];j++}}descriptions.length=j}switch(descriptions.length){case 1:return descriptions[0];case 2:return descriptions[0]+" or "+descriptions[1];default:return descriptions.slice(0,-1).join(", ")+", or "+descriptions[descriptions.length-1]}}function describeFound(found){return found?'"'+literalEscape(found)+'"':"end of input"}return"Expected "+describeExpected(expected)+" but "+describeFound(found)+" found."};function peg$parse(input,options){options=options!==void 0?options:{};const peg$FAILED={};const peg$startRuleFunctions={expression:peg$parseexpression,argument:peg$parseargument};let peg$startRuleFunction=peg$parseexpression;const peg$c0="|";const peg$c1=peg$literalExpectation("|",false);const peg$c2=function(first,fn){return fn};const peg$c3=function(first,rest){return addMeta({type:"expression",chain:[first].concat(rest)},text(),location())};const peg$c4=peg$otherExpectation("function");const peg$c5=function(name,arg_list){return addMeta({type:"function",function:name,arguments:arg_list},text(),location())};const peg$c6="=";const peg$c7=peg$literalExpectation("=",false);const peg$c8=function(name,value){return{name:name,value:value}};const peg$c9=function(value){return{name:"_",value:value}};const peg$c10="$";const peg$c11=peg$literalExpectation("$",false);const peg$c12="{";const peg$c13=peg$literalExpectation("{",false);const peg$c14="}";const peg$c15=peg$literalExpectation("}",false);const peg$c16=function(expression){return expression};const peg$c17=function(value){return addMeta(value,text(),location())};const peg$c18=function(arg){return arg};const peg$c19=function(args){return args.reduce((accumulator,_ref)=>{let{name:name,value:value}=_ref;return{...accumulator,[name]:(accumulator[name]||[]).concat(value)}},{})};const peg$c20=/^[a-zA-Z0-9_\-]/;const peg$c21=peg$classExpectation([["a","z"],["A","Z"],["0","9"],"_","-"],false,false);const peg$c22=function(name){return name.join("")};const peg$c23=peg$otherExpectation("literal");const peg$c24='"';const peg$c25=peg$literalExpectation('"',false);const peg$c26=function(chars){return chars.join("")};const peg$c27="'";const peg$c28=peg$literalExpectation("'",false);const peg$c29=function(string){const result=string.join("");if(result==="null")return null;if(result==="true")return true;if(result==="false")return false;if(isNaN(Number(result)))return result;return Number(result)};const peg$c30=/^[ \t\r\n]/;const peg$c31=peg$classExpectation([" ","\t","\r","\n"],false,false);const peg$c32="\\";const peg$c33=peg$literalExpectation("\\",false);const peg$c34=/^["'(){}<>[\]$`|= \t\n\r]/;const peg$c35=peg$classExpectation(['"',"'","(",")","{","}","<",">","[","]","$","`","|","="," ","\t","\n","\r"],false,false);const peg$c36=function(sequence){return sequence};const peg$c37=/^[^"'(){}<>[\]$`|= \t\n\r]/;const peg$c38=peg$classExpectation(['"',"'","(",")","{","}","<",">","[","]","$","`","|","="," ","\t","\n","\r"],true,false);const peg$c39=/^[^"]/;const peg$c40=peg$classExpectation(['"'],true,false);const peg$c41=/^[^']/;const peg$c42=peg$classExpectation(["'"],true,false);let peg$currPos=0;let peg$savedPos=0;const peg$posDetailsCache=[{line:1,column:1}];let peg$maxFailPos=0;let peg$maxFailExpected=[];let peg$silentFails=0;let peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+'".')}peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function expected(description,location){location=location!==void 0?location:peg$computeLocation(peg$savedPos,peg$currPos);throw peg$buildStructuredError([peg$otherExpectation(description)],input.substring(peg$savedPos,peg$currPos),location)}function error(message,location){location=location!==void 0?location:peg$computeLocation(peg$savedPos,peg$currPos);throw peg$buildSimpleError(message,location)}function peg$literalExpectation(text,ignoreCase){return{type:"literal",text:text,ignoreCase:ignoreCase}}function peg$classExpectation(parts,inverted,ignoreCase){return{type:"class",parts:parts,inverted:inverted,ignoreCase:ignoreCase}}function peg$anyExpectation(){return{type:"any"}}function peg$endExpectation(){return{type:"end"}}function peg$otherExpectation(description){return{type:"other",description:description}}function peg$computePosDetails(pos){let details=peg$posDetailsCache[pos];let p;if(details){return details}else{p=pos-1;while(!peg$posDetailsCache[p]){p--}details=peg$posDetailsCache[p];details={line:details.line,column:details.column};while(p<pos){if(input.charCodeAt(p)===10){details.line++;details.column=1}else{details.column++}p++}peg$posDetailsCache[pos]=details;return details}}function peg$computeLocation(startPos,endPos){const startPosDetails=peg$computePosDetails(startPos);const endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return}if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildSimpleError(message,location){return new peg$SyntaxError(message,null,null,location)}function peg$buildStructuredError(expected,found,location){return new peg$SyntaxError(peg$SyntaxError.buildMessage(expected,found),expected,found,location)}function peg$parseexpression(){let s0;let s1;let s2;let s3;let s4;let s5;let s6;let s7;s0=peg$currPos;s1=peg$parsespace();if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){s2=peg$parsefunction();if(s2!==peg$FAILED){s3=[];s4=peg$currPos;if(input.charCodeAt(peg$currPos)===124){s5=peg$c0;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c1)}}if(s5!==peg$FAILED){s6=peg$parsespace();if(s6===peg$FAILED){s6=null}if(s6!==peg$FAILED){s7=peg$parsefunction();if(s7!==peg$FAILED){peg$savedPos=s4;s5=peg$c2(s2,s7);s4=s5}else{peg$currPos=s4;s4=peg$FAILED}}else{peg$currPos=s4;s4=peg$FAILED}}else{peg$currPos=s4;s4=peg$FAILED}while(s4!==peg$FAILED){s3.push(s4);s4=peg$currPos;if(input.charCodeAt(peg$currPos)===124){s5=peg$c0;peg$currPos++}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c1)}}if(s5!==peg$FAILED){s6=peg$parsespace();if(s6===peg$FAILED){s6=null}if(s6!==peg$FAILED){s7=peg$parsefunction();if(s7!==peg$FAILED){peg$savedPos=s4;s5=peg$c2(s2,s7);s4=s5}else{peg$currPos=s4;s4=peg$FAILED}}else{peg$currPos=s4;s4=peg$FAILED}}else{peg$currPos=s4;s4=peg$FAILED}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c3(s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsefunction(){let s0;let s1;let s2;peg$silentFails++;s0=peg$currPos;s1=peg$parseidentifier();if(s1!==peg$FAILED){s2=peg$parsearg_list();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c5(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c4)}}return s0}function peg$parseargument_assignment(){let s0;let s1;let s2;let s3;let s4;let s5;s0=peg$currPos;s1=peg$parseidentifier();if(s1!==peg$FAILED){s2=peg$parsespace();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===61){s3=peg$c6;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7)}}if(s3!==peg$FAILED){s4=peg$parsespace();if(s4===peg$FAILED){s4=null}if(s4!==peg$FAILED){s5=peg$parseargument();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c8(s1,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseargument();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c9(s1)}s0=s1}return s0}function peg$parseargument(){let s0;let s1;let s2;let s3;let s4;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===36){s1=peg$c10;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===123){s2=peg$c12;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}if(s2!==peg$FAILED){s3=peg$parseexpression();if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s4=peg$c14;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15)}}if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c16(s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parseliteral();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c17(s1)}s0=s1}return s0}function peg$parsearg_list(){let s0;let s1;let s2;let s3;let s4;s0=peg$currPos;s1=[];s2=peg$currPos;s3=peg$parsespace();if(s3!==peg$FAILED){s4=peg$parseargument_assignment();if(s4!==peg$FAILED){peg$savedPos=s2;s3=peg$c18(s4);s2=s3}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}while(s2!==peg$FAILED){s1.push(s2);s2=peg$currPos;s3=peg$parsespace();if(s3!==peg$FAILED){s4=peg$parseargument_assignment();if(s4!==peg$FAILED){peg$savedPos=s2;s3=peg$c18(s4);s2=s3}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}}if(s1!==peg$FAILED){s2=peg$parsespace();if(s2===peg$FAILED){s2=null}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c19(s1);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseidentifier(){let s0;let s1;let s2;s0=peg$currPos;s1=[];if(peg$c20.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c21)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c20.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c21)}}}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c22(s1)}s0=s1;return s0}function peg$parseliteral(){let s0;let s1;peg$silentFails++;s0=peg$parsephrase();if(s0===peg$FAILED){s0=peg$parseunquoted_string_or_number()}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c23)}}return s0}function peg$parsephrase(){let s0;let s1;let s2;let s3;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===34){s1=peg$c24;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c25)}}if(s1!==peg$FAILED){s2=[];s3=peg$parsedq_char();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parsedq_char()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s3=peg$c24;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c25)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c26(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===39){s1=peg$c27;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c28)}}if(s1!==peg$FAILED){s2=[];s3=peg$parsesq_char();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parsesq_char()}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===39){s3=peg$c27;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c28)}}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c26(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}return s0}function peg$parseunquoted_string_or_number(){let s0;let s1;let s2;s0=peg$currPos;s1=[];s2=peg$parseunquoted();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseunquoted()}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c29(s1)}s0=s1;return s0}function peg$parsespace(){let s0;let s1;s0=[];if(peg$c30.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c31)}}if(s1!==peg$FAILED){while(s1!==peg$FAILED){s0.push(s1);if(peg$c30.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c31)}}}}else{s0=peg$FAILED}return s0}function peg$parseunquoted(){let s0;let s1;let s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c32;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33)}}if(s1!==peg$FAILED){if(peg$c34.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c35)}}if(s2===peg$FAILED){if(input.charCodeAt(peg$currPos)===92){s2=peg$c32;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33)}}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c36(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){if(peg$c37.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c38)}}}return s0}function peg$parsedq_char(){let s0;let s1;let s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c32;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33)}}if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s2=peg$c24;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c25)}}if(s2===peg$FAILED){if(input.charCodeAt(peg$currPos)===92){s2=peg$c32;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33)}}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c36(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){if(peg$c39.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c40)}}}return s0}function peg$parsesq_char(){let s0;let s1;let s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s1=peg$c32;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33)}}if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===39){s2=peg$c27;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c28)}}if(s2===peg$FAILED){if(input.charCodeAt(peg$currPos)===92){s2=peg$c32;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33)}}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c36(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){if(peg$c41.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c42)}}}return s0}function addMeta(node,text,_ref2){let{start:{offset:start},end:{offset:end}}=_ref2;if(!options.addMeta)return node;return{node:node,text:text,start:start,end:end}}peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail(peg$endExpectation())}throw peg$buildStructuredError(peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__osdBundles__.get("plugin/data/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__osdBundles__.get("plugin/data/common/utils/abort_utils");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==="string"||argType==="number"){classes.push(arg)}else if(Array.isArray(arg)){if(arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner)}}}else if(argType==="object"){if(arg.toString===Object.prototype.toString){for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key)}}}else{classes.push(arg.toString())}}}return classes.join(" ")}if(true&&module.exports){classNames.default=classNames;module.exports=classNames}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})()},function(module,exports){module.exports=__osdSharedDeps__.Theme},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(44);var fast_shallow_equal_1=__webpack_require__(45);var useCustomCompareEffect_1=tslib_1.__importDefault(__webpack_require__(46));var isPrimitive=function(val){return val!==Object(val)};var shallowEqualDepsList=function(prevDeps,nextDeps){return prevDeps.every((function(dep,index){return fast_shallow_equal_1.equal(dep,nextDeps[index])}))};var useShallowCompareEffect=function(effect,deps){if(false){}useCustomCompareEffect_1.default(effect,deps,shallowEqualDepsList)};exports.default=useShallowCompareEffect},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_expressions_osd_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23);var _node_modules_val_loader_dist_cjs_js_key_expressions_osd_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_expressions_osd_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__osdBundles__.define("plugin/expressions/public",__webpack_require__,47);__osdBundles__.define("plugin/expressions/common",__webpack_require__,0);__osdBundles__.define("plugin/expressions/common/fonts",__webpack_require__,8)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__osdPublicPath__["expressions"]},function(module,exports,__webpack_require__){switch(window.__osdThemeTag__){case"v7dark":return __webpack_require__(25);case"v7light":return __webpack_require__(27);case"v8dark":return __webpack_require__(29);case"v8light":return __webpack_require__(31);case"v9dark":return __webpack_require__(33);case"v9light":return __webpack_require__(35)}},function(module,exports,__webpack_require__){var api=__webpack_require__(7);var content=__webpack_require__(26);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.expExpressionRenderer{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.expExpressionRenderer__expression{display:flex;flex-direction:column;width:100%;height:100%;overflow:auto;position:relative;flex:1 1 100%}.expExpressionRenderer-isEmpty .expExpressionRenderer__expression,.expExpressionRenderer-hasError .expExpressionRenderer__expression{display:none}\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},function(module,exports,__webpack_require__){var api=__webpack_require__(7);var content=__webpack_require__(28);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.expExpressionRenderer{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.expExpressionRenderer__expression{display:flex;flex-direction:column;width:100%;height:100%;overflow:auto;position:relative;flex:1 1 100%}.expExpressionRenderer-isEmpty .expExpressionRenderer__expression,.expExpressionRenderer-hasError .expExpressionRenderer__expression{display:none}\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},function(module,exports,__webpack_require__){var api=__webpack_require__(7);var content=__webpack_require__(30);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.expExpressionRenderer{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.expExpressionRenderer__expression{display:flex;flex-direction:column;width:100%;height:100%;overflow:auto;position:relative;flex:1 1 100%}.expExpressionRenderer-isEmpty .expExpressionRenderer__expression,.expExpressionRenderer-hasError .expExpressionRenderer__expression{display:none}\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},function(module,exports,__webpack_require__){var api=__webpack_require__(7);var content=__webpack_require__(32);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.expExpressionRenderer{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.expExpressionRenderer__expression{display:flex;flex-direction:column;width:100%;height:100%;overflow:auto;position:relative;flex:1 1 100%}.expExpressionRenderer-isEmpty .expExpressionRenderer__expression,.expExpressionRenderer-hasError .expExpressionRenderer__expression{display:none}\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},function(module,exports,__webpack_require__){var api=__webpack_require__(7);var content=__webpack_require__(34);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.expExpressionRenderer{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.expExpressionRenderer__expression{display:flex;flex-direction:column;width:100%;height:100%;overflow:auto;position:relative;flex:1 1 100%}.expExpressionRenderer-isEmpty .expExpressionRenderer__expression,.expExpressionRenderer-hasError .expExpressionRenderer__expression{display:none}\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},function(module,exports,__webpack_require__){var api=__webpack_require__(7);var content=__webpack_require__(36);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.expExpressionRenderer{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.expExpressionRenderer__expression{display:flex;flex-direction:column;width:100%;height:100%;overflow:auto;position:relative;flex:1 1 100%}.expExpressionRenderer-isEmpty .expExpressionRenderer__expression,.expExpressionRenderer-hasError .expExpressionRenderer__expression{display:none}\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fromExpression=fromExpression;exports.safeElementFromExpression=safeElementFromExpression;exports.toExpression=toExpression;var _get_type=__webpack_require__(12);var _grammar=__webpack_require__(16);function getArgumentString(arg,argKey){let level=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;const type=(0,_get_type.getType)(arg);function maybeArgKey(argKey,argString){return argKey==null||argKey==="_"?argString:`${argKey}=${argString}`}if(type==="string"){const escapedArg=arg.replace(/[\\"]/g,"\\$&");return maybeArgKey(argKey,`"${escapedArg}"`)}if(type==="boolean"||type==="null"||type==="number"){return maybeArgKey(argKey,`${arg}`)}if(type==="expression"){return maybeArgKey(argKey,`{${getExpression(arg.chain,level+1)}}`)}throw new Error(`Invalid argument type in AST: ${type}`)}function getExpressionArgs(block){let level=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;const args=block.arguments;const hasValidArgs=typeof args==="object"&&args!=null&&!Array.isArray(args);if(!hasValidArgs)throw new Error("Arguments can only be an object");const argKeys=Object.keys(args);const MAX_LINE_LENGTH=80;return argKeys.map(argKey=>args[argKey].reduce((acc,arg)=>{const argString=getArgumentString(arg,argKey,level);const lineLength=acc.split("\n").pop().length;if(level===0&&lineLength+argString.length>MAX_LINE_LENGTH){return`${acc}\n  ${argString}`}if(lineLength>0)return`${acc} ${argString}`;return argString},""))}function fnWithArgs(fnName,args){if(!args||args.length===0)return fnName;return`${fnName} ${args.join(" ")}`}function getExpression(chain){let level=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!chain)throw new Error("Expressions must contain a chain");const separator=level>0?" | ":"\n| ";return chain.map(chainObj=>{const type=(0,_get_type.getType)(chainObj);if(type==="function"){const fn=chainObj.function;if(!fn||fn.length===0)throw new Error("Functions must have a function name");const expArgs=getExpressionArgs(chainObj,level);return fnWithArgs(fn,expArgs)}},[]).join(separator)}function fromExpression(expression){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"expression";try{return(0,_grammar.parse)(String(expression),{startRule:type})}catch(e){throw new Error(`Unable to parse expression: ${e.message}`)}}function safeElementFromExpression(expression){try{return fromExpression(expression)}catch(e){return fromExpression(`markdown\n"## Crud.\nCanvas could not parse this element's expression. I am so sorry this error isn't more useful. I promise it will be soon.\n\nThanks for understanding,\n#### Management\n"`)}}function toExpression(astObj){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"expression";if(type==="argument")return getArgumentString(astObj);const validType=["expression","function"].includes((0,_get_type.getType)(astObj));if(!validType)throw new Error("Expression must be an expression or argument function");if((0,_get_type.getType)(astObj)==="expression"){if(!Array.isArray(astObj.chain))throw new Error("Expressions must contain a chain");return getExpression(astObj.chain)}const expArgs=getExpressionArgs(astObj);return fnWithArgs(astObj.function,expArgs)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Fn=Fn;var _lodash=__webpack_require__(2);var _arg=__webpack_require__(39);function Fn(config){this.name=config.name;this.type=config.type;this.aliases=config.aliases||[];this.fn=function(){return Promise.resolve(config.fn(...arguments))};this.help=config.help||"";this.args=(0,_lodash.mapValues)(config.args||{},(arg,name)=>new _arg.Arg({name:name,...arg}));this.context=config.context||{};this.accepts=type=>{if(!this.context.types)return true;return(0,_lodash.includes)(this.context.types,type)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Arg=Arg;var _lodash=__webpack_require__(2);function Arg(config){if(config.name==="_")throw Error("Arg names must not be _. Use it in aliases instead.");this.name=config.name;this.required=config.required||false;this.help=config.help||"";this.types=config.types||[];this.default=config.default;this.aliases=config.aliases||[];this.multi=config.multi==null?false:config.multi;this.resolve=config.resolve==null?true:config.resolve;this.options=config.options||[];this.accepts=type=>{if(!this.types.length)return true;return(0,_lodash.includes)(config.types,type)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.castProvider=castProvider;var _get_type=__webpack_require__(12);function castProvider(types){return function cast(node,toTypeNames){if(!toTypeNames||toTypeNames.length===0)return node;const fromTypeName=(0,_get_type.getType)(node);if(toTypeNames.includes(fromTypeName))return node;const fromTypeDef=types[fromTypeName];for(let i=0;i<toTypeNames.length;i++){if(fromTypeDef&&fromTypeDef.castsTo(toTypeNames[i])){return fromTypeDef.to(node,toTypeNames[i],types)}const toTypeDef=types[toTypeNames[i]];if(toTypeDef&&toTypeDef.castsFrom(fromTypeName))return toTypeDef.from(node,types)}throw new Error(`Can not cast '${fromTypeName}' to any of '${toTypeNames.join(", ")}'`)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getByAlias=getByAlias;function getByAlias(specs,name){const lowerCaseName=name.toLowerCase();return Object.values(specs).find(_ref=>{let{name:name,aliases:aliases}=_ref;if(name.toLowerCase()===lowerCaseName)return true;return(aliases||[]).some(alias=>alias.toLowerCase()===lowerCaseName)})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Registry=void 0;var _lodash=__webpack_require__(2);class Registry{constructor(){let prop=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"name";if(typeof prop!=="string")throw new Error("Registry property name must be a string");this._prop=prop;this._indexed=new Object}wrapper(obj){return obj}register(fn){const obj=typeof fn==="function"?fn():fn;if(typeof obj!=="object"||!obj[this._prop]){throw new Error(`Registered functions must return an object with a ${this._prop} property`)}this._indexed[obj[this._prop].toLowerCase()]=this.wrapper(obj)}toJS(){return Object.keys(this._indexed).reduce((acc,key)=>{acc[key]=this.get(key);return acc},{})}toArray(){return Object.keys(this._indexed).map(key=>this.get(key))}get(name){if(name===undefined)return null;const lowerCaseName=name.toLowerCase();return this._indexed[lowerCaseName]?(0,_lodash.clone)(this._indexed[lowerCaseName]):null}getProp(){return this._prop}reset(){this._indexed=new Object}}exports.Registry=Registry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addRegistries=addRegistries;exports.register=register;exports.registryFactory=registryFactory;function addRegistries(registries,newRegistries){Object.keys(newRegistries).forEach(registryName=>{if(registries[registryName]){throw new Error(`There is already a registry named "${registryName}".`)}registries[registryName]=newRegistries[registryName]});return registries}function register(registries,specs){Object.keys(specs).forEach(registryName=>{if(!registries[registryName]){throw new Error(`There is no registry named "${registryName}".`)}if(!registries[registryName].register){throw new Error(`Registry "${registryName}" must have a register function.`)}specs[registryName].forEach(f=>registries[registryName].register(f))});return registries}function registryFactory(registries){return{registries(){return registries},register(specs){return register(registries,specs)}}}},function(module,exports){module.exports=__osdSharedDeps__.TsLib},function(module,exports){var keyList=Object.keys;exports.equal=function equal(a,b){if(a===b)return true;if(!(a instanceof Object)||!(b instanceof Object))return false;var keys=keyList(a);var length=keys.length;for(var i=0;i<length;i++)if(!(keys[i]in b))return false;for(var i=0;i<length;i++)if(a[keys[i]]!==b[keys[i]])return false;return length===keyList(b).length}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_1=__webpack_require__(3);var isPrimitive=function(val){return val!==Object(val)};var useCustomCompareEffect=function(effect,deps,depsEqual){if(false){}var ref=react_1.useRef(undefined);if(!ref.current||!depsEqual(deps,ref.current)){ref.current=deps}react_1.useEffect(effect,ref.current)};exports.default=useCustomCompareEffect},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"Plugin",(function(){return plugin_ExpressionsPublicPlugin}));__webpack_require__.d(__webpack_exports__,"ExpressionsPublicPlugin",(function(){return plugin_ExpressionsPublicPlugin}));__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));__webpack_require__.d(__webpack_exports__,"ExpressionExecutor",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"IExpressionLoaderParams",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"ExpressionRenderError",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"ExpressionRendererComponent",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"ReactExpressionRenderer",(function(){return ReactExpressionRenderer}));__webpack_require__.d(__webpack_exports__,"ReactExpressionRendererProps",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"ReactExpressionRendererType",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"ExpressionRenderHandler",(function(){return render_ExpressionRenderHandler}));__webpack_require__.d(__webpack_exports__,"ExpressionRendererEvent",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"AnyExpressionFunctionDefinition",(function(){return common["AnyExpressionFunctionDefinition"]}));__webpack_require__.d(__webpack_exports__,"AnyExpressionTypeDefinition",(function(){return common["AnyExpressionTypeDefinition"]}));__webpack_require__.d(__webpack_exports__,"ArgumentType",(function(){return common["ArgumentType"]}));__webpack_require__.d(__webpack_exports__,"buildExpression",(function(){return common["buildExpression"]}));__webpack_require__.d(__webpack_exports__,"buildExpressionFunction",(function(){return common["buildExpressionFunction"]}));__webpack_require__.d(__webpack_exports__,"Datatable",(function(){return common["Datatable"]}));__webpack_require__.d(__webpack_exports__,"DatatableColumn",(function(){return common["DatatableColumn"]}));__webpack_require__.d(__webpack_exports__,"DatatableColumnType",(function(){return common["DatatableColumnType"]}));__webpack_require__.d(__webpack_exports__,"DatatableRow",(function(){return common["DatatableRow"]}));__webpack_require__.d(__webpack_exports__,"Execution",(function(){return common["Execution"]}));__webpack_require__.d(__webpack_exports__,"ExecutionContract",(function(){return common["ExecutionContract"]}));__webpack_require__.d(__webpack_exports__,"ExecutionContainer",(function(){return common["ExecutionContainer"]}));__webpack_require__.d(__webpack_exports__,"ExecutionContext",(function(){return common["ExecutionContext"]}));__webpack_require__.d(__webpack_exports__,"ExecutionParams",(function(){return common["ExecutionParams"]}));__webpack_require__.d(__webpack_exports__,"ExecutionState",(function(){return common["ExecutionState"]}));__webpack_require__.d(__webpack_exports__,"Executor",(function(){return common["Executor"]}));__webpack_require__.d(__webpack_exports__,"ExecutorContainer",(function(){return common["ExecutorContainer"]}));__webpack_require__.d(__webpack_exports__,"ExecutorState",(function(){return common["ExecutorState"]}));__webpack_require__.d(__webpack_exports__,"ExpressionAstArgument",(function(){return common["ExpressionAstArgument"]}));__webpack_require__.d(__webpack_exports__,"ExpressionAstExpression",(function(){return common["ExpressionAstExpression"]}));__webpack_require__.d(__webpack_exports__,"ExpressionAstExpressionBuilder",(function(){return common["ExpressionAstExpressionBuilder"]}));__webpack_require__.d(__webpack_exports__,"ExpressionAstFunction",(function(){return common["ExpressionAstFunction"]}));__webpack_require__.d(__webpack_exports__,"ExpressionAstFunctionBuilder",(function(){return common["ExpressionAstFunctionBuilder"]}));__webpack_require__.d(__webpack_exports__,"ExpressionAstNode",(function(){return common["ExpressionAstNode"]}));__webpack_require__.d(__webpack_exports__,"ExpressionFunction",(function(){return common["ExpressionFunction"]}));__webpack_require__.d(__webpack_exports__,"ExpressionFunctionDefinition",(function(){return common["ExpressionFunctionDefinition"]}));__webpack_require__.d(__webpack_exports__,"ExpressionFunctionDefinitions",(function(){return common["ExpressionFunctionDefinitions"]}));__webpack_require__.d(__webpack_exports__,"ExpressionFunctionOpenSearchDashboards",(function(){return common["ExpressionFunctionOpenSearchDashboards"]}));__webpack_require__.d(__webpack_exports__,"ExpressionFunctionParameter",(function(){return common["ExpressionFunctionParameter"]}));__webpack_require__.d(__webpack_exports__,"ExpressionImage",(function(){return common["ExpressionImage"]}));__webpack_require__.d(__webpack_exports__,"ExpressionRenderDefinition",(function(){return common["ExpressionRenderDefinition"]}));__webpack_require__.d(__webpack_exports__,"ExpressionRenderer",(function(){return common["ExpressionRenderer"]}));__webpack_require__.d(__webpack_exports__,"ExpressionRendererRegistry",(function(){return common["ExpressionRendererRegistry"]}));__webpack_require__.d(__webpack_exports__,"ExpressionType",(function(){return common["ExpressionType"]}));__webpack_require__.d(__webpack_exports__,"ExpressionTypeDefinition",(function(){return common["ExpressionTypeDefinition"]}));__webpack_require__.d(__webpack_exports__,"ExpressionTypeStyle",(function(){return common["ExpressionTypeStyle"]}));__webpack_require__.d(__webpack_exports__,"ExpressionValue",(function(){return common["ExpressionValue"]}));__webpack_require__.d(__webpack_exports__,"ExpressionValueBoxed",(function(){return common["ExpressionValueBoxed"]}));__webpack_require__.d(__webpack_exports__,"ExpressionValueConverter",(function(){return common["ExpressionValueConverter"]}));__webpack_require__.d(__webpack_exports__,"ExpressionValueError",(function(){return common["ExpressionValueError"]}));__webpack_require__.d(__webpack_exports__,"ExpressionValueNum",(function(){return common["ExpressionValueNum"]}));__webpack_require__.d(__webpack_exports__,"ExpressionValueRender",(function(){return common["ExpressionValueRender"]}));__webpack_require__.d(__webpack_exports__,"ExpressionValueSearchContext",(function(){return common["ExpressionValueSearchContext"]}));__webpack_require__.d(__webpack_exports__,"ExpressionValueUnboxed",(function(){return common["ExpressionValueUnboxed"]}));__webpack_require__.d(__webpack_exports__,"ExpressionValueFilter",(function(){return common["ExpressionValueFilter"]}));__webpack_require__.d(__webpack_exports__,"Font",(function(){return common["Font"]}));__webpack_require__.d(__webpack_exports__,"FontLabel",(function(){return common["FontLabel"]}));__webpack_require__.d(__webpack_exports__,"FontStyle",(function(){return common["FontStyle"]}));__webpack_require__.d(__webpack_exports__,"FontValue",(function(){return common["FontValue"]}));__webpack_require__.d(__webpack_exports__,"FontWeight",(function(){return common["FontWeight"]}));__webpack_require__.d(__webpack_exports__,"format",(function(){return common["format"]}));__webpack_require__.d(__webpack_exports__,"formatExpression",(function(){return common["formatExpression"]}));__webpack_require__.d(__webpack_exports__,"FunctionsRegistry",(function(){return common["FunctionsRegistry"]}));__webpack_require__.d(__webpack_exports__,"IInterpreterRenderHandlers",(function(){return common["IInterpreterRenderHandlers"]}));__webpack_require__.d(__webpack_exports__,"InterpreterErrorType",(function(){return common["InterpreterErrorType"]}));__webpack_require__.d(__webpack_exports__,"IRegistry",(function(){return common["IRegistry"]}));__webpack_require__.d(__webpack_exports__,"isExpressionAstBuilder",(function(){return common["isExpressionAstBuilder"]}));__webpack_require__.d(__webpack_exports__,"OPENSEARCH_DASHBOARDS_CONTEXT_NAME",(function(){return common["OPENSEARCH_DASHBOARDS_CONTEXT_NAME"]}));__webpack_require__.d(__webpack_exports__,"OpenSearchDashboardsContext",(function(){return common["OpenSearchDashboardsContext"]}));__webpack_require__.d(__webpack_exports__,"OpenSearchDashboardsDatatable",(function(){return common["OpenSearchDashboardsDatatable"]}));__webpack_require__.d(__webpack_exports__,"OpenSearchDashboardsDatatableColumn",(function(){return common["OpenSearchDashboardsDatatableColumn"]}));__webpack_require__.d(__webpack_exports__,"OpenSearchDashboardsDatatableColumnMeta",(function(){return common["OpenSearchDashboardsDatatableColumnMeta"]}));__webpack_require__.d(__webpack_exports__,"OpenSearchDashboardsDatatableRow",(function(){return common["OpenSearchDashboardsDatatableRow"]}));__webpack_require__.d(__webpack_exports__,"KnownTypeToString",(function(){return common["KnownTypeToString"]}));__webpack_require__.d(__webpack_exports__,"Overflow",(function(){return common["Overflow"]}));__webpack_require__.d(__webpack_exports__,"parse",(function(){return common["parse"]}));__webpack_require__.d(__webpack_exports__,"parseExpression",(function(){return common["parseExpression"]}));__webpack_require__.d(__webpack_exports__,"PointSeries",(function(){return common["PointSeries"]}));__webpack_require__.d(__webpack_exports__,"PointSeriesColumn",(function(){return common["PointSeriesColumn"]}));__webpack_require__.d(__webpack_exports__,"PointSeriesColumnName",(function(){return common["PointSeriesColumnName"]}));__webpack_require__.d(__webpack_exports__,"PointSeriesColumns",(function(){return common["PointSeriesColumns"]}));__webpack_require__.d(__webpack_exports__,"PointSeriesRow",(function(){return common["PointSeriesRow"]}));__webpack_require__.d(__webpack_exports__,"Range",(function(){return common["Range"]}));__webpack_require__.d(__webpack_exports__,"SerializedDatatable",(function(){return common["SerializedDatatable"]}));__webpack_require__.d(__webpack_exports__,"SerializedFieldFormat",(function(){return common["SerializedFieldFormat"]}));__webpack_require__.d(__webpack_exports__,"Style",(function(){return common["Style"]}));__webpack_require__.d(__webpack_exports__,"TextAlignment",(function(){return common["TextAlignment"]}));__webpack_require__.d(__webpack_exports__,"TextDecoration",(function(){return common["TextDecoration"]}));__webpack_require__.d(__webpack_exports__,"TypesRegistry",(function(){return common["TypesRegistry"]}));__webpack_require__.d(__webpack_exports__,"TypeString",(function(){return common["TypeString"]}));__webpack_require__.d(__webpack_exports__,"TypeToString",(function(){return common["TypeToString"]}));__webpack_require__.d(__webpack_exports__,"UnmappedTypeStrings",(function(){return common["UnmappedTypeStrings"]}));__webpack_require__.d(__webpack_exports__,"Render",(function(){return common["ExpressionValueRender"]}));__webpack_require__.d(__webpack_exports__,"getExpressionsService",(function(){return getExpressionsService}));var public_0=__webpack_require__(24);var common=__webpack_require__(0);var public_=__webpack_require__(11);const[getNotifications,setNotifications]=Object(public_["createGetterSetter"])("Notifications");const[getRenderersRegistry,setRenderersRegistry]=Object(public_["createGetterSetter"])("Renderers registry");const[getExpressionsService,setExpressionsService]=Object(public_["createGetterSetter"])("ExpressionsService");var external_osdSharedDeps_React_=__webpack_require__(3);var external_osdSharedDeps_React_default=__webpack_require__.n(external_osdSharedDeps_React_);var classnames=__webpack_require__(19);var classnames_default=__webpack_require__.n(classnames);var external_osdSharedDeps_RxjsOperators_=__webpack_require__(5);var useShallowCompareEffect=__webpack_require__(21);var useShallowCompareEffect_default=__webpack_require__.n(useShallowCompareEffect);var external_osdSharedDeps_ElasticEui_=__webpack_require__(14);var external_osdSharedDeps_Theme_=__webpack_require__(20);var external_osdSharedDeps_Rxjs_=__webpack_require__(6);var external_osdSharedDeps_Lodash_=__webpack_require__(2);var external_osdSharedDeps_OsdI18n_=__webpack_require__(1);const renderErrorHandler=(element,error,handlers)=>{if(error.name==="AbortError"){handlers.done();return}getNotifications().toasts.addError(error,{title:external_osdSharedDeps_OsdI18n_["i18n"].translate("expressions.defaultErrorRenderer.errorTitle",{defaultMessage:"Error in visualisation"}),toastMessage:error.message});handlers.done()};function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function _toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}class render_ExpressionRenderHandler{constructor(element){let{onRenderError:onRenderError}=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_defineProperty(this,"render$",void 0);_defineProperty(this,"update$",void 0);_defineProperty(this,"events$",void 0);_defineProperty(this,"element",void 0);_defineProperty(this,"destroyFn",void 0);_defineProperty(this,"renderCount",0);_defineProperty(this,"renderSubject",void 0);_defineProperty(this,"eventsSubject",void 0);_defineProperty(this,"updateSubject",void 0);_defineProperty(this,"handlers",void 0);_defineProperty(this,"onRenderError",void 0);_defineProperty(this,"render",async(data,uiState)=>{if(!data||typeof data!=="object"){return this.handleRenderError(new Error("invalid data provided to the expression renderer"))}if(data.type!=="render"||!data.as){if(data.type==="error"){return this.handleRenderError(data.error)}else{return this.handleRenderError(new Error("invalid data provided to the expression renderer"))}}if(!getRenderersRegistry().get(data.as)){return this.handleRenderError(new Error(`invalid renderer id '${data.as}'`))}try{await getRenderersRegistry().get(data.as).render(this.element,data.value,{...this.handlers,uiState:uiState})}catch(e){return this.handleRenderError(e)}});_defineProperty(this,"destroy",()=>{this.renderSubject.complete();this.eventsSubject.complete();this.updateSubject.complete();if(this.destroyFn){this.destroyFn()}});_defineProperty(this,"getElement",()=>this.element);_defineProperty(this,"handleRenderError",error=>{this.onRenderError(this.element,error,this.handlers)});this.element=element;this.eventsSubject=new external_osdSharedDeps_Rxjs_["Subject"];this.events$=this.eventsSubject.asObservable();this.onRenderError=onRenderError||renderErrorHandler;this.renderSubject=new external_osdSharedDeps_Rxjs_["BehaviorSubject"](null);this.render$=this.renderSubject.asObservable().pipe(Object(external_osdSharedDeps_RxjsOperators_["filter"])(_=>_!==null));this.updateSubject=new external_osdSharedDeps_Rxjs_["Subject"];this.update$=this.updateSubject.asObservable();this.handlers={onDestroy:fn=>{this.destroyFn=fn},done:()=>{this.renderCount++;this.renderSubject.next(this.renderCount)},reload:()=>{this.updateSubject.next(null)},update:params=>{this.updateSubject.next(params)},event:data=>{this.eventsSubject.next(data)}}}}function render(element,data,options){const handler=new render_ExpressionRenderHandler(element,options);handler.render(data);return handler}function loader_defineProperty(obj,key,value){key=loader_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function loader_toPropertyKey(arg){var key=loader_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function loader_toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}class loader_ExpressionLoader{constructor(element,_expression,_params){loader_defineProperty(this,"data$",void 0);loader_defineProperty(this,"update$",void 0);loader_defineProperty(this,"render$",void 0);loader_defineProperty(this,"events$",void 0);loader_defineProperty(this,"loading$",void 0);loader_defineProperty(this,"execution",void 0);loader_defineProperty(this,"renderHandler",void 0);loader_defineProperty(this,"dataSubject",void 0);loader_defineProperty(this,"loadingSubject",void 0);loader_defineProperty(this,"data",void 0);loader_defineProperty(this,"params",{});loader_defineProperty(this,"loadData",async(expression,params)=>{if(this.execution&&this.execution.isPending){this.execution.cancel()}this.setParams(params);this.execution=getExpressionsService().execute(expression,params.context,{search:params.searchContext,variables:params.variables||{},inspectorAdapters:params.inspectorAdapters});const prevDataHandler=this.execution;const data=await prevDataHandler.getData();if(this.execution!==prevDataHandler){return}this.dataSubject.next(data)});this.dataSubject=new external_osdSharedDeps_Rxjs_["Subject"];this.data$=this.dataSubject.asObservable();this.loadingSubject=new external_osdSharedDeps_Rxjs_["BehaviorSubject"](false);this.loading$=this.loadingSubject.asObservable().pipe(Object(external_osdSharedDeps_RxjsOperators_["filter"])(_=>_===true),Object(external_osdSharedDeps_RxjsOperators_["map"])(()=>void 0));this.renderHandler=new render_ExpressionRenderHandler(element,{onRenderError:_params&&_params.onRenderError});this.render$=this.renderHandler.render$;this.update$=this.renderHandler.update$;this.events$=this.renderHandler.events$;this.update$.subscribe(value=>{if(value){const{newExpression:newExpression,newParams:newParams}=value;this.update(newExpression,newParams)}});this.data$.subscribe(data=>{this.render(data)});this.render$.subscribe(()=>{this.loadingSubject.next(false)});this.setParams(_params);if(_expression){this.loadingSubject.next(true);this.loadData(_expression,this.params)}}destroy(){this.dataSubject.complete();this.loadingSubject.complete();this.renderHandler.destroy();if(this.execution){this.execution.cancel()}}cancel(){if(this.execution){this.execution.cancel()}}getExpression(){if(this.execution){return this.execution.getExpression()}}getAst(){if(this.execution){return this.execution.getAst()}}getElement(){return this.renderHandler.getElement()}inspect(){return this.execution?this.execution.inspect():undefined}update(expression,params){this.setParams(params);this.loadingSubject.next(true);if(expression){this.loadData(expression,this.params)}else if(this.data){this.render(this.data)}}render(data){this.renderHandler.render(data,this.params.uiState)}setParams(params){var _this$execution;if(!params||!Object.keys(params).length){return}if(params.searchContext){this.params.searchContext=Object(external_osdSharedDeps_Lodash_["defaults"])({},params.searchContext,this.params.searchContext||{})}if(params.uiState&&this.params){this.params.uiState=params.uiState}if(params.variables&&this.params){this.params.variables=params.variables}this.params.inspectorAdapters=params.inspectorAdapters||((_this$execution=this.execution)===null||_this$execution===void 0?void 0:_this$execution.inspect())}}const loader=(element,expression,params)=>new loader_ExpressionLoader(element,expression,params);function _extends(){_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const defaultState={isEmpty:true,isLoading:false,error:null};const ReactExpressionRenderer=_ref=>{let{className:className,dataAttrs:dataAttrs,padding:padding,renderError:renderError,expression:expression,onEvent:onEvent,reload$:reload$,...expressionLoaderOptions}=_ref;const mountpoint=Object(external_osdSharedDeps_React_["useRef"])(null);const[state,setState]=Object(external_osdSharedDeps_React_["useState"])({...defaultState});const hasCustomRenderErrorHandler=!!renderError;const expressionLoaderRef=Object(external_osdSharedDeps_React_["useRef"])(null);const hasHandledErrorRef=Object(external_osdSharedDeps_React_["useRef"])(false);const errorRenderHandlerRef=Object(external_osdSharedDeps_React_["useRef"])(null);Object(external_osdSharedDeps_React_["useEffect"])(()=>{const subs=[];expressionLoaderRef.current=new loader_ExpressionLoader(mountpoint.current,expression,{...expressionLoaderOptions,onRenderError:hasCustomRenderErrorHandler?(domNode,error,handlers)=>{errorRenderHandlerRef.current=handlers;setState(()=>({...defaultState,isEmpty:false,error:error}));if(expressionLoaderOptions.onRenderError){expressionLoaderOptions.onRenderError(domNode,error,handlers)}}:expressionLoaderOptions.onRenderError});if(onEvent){subs.push(expressionLoaderRef.current.events$.subscribe(event=>{onEvent(event)}))}subs.push(expressionLoaderRef.current.loading$.subscribe(()=>{hasHandledErrorRef.current=false;setState(prevState=>({...prevState,isLoading:true}))}),expressionLoaderRef.current.render$.pipe(Object(external_osdSharedDeps_RxjsOperators_["filter"])(()=>!hasHandledErrorRef.current)).subscribe(item=>{setState(()=>({...defaultState,isEmpty:false}))}));return()=>{subs.forEach(s=>s.unsubscribe());if(expressionLoaderRef.current){expressionLoaderRef.current.destroy();expressionLoaderRef.current=null}errorRenderHandlerRef.current=null}},[hasCustomRenderErrorHandler,onEvent]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{const subscription=reload$===null||reload$===void 0?void 0:reload$.subscribe(()=>{if(expressionLoaderRef.current){expressionLoaderRef.current.update(expression,expressionLoaderOptions)}});return()=>subscription===null||subscription===void 0?void 0:subscription.unsubscribe()},[reload$,expression,...Object.values(expressionLoaderOptions)]);useShallowCompareEffect_default()(()=>{if(expressionLoaderRef.current){expressionLoaderRef.current.update(expression,expressionLoaderOptions)}},[{expression:expression,...expressionLoaderOptions}]);Object(external_osdSharedDeps_React_["useLayoutEffect"])(()=>{if(state.error&&errorRenderHandlerRef.current){hasHandledErrorRef.current=true;errorRenderHandlerRef.current.done();errorRenderHandlerRef.current=null}},[state.error]);const classes=classnames_default()("expExpressionRenderer",className,{"expExpressionRenderer-isEmpty":state.isEmpty,"expExpressionRenderer-hasError":!!state.error});const expressionStyles={};if(padding){expressionStyles.padding=external_osdSharedDeps_Theme_["euiThemeVars"].paddingSizes[padding]}return external_osdSharedDeps_React_default.a.createElement("div",_extends({},dataAttrs,{className:classes}),state.isEmpty&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLoadingChart"],{mono:true,size:"l"}),state.isLoading&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiProgress"],{size:"xs",color:"accent",position:"absolute"}),!state.isLoading&&state.error&&renderError&&renderError(state.error.message,state.error),external_osdSharedDeps_React_default.a.createElement("div",{className:"expExpressionRenderer__expression",style:expressionStyles,ref:mountpoint}))};function plugin_defineProperty(obj,key,value){key=plugin_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function plugin_toPropertyKey(arg){var key=plugin_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}function plugin_toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}class plugin_ExpressionsPublicPlugin{constructor(initializerContext){plugin_defineProperty(this,"expressions",new common["ExpressionsService"])}configureExecutor(core){const{executor:executor}=this.expressions;const getSavedObject=async(type,id)=>{const[start]=await core.getStartServices();return start.savedObjects.client.get(type,id)};executor.extendContext({environment:"client",getSavedObject:getSavedObject})}setup(core){this.configureExecutor(core);const{expressions:expressions}=this;const{renderers:renderers}=expressions;setRenderersRegistry(renderers);setExpressionsService(expressions);const setup=expressions.setup();return Object.freeze(setup)}start(core){setNotifications(core.notifications);const{expressions:expressions}=this;const start={...expressions.start(),ExpressionLoader:loader_ExpressionLoader,ExpressionRenderHandler:render_ExpressionRenderHandler,loader:loader,ReactExpressionRenderer:ReactExpressionRenderer,render:render};return Object.freeze(start)}stop(){this.expressions.stop()}}function public_plugin(initializerContext){return new plugin_ExpressionsPublicPlugin(initializerContext)}}]);